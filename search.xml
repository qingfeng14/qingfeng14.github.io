<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Lec17]]></title>
      <url>https://qingfeng14.github.io/2017/04/26/Lec17/</url>
      <content type="html"><![CDATA[<p>1 在报告中通过枚举和分类方法或反证法说明Peterson算法的正确性。</p>
<a id="more"></a>
<p>参考：</p>
<ul>
<li>https://en.wikipedia.org/wiki/Peterson%27s_algorithm</li>
<li>https://en.wikipedia.org/wiki/Dekker%27s_algorithm</li>
</ul>
<p>解：Peterson 算法是满足两个线程之间互斥的算法，针对P0和P1两个线程，其执行的代码分别为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">P0:      flag[<span class="number">0</span>] = <span class="literal">true</span>;</div><div class="line">P0_gate: turn = <span class="number">1</span>;</div><div class="line">         <span class="keyword">while</span> (flag[<span class="number">1</span>]== <span class="literal">true</span> &amp;&amp; turn == <span class="number">1</span>)</div><div class="line">         &#123;</div><div class="line">             <span class="comment">// busy wait</span></div><div class="line">         &#125;</div><div class="line">         <span class="comment">// critical section</span></div><div class="line">         ...</div><div class="line">         <span class="comment">// end of critical section</span></div><div class="line">         flag[<span class="number">0</span>] = <span class="literal">false</span>;</div><div class="line"></div><div class="line"></div><div class="line">P1:      flag[<span class="number">1</span>] = <span class="literal">true</span>;</div><div class="line">P1_gate: turn = <span class="number">0</span>;</div><div class="line">         <span class="keyword">while</span> (flag[<span class="number">0</span>]==<span class="literal">true</span> &amp;&amp; turn == <span class="number">0</span>)</div><div class="line">         &#123;</div><div class="line">             <span class="comment">// busy wait</span></div><div class="line">         &#125;</div><div class="line">         <span class="comment">// critical section</span></div><div class="line">         ...</div><div class="line">         <span class="comment">// end of critical section</span></div><div class="line">         flag[<span class="number">1</span>] = <span class="literal">false</span>;</div></pre></td></tr></table></figure>
<p>首先，需要明确，如果<span class="math inline">\(P_0\)</span> 和<span class="math inline">\(P_1\)</span>两个线程同时试图进入临界区，即两个线程都试图设置turn为对方，即发生了同时写操作，这时总线仲裁会确定一个写操作的先后顺序，那么被总线仲裁先写的则会被覆盖，也就是先写的会先被允许进入临界区。</p>
<p>下面证明Peterson算法的正确性，即满足 <code>空闲则入，忙则等待，有限等待</code>的访问规则</p>
<ul>
<li><p>互斥：只有当 flag[j] == FALSE 或 turn == i 时 Pi 才进入临界区。假设 Pi 和 Pj 同时进入临界区，则 flag[0] == flag[1] == TRUE， 而turn 只能为 0 或 1，所以只有一个进程（假设 turn == i）Pi 能够跳出 While 语句进入临界区。此外，只要 Pi 在临界区内，flag[i] == TRUE &amp;&amp; turn == i 就始终成立，所以 Pi 在临界区执行期间，Pj 将始终等待或执行剩余区内容。这就意味着其满足<code>忙则等待</code>规则</p></li>
<li><p>空闲则入，有限等待：进程 Pi 仅在 flag[j] == True 且 turn == j 的情况下才会被阻塞，若 Pj 不准备进入临界区，则 flag[j] == False，此时 Pi 可以进入；若 Pj 当前也在请求进入临界区，则 flag[j] == True，此时由 turn 决定哪个进程进入临界区。假设此时 Pj 进入临界区，当 Pj 退出临界区时会设置 flag[j] 为 False 使 Pi 进入临界区；如果 Pj 剩余区执行速度非常快，又重新申请进入临界区，此时 Pj 设置 flag[j] 为 TRUE，同时 turn 被设置为 i。因此 Pi 一定会进入临界区（发展），并且最多需要等待一次。即满足空闲则如，以及有限等待规则</p></li>
</ul>
<p>2 在报告中准确描述Eisenberg同步算法，并通过枚举和分类方法或反证法说明说明Eisenberg同步算法的正确性。用C或PYTHON实现Eisenberg同步算法和测试用例。在报告中给出测试结果简单描述。</p>
<p>参考：</p>
<ul>
<li>https://en.wikipedia.org/wiki/Eisenberg_%26_McGuire_algorithm</li>
<li>https://en.wikipedia.org/wiki/Lamport%27s_bakery_algorithm</li>
<li>http://blog.csdn.net/asce1885/article/details/5735565</li>
</ul>
<p>piazza.com的本课程网页中，搜索“Eisenberg”，可看到3个相关帖子集合</p>
<p>算法描述</p>
<p>Eisenberg同步算法给每个对某个共享资源有需求的n个进程中的每一个有一个唯一的序号，形成一个圈，根据这个圈分发资源。当进程i对共享资源有需求时，先声明对其需求，即flag[i] = WAITING，表示进程i想进入临界区，此时检查进程i前面是否有其他进程已占用该资源，若有，则等待其执行完毕，如果没有，则尝试占有资源（flag[i]=ACTIVE），如果此时其他进程也处于ACTIVE状态，则进程i占有失败，重复上述操作并回到WAITING态，直到占有成功</p>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 作业 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[关于广告专业需求分析的报告书]]></title>
      <url>https://qingfeng14.github.io/2017/04/24/ignore_%E6%8A%A5%E5%91%8A%E4%B9%A6/</url>
      <content type="html"><![CDATA[<h1 id="引言">引言</h1>
<h2 id="摘要">摘要</h2>
<p>为贯彻落实党的十八大提出的“要做好以高校毕业生为重点的青年就业工作，推动实现更高质量就业”的精神,我们小组参加了学院组织的“行业-专业-就业（岗位）”人才需求分析大赛，并形成了本报告。本文梳理了近10年的广告行业相关发展情况报告，以及发展趋势报告；分析了广告行业的发展历史，发展现状，分析了广告行业的产业链，就业环境，市场盈利现状；预测了广告行业的发展趋势。同时，我们对广告设计专业毕业生的职业发展现状及其对本专业的专业学习建议进行了调研。</p>
<h2 id="关键词">关键词：</h2>
<p>广告设计与制作 广告行业  发展现状  发展趋势 产业结构</p>
<h2 id="研究背景及意义">研究背景及意义</h2>
<h3 id="研究背景">研究背景</h3>
<p>据了解广告行业的兴衰一直被认为是经济发展的明显风向标，而广告市场的活跃程度在一定程度上是与经济市场的活跃程度成正比的，广告从作为一种重要的营销手段发展成为一个相对独立的产业经历了十分漫长的历史，“1841年，沃尔尼·B·帕尔默开始为‘镜报’销售版面，并自称为‘报纸广告代理人’，从而宣告了广告代理业的诞生”。 据不完全统计，迄今关于广告的定义不下一百种，并且还在不断扩展。“新闻记者可能将广告定义为一种传播过程、公关过程或劝服过程，商业人士可能把广告视为一种营销过程，经济学家和社会学家还可能把广告当做一种经济表象、社会表象或伦理表象，而有些消费者则可能干脆把广告当做垃圾。”对“产业”概念的理解也很复杂多样，目前已到了满天飞和被严重泛化的程度。因此，对“广告产业”概念难以统一认识便十分自然。广告产业就是广告市场。由广告主、广告公司、广告媒体、广告受众所组成；从介质来分，广告产业可分为报纸广告业、电视广告业、户外广告业和网络广告业等。</p>
<h3 id="研究目的">研究目的</h3>
<p>为了更好的帮助广告设计专业学生对本专业，本行业的发展现状、发展现状、发展趋势有一个更加深入的了解，帮助高校学生主动适应和对接行业、产业需求，培养具有工匠精神的技术技能型人才。帮助本专业学生有针对性地去提升自己的行业竞争力，以市场需求和毕业生需求给高校教育提出可行性建议。</p>
<h2 id="研究现状及本研究内容">研究现状及本研究内容</h2>
<p>目前国内外的广告行业研究着眼于广告行业的发展现状和发展趋势，以及广告行业产业链及市场竞争研究。</p>
<p>本研究在此基础上对过去5年我国广告行业发展状况进行了综述，对2017年广告行业发展趋势进行了分析。并对广告设计专业毕业生进行了职业发展调研，以求对在校生提出更多可行性建议。</p>
<h2 id="研究方法">研究方法</h2>
<ul>
<li>根据近10年的广告行业相关论文、报道进行文献综述，对广告行业的发展历史、现状、趋势进行综合分析</li>
<li>问卷调研：对广告专业毕业生发展现状进行调研，以进一步探析市场对广告专业毕业生的要求。</li>
<li>数据统计：对近5年的国家工商总局、国家统计局的广告行业发展数据进行统计，分析广告行业的获利性、市场容量。</li>
</ul>
<h1 id="行业概述">行业概述</h1>
<h2 id="广告行业发展概况">广告行业发展概况</h2>
<h3 id="广告行业概况">广告行业概况</h3>
<h4 id="广告行业的发展历史">广告行业的发展历史</h4>
<h5 id="中国广告协会">中国广告协会：</h5>
<p>中国广告协会成立于1983年12月，是经民政部批准登记的具有社团法人资格的全国性广告行业组织，是国家工商总局的直属事业单位，下设八个办事机构和十五个分支机构。它是我国广告行业的自律组织，是联系政府广告行政管理机构 与广告主、广告经营者、广告发布者的桥梁和纽带。高举中国特色社会主义伟大旗帜，以马克思列宁主义、毛泽东思想、邓小平理论和“三个代表”重要思想为指导，坚持四项基本原则，坚持改革开放，全面贯彻落实科学发展观，遵守宪法、法律、法规和国家政策，遵守社会道德风尚，代表和维护行业的合法权益，为行业服务，加强行业自律，促进广告业健康、和谐发展。</p>
<p>2008年2月9日，中国广告协会第五次会员代表大会审议通过了最新的《中国广告行业自律规则》。该自律规则对广告内容、广告行为应遵循的一般原则和限制性要求作了详细规定。其主要内容是禁止虚假和误导性广告，广告应当尊重他人的知识产权，尊重妇女和儿童，尊重良好道德传统。禁止以商业贿赂、诋毁他人声誉和其他不正当手段达成交易，禁止以不正当的广告投放手段干扰媒体节目、 栏目等内容的安排。</p>
<h5 id="中国商务广告协会">中国商务广告协会：</h5>
<p>中国商务广告协会成立于1981年，原为中国对外经济贸易广告协会，隶属于 商务部。它是除中国广告协会外的另一行业自律组织，也是我国最早成立的全国 性广告行业组织。其核心工作是“团结内外贸易领域的广告企业，促进广告业的 交流和发展”。协会组织了一批实力相对较强、信誉好、服务水平高的本土广告 公司，并吸收一批在国内较为成功的合资广告公司，共同组成了一个具有中国特 色的广告高端组织。</p>
<h5 id="中国4a协会">中国4A协会：</h5>
<p>中国 4A 协会成立于 2005 年 12 月，由中国商务广告协会发起，是在国内从 事经营活动的外资及本土大型综合性广告公司共同组成的行业自律组织，也是中 国广告代理商的高端组合。其宗旨是通过举办培训与各种相关活动，加强本土企 业与国外同行间的合作与交流，建立规范的广告经营秩序，抵制不正当竞争，推 进中国广告业逐步向符合国际惯例的广告代理制迈进。</p>
<h4 id="广告行业发展现状">广告行业发展现状：</h4>
<h5 id="广告业整体规模与增长情况">广告业整体规模与增长情况</h5>
<p>自1979年中国广告业市场重新起步，广告行业显示出强劲的活力，随着改革 开放的深入，中国整体经济持续高速增长，广告行业发展迅速。经过二十多年的 发展，我国广告市场已为全球广告市场增长最快的市场之一。根据国家工商行政 管理总局公布的数据，从1992年至2013年，我国广告市场规模由63.22亿元增长 到5019.75亿元，年均复合增长率达到23.20%，远高于同期国内GDP的增长速度。 下图清晰地显示了2004-2013年10年来中国广告业市场规模增长情况：</p>
<div class="figure">
<img src="https://d2ppvlu71ri8gs.cloudfront.net/items/3R1A2c05240o36460I1N/Image%202017-04-25%20at%2012.29.53%20上午.png" alt="2004年-2013年中国广告规模">
<p class="caption">2004年-2013年中国广告规模</p>
</div>
<p>随着中国广告业收入增长，广告经营单位与从业人员也迅速增长。根据国家 工商行政管理总局公布的数据，截至 2013 年底，全国广告经营单位达 44.5 万家， 从业人员 262.2 万人，分别比上年同期增长 17.90%和 20.40%。</p>
<h4 id="国际广告行业发展状况">国际广告行业发展状况</h4>
<p>根据四大会计师事务所之一普华永道的数据，全球网络 广告市场规模于 2012 年达到一千亿美元，预计全球网络广告 市场规模于 2017 年将达到近两千亿美元，占全球广告市场规 模比重上升至近 30%， 接近电视广告市场规模。 美国是全球最大的互联网广告市场，其市场规模从 1996 年的 2.68 亿美元增长到 2013 年的 428 亿美元，复合增长率 34.77%。美国互联网广告市场增长较快，互联网于 2010 年超 越报纸，2011 年超越有线电视，2013 年超越无线电视，成为 美国第二大广告媒体。</p>
<h4 id="中国广告行业发展状况">中国广告行业发展状况</h4>
<h5 id="传统广告行业的发展状况">传统广告行业的发展状况</h5>
<p>近几年来，我国传统广告媒体市场规模一直保持着较为 平稳的增长趋势。总量上看，电视媒体在未来的一段时间内 仍会保持较高的市场份额，但过高的广告成本和相对较弱的 人群针对性，使得电视广告对一些广告主的吸引力在下降， 广告将会逐渐集中于一些内容强势的频道，这些频道将会继 续保持高增长，而电视广告媒体的整体增速将会维持在较低 的水平。广播媒体和户外媒体将会保持较为稳定的增速。报 纸和杂志这类平面媒体近年来市场规模逐渐减小，其萎缩已 成定局，越来越多的中高端广告客户正在将广告预算从这两类媒体中移出。</p>
<h5 id="互联网广告行业的发展状况">互联网广告行业的发展状况</h5>
<p>互联网广告中网络视频广告占比很高，其上游行业主要 为各类网络视频服务商，我国网络视频服务商主要有以优酷 土豆、酷 6、PPTV 等为代表的专业视频网站和其他提供视频 服务的传统门户网站。此外，近年我国广电系统的电视台纷 纷进入网络视频领域，如中央电视台打造了国家网络电视台 CNTV，上海东方传媒集团有限公司旗下的东方宽频推出了 上海网络电视台等。 伴随着人们将获取信息和娱乐的主要途径转移到互联网，同时越来越多的消费行为发生在互联网上，广告主逐步加大 在互联网上进行广告投放的力度，而这其中，随着智能终端 设备的普及、手机网民数量的不断增加以及移动营销平台的 不断涌现，未来移动互联网广告也将发展迅速。</p>
<h4 id="广告当前发展阶段">广告当前发展阶段</h4>
<p>电视广告因为过高的广告成本和相对较弱的人群针对，使得电视广告媒体对一些广告主的吸引力正在下降，电视广告的整体增速将会维持在较低的水平或出现负增长从广告媒体作用看，未来对广告媒体的要求将从简单的营销管道能力变为营销发酵能力，广告媒体市场的竞争也不再简单来自于大众媒体与大众媒体之间，一切具备用户规模和发酵能力的渠道都可能成为有力的广告媒体。</p>
<h4 id="广告行业技术发展水平">广告行业技术发展水平</h4>
<p>随着市场竞争的加剧以及我国优秀企业品牌意识的提升，广告主越来越重视广告对企业战略和营销的重要作用，国内 大型企业广告主对广告公司的专业服务能力提出了进一步的要求，特别是对广告公司整合全国媒体资源的能力、专业的传播策略与媒介计划能力、大型客户的服务经验等方面提出了更高的专业要求。</p>
<p>近年来，为了满足广告主日益增长的专业广告服务需求，我国广告公司不断吸收和引进国际4A广告公司先进的服务 理念、发展经验和工具方法，结合国内市场、消费者、媒体环境等实际状况，逐步培养、引进专业服务和技术人才，购买或建立起大型市场与媒体研究数据库，加大业务服务的技 术支持力度，部分广告公司还自行研发出广告决策系统分析平台。我国广告公司在不断优化业务流程、提升服务水平的 过程中，逐步提高专业综合服务能力的系统性、协同性，逐步形成完整的广告服务产业链，以更好地服务于企业的综合 性传播需求。</p>
<p>随着我国广告公司未来的不断发展，我国广告行业的专业技术水平和综合系统服务能力将会得到进一步提升，逐步缩小与国际 4A 广告公司的差距。</p>
<h3 id="广告设计与制作行业相关政策与监管机制">广告设计与制作行业相关政策与监管机制</h3>
<h4 id="关于广告监管体制的研究">关于广告监管体制的研究</h4>
<p>国内关于广告监管体制的研究，主要集中在两个 层面，一是政府主导型广告监管体制研究，二是广告监管方式创新研究。</p>
<p><strong>主要法律法规</strong></p>
<p>广告业法律法规体系由《中华人民共和国广告法》 、 《广告管理条例》 、行政规章以及规范性文件等四个层次构成。此外，地方政 府也根据国家法律法规制定了适用于本地管理的地方法规和规章。具体而言，《中华人民共和国广告法》和《广告管理条例》是制定所有广告法规的基础，而由国 家和地方各级工商行政管理部门所颁布的管理办法和规定，则是《中华人民共和国广告法》和《广告管理条例》在实践中的调整与补充，具有指导性或参照性的意义。</p>
<h2 id="广告行业的市场吸引力分析">广告行业的市场吸引力分析</h2>
<h3 id="广告行业产品市场客户群消费调查">广告行业产品市场客户群消费调查</h3>
<h4 id="客户群分类分析">客户群分类分析</h4>
<p>广告客户，即广告主，按性质分有企事业单位、其他组织和个人；根据经营规模和范围分成跨国、全国、区域和地区广告主。</p>
<p>根据广告主性质和经营规模是有不用的传播媒介的，一般来说，规模越大的会选择覆盖范围广收视到达率高的媒介，但这并不是绝对的，还要根据客户的发展阶段和阶段性需求来选择媒体，包括做配套的公关活动。</p>
<h4 id="同行业品牌排名">同行业品牌排名</h4>
<h5 id="盛世长城国际广告公司">盛世长城国际广告公司</h5>
<h6 id="企业介绍">企业介绍</h6>
<p>盛世长城国际广告公司是SAATCHI &amp; SAATCHI和中国航天工业部中国长城工业总公司合资的公司，由国家对外经济贸易部（商务部）批准，成立于1992年8月。十多年来，盛世长城不断探索和努力，由小到大，发展壮大。营业额从94年起，一直在全国广告公司排序保持第一。</p>
<h6 id="企业投资动态分析">企业投资动态分析</h6>
<p>盛世长城的目标就是帮助客户品牌创造爱来赢得消费者的心，拥有服务如此多消费者喜爱的领导品牌的口碑，正是盛世长城立足本土市场，不断保持高速发展的强大后盾，也让盛世长城成为众多客户心目中的“LOVEMARKS”。</p>
<h5 id="奥美">奥美</h5>
<h6 id="企业介绍-1">企业介绍</h6>
<p>奥美已经成为了广告、公关、互动、设计、视觉识别、零售市场营销、促销和新媒体等传媒领域的专家。今天,奥美已经从两个员工成长到跻身全球8大广告事业集团之一,有450个分支机构分布在169个城市。</p>
<h3 id="广告行业产量与市场容量统计">广告行业产量与市场容量统计</h3>
<h4 id="年广告行业需求总量">2011-2015年广告行业需求总量</h4>
<p>未来五年， 广告市场占 GDP 的比重可能达到 1%-2%， 复合增长率达到 10%-20%，五年内将拥有万亿规模。</p>
<h4 id="年广告行业需求结构变化">2015年广告行业需求结构变化</h4>
<div class="figure">
<img src="https://d2ppvlu71ri8gs.cloudfront.net/items/1N0i0H3B0h0r181Q3I1Y/Image%202017-04-25%20at%2012.35.58%20上午.png" alt="2015年广告行业需求结构变化">
<p class="caption">2015年广告行业需求结构变化</p>
</div>
<p>由此可见，随着行业逐渐成熟和市场认知水平逐渐提升，程序化购买市场将继续保持高速发展。当前中国程序化广告市场正处于快速成长期，一方面是由于程序化购买得到市场广泛认可,RTB 市场高速增长；另一方面由于大型品牌广告主对 PMP 交易方式和程序化购买对品牌带来的帮助有了充分的认知。同时，移动端程序化购买正式投放市场，成为市场新的增长动力。</p>
<h3 id="广告行业成长性分析">广告行业成长性分析</h3>
<h4 id="国内广告市场发展趋势">2017国内广告市场发展趋势</h4>
<p>近几年中国广告行业变化惊人，趋势纷繁复杂，让人有点应接不暇。时至今日，中国的广告市场的发展参差不齐，而广告主们依然对各种类型的广告都敢于尝试，并乐此不疲。2016年马上就要落下帷幕，2017年的中国广告市场又将怎样发展呢？为此有了这几大预测。</p>
<div class="figure">
<img src="https://d2ppvlu71ri8gs.cloudfront.net/items/2U3S2p1X040X1z1R3D40/Image%202017-04-25%20at%2012.37.31%20上午.png" alt="中国电视广告市场格局">
<p class="caption">中国电视广告市场格局</p>
</div>
<h5 id="趋势一预计2017年中国电视广告市场总盘将跌破千亿">趋势一:预计2017年中国电视广告市场总盘将跌破千亿</h5>
<p>2016年国内宏观经济形势下行压力巨大，只有强势频道价格出现实际增长，大多数频道是明涨暗降，在广电总局一系列政策高压管控下，媒体广告时间又出现缩减。预计2016全年电视广告大盘能勉强维持在1000亿以上。但随着当下各大频道2017年招商遇冷，各媒体2017招商刊例价也首次在名义上没有再继续增长，增值配送等政策也意味着媒体价格的实际下降，甚至个别节目出现了流标现象。如果在经济下行压力下企业广告预算缩减或持续向互联网等其他媒介转移预算，中国电视广告市场总盘在2017年跌破千亿的几率将非常大。</p>
<h5 id="趋势二新的消费热点行业成为新的增长动力">趋势二：新的消费热点行业成为新的增长动力</h5>
<p>随着中国经济进入新常态及消费结构升级，一些新的消费热点行业将会成为广告市场新的增长动力。首先是国产手机行业，随着三星受挫、苹果下滑，国产手机品牌开始逆袭，纷纷加码抢夺巨头丢失的份额。汽车行业一直是广告投放大户。2016年上半年，我国上市的车企中有6家企业的广告宣传推广费用超过4亿元人民币。其中上汽集团位居第一，广宣费用达到47.43亿元。另外，白酒行业回归增长轨道，投放潜力可期，作为传统的广告投放大户，白酒行业或将在2017年有大爆发。</p>
<h5 id="趋势三将形成传统电视媒体互联网新平台媒体生活圈媒体三足鼎立格局">趋势三：将形成传统电视媒体、互联网新平台/媒体、生活圈媒体三足鼎立格局</h5>
<p>中国广告市场媒体创收将形成传统电视媒体、互联网新平台/媒体、生活圈媒体三足鼎立的头部媒体阵营。CCTV为代表的电视媒体代表着传统媒体具有高覆盖和高公信力的优势，分众传媒为代表的生活圈媒体代表着城市生活空间媒体的高到达和高匹配的品质，而BAT、今日头条等则代表的是互联网媒体具有高连接和强互动的属性。</p>
<h3 id="广告行业获利性分析">广告行业获利性分析</h3>
<h4 id="现状分析">现状分析</h4>
<h5 id="入行门槛低">入行门槛低</h5>
<p>目前，我国广告业存在着相当混乱的行业结构，为数不多的有较强实力和较高素质的专业广告公司，同数量庞大的各种“夫妻店”、“磨坊式加工店”共存。由于广告行业比较其它行业来说，具有投入少，风险低，业务市场大的特点。</p>
<h5 id="结构单一同质化严重">结构单一，同质化严重</h5>
<p>目前，国内的广告公司普遍以制作为主，只有少数以创意策划设计为主的广告公司，而4A广告公司更是少之又少，以深圳为例，大大小小的广告公司有几万家，其中有3、4人组成的工作室，还有10人左右的小公司，也有50人左右的中型广告公司，而100人以上的广告公司更是少之又少。广告公司的经营范围大多很狭窄，同质化极为严重，有时候一条街上都是制作广告标识的公司，而以喷绘制作为主的公司更是多如牛毛。</p>
<h5 id="生产工艺复杂">生产工艺复杂</h5>
<p>作为广告行业来说，没有统一的标准，因为广告公司都是针对不同的客户，要满足客户不同的需求，假如有100个客户，那么就要有100种不同的个性化需求。也正是由于工艺复杂，导致广告公司容易出错，效率偏低。</p>
<h5 id="广告公司利润低">广告公司利润低</h5>
<p>由于广告公司入行门槛低，并具有投入少，风险低，业务市场大的特点，很多企业和个人都将目光投向广告行业，九十年代很多广告公司都能在竞争不太激烈的情况下，获取相对较大的利润。</p>
<h5 id="广告公司老板缺乏管理意识">广告公司老板缺乏管理意识</h5>
<p>有一些中小型公司的老板，为了节省人力资源成本，实际上还在扮演一个打工仔老板的角色，很多事情亲力亲为，每天都要做很多具体的事情，还沾沾自喜，认为自己的能力技术都很不错，比起员工要强得多，其实大可不必。作为私营企业，之所以能脱颖而出，在很大程度上得宜于组织创办人的智慧、能力及知识层次。</p>
<h5 id="广告行业竞争越来越激烈">广告行业竞争越来越激烈</h5>
<p>一般人都认为广告公司利润高，赚钱容易，那已是九十年代的事情了，广告公司不仅是高端的脑力劳动，也有大量的体力劳动，为了满足客户需求，广告公司经常24小时营业，其劳动强度十分巨大。</p>
<p>除此之外，客户在选择广告公司的时候，不仅从价格上考虑，还从公司资质，公司实力上面进行综合考虑，因此，小型广告公司的竞争力相当有限。随着广告行业的竞争日趋激烈，其价格也变得透明化、公开化，在国内一些中小型城市，由于竞争激烈，使得策划和设计都是以免费的形式进行，这种恶性竞争已经制约了广告业的发展。</p>
<h5 id="市场缺乏规范化管理">市场缺乏规范化管理</h5>
<p>于广告行业属于一个相对特殊的行业，市场认知度存在着极大的地区差异，很多中小型城市对广告业缺乏统一管理，任其恶性竞争，从而制约了行业的发展，因此，作为不同地区的广告公司，要以因地制宜的基本原则，从本地的实际情况出发，开展适合自身发展的业务，制定相应的计划，并根据市场发展的变化，不断调整经营思路和经营方向。</p>
<h5 id="经营项目单一">经营项目单一</h5>
<p>很多广告公司老板都已经意识到，只有解决公司的业务问题，才能解决公司的生存及发展问题，但是这些老板们都苦无良策。一方面，广告公司所处的环境有一个地区限制，就好像一个商场一样，其辐射的商圈都是有限的。另一方面，加上同行之间的竞争激烈，本来有限的客户资源，更是不断流失。目前，很多广告公司的业务项目都很单一</p>
<h5 id="管理模式落后">管理模式落后</h5>
<p>目前，国内的一些中小型广告公司，有许多还停留在家族式管理模式阶段，有一些是夫妻店，有一些是朋友合伙经营，也有一些是强调老总个人说了算的随机化管理。在创业初期阶段，这些管理模式确实起到了一点作用，但是随着公司的不断发展壮大，这些管理模式的弊病也在日常管理中逐渐暴露出来，员工积极性不高，工作效率低下，比如几个股东合伙经营，很有可能出现利益分配不公，导致股东之间不欢而散，导致公司关门歇业。也有一些企业采取家族式管理，公司关键部门都是亲戚担任要职，公司缺乏公平公正的氛围，员工工作感觉压抑，没有形成健康的企业文化，</p>
<p>这几种管理方式，不仅不利于公司的发展，而且甚至有可能造成管理上的脱节，进而失控，造成严重的后果。</p>
<h5 id="人才不稳定">人才不稳定</h5>
<p>广告公司如何引进人才，培养人才并留住人才，相信都是广告公司老板伤脑筋的问题。目前，国内很多中小型企业，在创业初期阶段，很多老板都深切感受到招人难，用人更难。由于公司规模不大，经营项目单一，员工发挥的空间也有限，管理上基本上采取人盯人的方式，管理上难免脱节，员工的积极性也不高，而且由于平台有限，很多员工在公司学到一定本领以后，就会主动跳槽，寻求更好的工作平台，给公司造成了巨大的人力成本浪费，也伤害了广告公司老板的感情，甚至可能给公司的业务造成巨大损失。</p>
<p>即使一些大中型广告公司，仍然对人才问题感到头疼，</p>
<h3 id="我国广告行业可进入性分析">我国广告行业可进入性分析</h3>
<p>在2013年中国广告整体规模突破5000亿的情况下，考虑未来5年的经济增长速度和广告市场的GDP占比，对比美日等国的同类占比情况，我们认为未来五年广告市场仍将保持10%-20%的整体增速，或将达到万亿规模。</p>
<p>互联网广告又是广告市场增长最快的领域，其市场占比已从08年的13.8%迅速提升至2013年的20.8%，据宇博智业市场研究中心发布的2014-2018年中国广告公司行业市场竞争格局分析与投资风险预测报告分析显示，在广告主愈发认可互联网广告、互联网广告已成趋势的前提下，再对比美国互联网广告的发展规律，我们认为未来五年互联网广告将保持25%-35%的整体增速，市场规模或将由2013年的 1100亿增长至2018年的4000亿，占比由当前约20%提升至40%，超过电视成为第一大媒体。</p>
<p>整体来看，我们看好三类公司：</p>
<ul>
<li>最看好拥有优质媒体资源和高用户粘性的互联网媒体公司，如百度、淘宝、新浪、优酷土豆等互联网媒体将获得市场80%-90%的收入，理应享有较高估值，但随着增速的逐渐降低，其估值中枢也将逐渐下滑;</li>
<li>其次我们看好广告技术公司(如DSP、SSP、DMP等相关公司)，基于大数据的精准营销技术，伴随随着第三次互联网广告变革改变行业生态，技术公司具备爆发潜力，具备最大的弹性空间;</li>
<li>最后是互联网广告代理公司，依靠其客户资源、数字化全案营销能力和天生的持续外延发展思路，实现业绩的高速增长。更重要的，该类公司是A股目前唯一能参与的互联网广告标的，随着互联网广告市场的高速发展相应标的必将有所表现。（来自中国报告大厅）</li>
</ul>
<h2 id="广告行业上下游产业研究发展">广告行业上下游产业研究发展</h2>
<h3 id="广告行业上下游发展概况及分析">广告行业上下游发展概况及分析</h3>
<p>截至2014 年12月，中国网民数量达6.49亿，互联网普及率为45.8%，较2013 年底提升2.1 个百分点， 预测2015 年网民数量将达到6.69 亿，普及率达到近50%。中国网民规模和互联网普及率如下表所示：</p>
<div class="figure">
<img src="https://d2ppvlu71ri8gs.cloudfront.net/items/2X0F0b0X1y3I2s2g0C1R/Image%202017-04-25%20at%2012.44.44%20上午.png" alt="2005-2015年中国互联网规模和普及率">
<p class="caption">2005-2015年中国互联网规模和普及率</p>
</div>
<p>中国产业信息网发《2015-2020年中国互联网广告市场格局及投资咨询报告》指出：随着互联网行业的迅速发展，广告主逐步加大在互联网上进行广告投放的力度，目前互联网广告市场占整体广告市场的占比在20%左右，预计2015 年将进一步增长至26.6%。同时，自2011 年开始，中国互联网广告市场增速远高于电视、报纸、广播、杂志等传统媒体平台。2014 年中国互联网规模为1540 亿元，较13 年增长40%，预计2017 年将达到2800 亿元，未来2 年互联网广告增速仍将超过30%。</p>
<div class="figure">
<img src="https://d2ppvlu71ri8gs.cloudfront.net/items/2B1V2U1P3g3S3a2U133d/Image%202017-04-25%20at%2012.46.01%20上午.png" alt="2010-2017年中国互联网广告规模走势图">
<p class="caption">2010-2017年中国互联网广告规模走势图</p>
</div>
<p>据统计，2013 年移动营销市场规模达到155.2 亿元，同比增长翻一番，增长率达105.0%，2014 年第三季度中国移动互联网市场规模为515.6 亿元，同比增长93.4%。移动营销的整体市场增速远远高于网络广告市场增速。智能终端设备的普及、用户数量的不断增加、3G/4G 网络技术的发展以及移动广告平台的不断涌现很大程度上也推动了整体市场的发展。</p>
<h3 id="广告行业产业链上下游风险分析">广告行业产业链上下游风险分析</h3>
<h4 id="上游行业风险分析">上游行业风险分析</h4>
<p>互联网广告营销行业的价值链主要分为四个环节，包括网络广告位提供方、广告交易平台、广告投放商和广告主。广告投放商的供应商主要包括软件、网站、网吧等网络广告位提供方以及广告交易平台，多数广告投放商借助广告交易平台获取网络广告位。</p>
<h4 id="下游行业风险分析">下游行业风险分析</h4>
<p>由于受众关注时间长、广告成本低，互联网广告投入产出比（ROI）已经超越纸媒，至少与电视媒体并驾齐驱。程序化交易具有其独特优势：1）将人工交易变成自动交易，大幅降低广告交易费用，缩短交易时间；2）大数据定位用户需求，向正确的用户投放正确的广告，将购买广告位变成购买特定用户的广告位，大幅提升广告主投入产出比（ROI），有效提高媒体资源价格。</p>
<h1 id="专业分析">专业分析</h1>
<h2 id="其他学校广告专业的特色培养模式分析">其他学校广告专业的特色培养模式分析</h2>
<h3 id="东莞市轻工业学校">东莞市轻工业学校</h3>
<h4 id="专业培养模式简介">专业培养模式简介</h4>
<p>为了研究探索广告设计技能竞赛有效训练模式，培养优秀中职广告设计人才，根据本校学生的具体情况，进行了为时一年半的实际研究，从训练队成员选拔着手，进行一系列方面学习、集训。</p>
<h4 id="特写分析">特写分析</h4>
<p>通过广告设计技能竞赛为目标，进行培养中职广告设计人才训练模式</p>
<h3 id="哈尔滨职业技术学院">哈尔滨职业技术学院</h3>
<h4 id="专业培养模式简介-1">专业培养模式简介</h4>
<p>“订单式”人才培养模式一直是高职院校艺术设计类专业的工作重点和难点。校企合作、订单培养有利于做到专业设置与企业需求相协调、技能训练与岗位要求相协调、培养目标与用人要求相协调。本文以广告设计专业为例，深入研究了“订单式”人才培养模式的现状及现实意义。</p>
<h4 id="特写分析-1">特写分析</h4>
<p>通过校企合作的方式，将学生送去指定的企业实习工作，以达到培养人才的目的。</p>
<h1 id="就业岗位">就业岗位</h1>
<h2 id="毕业生行业发展调查">毕业生行业发展调查</h2>
<h3 id="第一节广告设计专业毕业生在广告设计行业的发展调查分析">第一节：（广告设计）专业毕业生在（广告设计）行业的发展调查分析</h3>
<p>从全国水平看，广告设计专业毕业生薪酬统计显示专业毕业生在广告行业的平均月薪是3821元，到今年第2季度，该行业全国月平均收入达到了4044元，增幅只有6％，这和2015到2016年的增幅8％比较，增幅力度见小。从部门角度分析， 广告部的收入最高，市场和编辑部行其次，从职业方面看，创意人员的薪酬要大大高于行政等后勤部门，上半年两者的平均月薪相差近3000元。对创意人员来说一般的平面设计师起薪在1500-2000元。</p>
<h3 id="第二节广告设计专业毕业生对该行业在校学生的意见与建议">第二节：（广告设计）专业毕业生对该行业在校学生的意见与建议</h3>
<p>要有扎实专业基础，所以在实习之前把专业理论知识和实际操作的能力提升，需要尽早磨合适应实习单位。以后在工作中能够主动地学习和请教别人，遵守公司劳动纪律，出勤率高，与同事相处和睦，能融入团队合作共事。</p>
<h2 id="广告岗位分析">广告岗位分析</h2>
<h3 id="岗位基本信息总体性质工作特征以及主要工作范围">岗位基本信息，总体性质（工作特征以及主要工作范围）</h3>
<ul>
<li>收集各种工作资料，多方面收集设计发展信息，丰富设计思想；</li>
<li>负责广告的创作、设计和制作；</li>
<li>对策划部提供的有关资料和意见加以分析，依照广告计划的要求，配合消费者的心态，完成创意方案；</li>
<li>同各相关部门，制定出整套广告方案，供客户审核，并在客户审核同意后进行制作；</li>
<li>完成各项目、各部门交办的设计工作。</li>
</ul>
<h3 id="从事该岗位的工作活动和程序">从事该岗位的工作活动和程序</h3>
<ul>
<li>分析策划需求，充分理解策划意图，设计和创作项目平面方案，确保设计作品高速优质完成；</li>
<li>全面负责公司的平面设计工作；</li>
<li>根据项目要求负责项目有关的设计与制作；</li>
<li>负责汇总营销活动卖场布局以及宣传资料的设计方案，并存档；</li>
<li>负责公司办公场所平面设计；</li>
<li>负责与印刷厂、制作商充分接洽，确保设计方案的准确实施。</li>
</ul>
<h3 id="岗位的工作条件包括物理环境以及内外软性环境">岗位的工作条件（包括物理环境，以及内外软性环境）</h3>
<p>大部分的工作时间是待在办公室或工作室中，主要的工作配置是电脑。 岗位近期需求、发展趋势 由于近年来手机的的飞速发展，移动端也开始需要各种平面设计，如交互和UI设计，这些现在是紧缺的。</p>
<h3 id="在职人员素质要求在职人员的职业发展路线图">在职人员素质要求，在职人员的职业发展路线图</h3>
<p>思维敏捷，设计思路新颖、清晰。熟练使用各种制图软件如photoshop、Coreldraw、Pagemaker 、Indesign 、llustrator 、AutoCAD等。</p>
<h3 id="获取岗位的途径可以增加面试的准备流程问题注意事项等">获取岗位的途径（可以增加面试的准备、流程、问题、注意事项等）</h3>
<p>人才市场，网上招聘，去相关公司直接面试。带好作品，应聘平面设计类职位时，“有无作品”是招聘官必问的问题。而80%的求职者会回答“没带作品”，或者“简历上有个人主页网址，可以上网站查询”。这样的回答让面试官很不满意。有准备的应聘者应该拿出一本精装的个人设计作品集，给招聘官现场翻阅，让他对自己留下深刻印象，提高成功应聘的概率。</p>
<h2 id="在校生专业学习述求调查">在校生专业学习述求调查</h2>
<h3 id="广告设计专业学生对专业学习的满意度调查及意见采集">（广告设计）专业学生对专业学习的满意度调查及意见采集</h3>
<h4 id="调查结果分析">调查结果分析</h4>
<table>
<thead>
<tr class="header">
<th>年级</th>
<th>总人数</th>
<th>调查人数</th>
<th>满意度</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2016</td>
<td>53人</td>
<td>53人</td>
<td>90.36%</td>
</tr>
<tr class="even">
<td>2017</td>
<td>46人</td>
<td>45人</td>
<td>86.14%</td>
</tr>
</tbody>
</table>
<h4 id="意见采集分析">意见采集分析</h4>
<p>学生一质都认为对广告专业的分析和解决的能力不足，希望教师能在这一方面进行培养</p>
<h4 id="综合评价分析">综合评价分析</h4>
<p>即目前学生最关注的是分析问题，解决问题的能力的培养，而不是教师的板书工整与否。因此要进一步提高教学质量，应先从提高培育学生分析问题，解决问题的能力方面入手，这是最直接也是最有效的方法</p>
<h3 id="广告设计专业学生对专业就业前景的心理预期和就业准备分析">（广告设计）专业学生对专业就业前景的心理预期和就业准备分析</h3>
<h4 id="一.对专业就业前景的心理预期">一.对专业就业前景的心理预期</h4>
<p>与广告业蒸蒸日上的发展情形不相适应的是专业广告人才的缺乏。我国目前的广告从业人员不下20万，但真正受过高等专业教育和系统培训的不到二十分之一，许多广告从业人员都是“半路出家”。所以不必为其紧张，本来就缺乏，再加上自己本身的优势就是专业出身，与大部分其他非科班出身相比有很大优势</p>
<h4 id="二.就业准备分析">二.就业准备分析</h4>
<p>学广告学专业（广告策划和创意一类），专业对口的一般是三个工作方向，一个是媒体，一个是广告公司等，还有一个就是广告主。学广告学专业（广告策划和创意一类），专业对口的一般是三个工作方向，一个是媒体，一个是广告公司等，还有一个就是广告主。在就业做好对各个对口专业的分析，过后在做准备</p>
<h2 id="相关指导者对广告设计专业学生就业发展的意见与建议">相关指导者对（广告设计）专业学生就业发展的意见与建议</h2>
<h3 id="第一节就业指导单位意见与建议">第一节：就业指导单位意见与建议</h3>
<p>企业在招聘时对于职校毕业生的要求往往有如下几点：必须 拥有良好的职业道德素质和身体心理素质，有良好的团队协作精神与沟通能力，吃苦耐劳，乐于奉献，意志坚强；必须具备强烈的事业心和责任感，有较高的政治思想素质和高尚的品德；掌握一定的专业理论知识和实际动手操作的能力。一专多能，它是胜 任本职工作的前提; 同时婴拥有科技创新能力，实践动手能力。具备从事本专业相关的各种能力。</p>
<h3 id="第二节专业老师的意见与建议">第二节：专业老师的意见与建议</h3>
<p>在实习之前把专业理论知识和实际操作的能力提升，学校里的一套和社会上的是有不同的，需要尽早磨合适应。在工作中能够主动地学习和请教别人，遵守公司劳动纪律，出勤率高，与同事相处和睦，能融入团队合作共事。</p>
<h3 id="广告设计行业用人单位的意见与建议">（广告设计）行业用人单位的意见与建议</h3>
<p>需要实习学生工作认真负责，虚心好学，在业务紧迫时加班加点毫无怨言。在工作中能够主动地学习和请教别人，比较仔细认真，能够完成指导老师和领导安排的工作任务。遵守公司劳动纪律，出勤率高，与同事相处和睦，能融入团队合作共事，体现出学校较高的德育和智育水平。</p>
<h1 id="参考文献">参考文献</h1>
<ol style="list-style-type: decimal">
<li>唐·E·舒尔茨,童淑婷,邱宝逸. (2017). 广告的未来及其可能性[J]. 广告大观(理论版),(01):4-13.</li>
<li>杨洪丰. (2016). 中国广告业发展现状. 声屏世界·广告人(6), 118-118.</li>
<li>张金海,黎明. (2011). 国家经济发展战略与中国广告产业发展[J]. 广告大观(理论版),(03):4-10.</li>
<li>杨冬梅. (2010). 网络广告公司盈利模式分析[J]. 中国商界(下半月),(04):199+201.</li>
<li>廖秉宜. (2016). 中国广告监管制度的研究综述[J]. 广告大观(理论版),03:25-33.</li>
<li>廖秉宜. (2015). 大数据时代中国广告产业的发展研究. 广告大观:理论版(6).</li>
<li>金俊佶, &amp; 田智恒. (2017). “互联网+”下的广告产业发展研究. 新闻研究导刊(1), 259-261.</li>
<li>阮京文. (2013). 网络广告行业日新月异,广告产业链日趋完善. 广告大观:综合版(4).</li>
<li>唐艳芳. (2016). RTB网络广告产业链价值分配研究. 商(18), 207-207.</li>
<li>陈瑛, &amp; 肖剑波. (2011). 新媒体环境下广告产业链的构建思考. 科技资讯(35), 227-227.</li>
<li>唐睿曼. (2016). 中国广告行业发展现状及未来发展趋势探讨. 商业故事(20).</li>
<li>杨冬梅. (2010). 网络广告公司盈利模式分析[J]. 中国商界(下半月),(04):199+201.</li>
<li>张琪. (2012). 移动广告联盟客户细分研究. (Doctoral dissertation, 哈尔滨理工大学).</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Others </category>
            
        </categories>
        
        
    </entry>
    
    <entry>
      <title><![CDATA[实验 1 Cache 替换策略设计与分析]]></title>
      <url>https://qingfeng14.github.io/2017/04/23/%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/CRC_report/</url>
      <content type="html"><![CDATA[<h1 id="实验目的">实验目的</h1>
<ul>
<li>深入理解各种不同的 Cache 替换策略</li>
<li>理解学习不同替换策略对程序运行性能的影响</li>
<li>动手实现自己的 Cache 替换策略</li>
</ul>
<a id="more"></a>
<h1 id="实验要求">实验要求</h1>
<ul>
<li>理解学习 LRU 及其它已经提出的 Cache 替换策略</li>
<li>在提供的模拟器上实现自己设计的 Cache 替换策略</li>
<li>通过 benchmark 测试比较不同的 Cache 替换策略</li>
<li>在实验报告中简要说明不同 Cache 替换策略的核心思想和算法</li>
<li>在实验报告中说明自己是怎样对不同的 Cache 替换策略进行测试的</li>
<li>在实验报告中分析不同替换策略下，程序的运行时间、Cache 命中率受到的影响</li>
</ul>
<h1 id="已有替换策略分析">已有替换策略分析</h1>
<p>常见的Cache替换策略有LRU，FIFO, LFU等，本次实验基于MK Qureshi于2007年的Adaptive insertion policies for high performance caching一文提出的LRU Insertion Policy算法进行的实现。</p>
<p>在该文中，作者指出，当程序重用工作集大于可用Cache时或者其存储访问具有低局部相关性时，Cache替换策略中最常用的LRU策略表现出十分低下的命中率。大量新替换入Cache的行对命中率的贡献为零，而原本可能命中的行则由于长期不被访问而替换出Cache。针对这种情况，该文提出了以下一些改进策略：</p>
<ul>
<li>LRU Insertion Policy (LIP) 。该策略将所有替换入Cache的行置于LRU端。相对于传统策略将所有替换入的行置于MRU端，LIP使一部分行得以驻留于Cache中，其驻留时间能比Cache本身容量更长。LIP策略能够很好地应对Thrashing，尤其对于循环访问内存的程序其性能近似于OPT策略。</li>
<li>Bimodal Insertion Policy (BIP)。BIP策略是对LIP的加强和改进，新换入的行会小概率地被置于MRU端。BIP可以很好地响应Working Set的切换，并保持一定的命中率。</li>
<li>Dynamic Insertion Policy (DIP) 能动态地在LRU和BIP间切换，选择其中命中率较高的策略执行后续指令。DIP对于LRU-friendly的程序块使用LRU策略，对于LRU-averse的程序块使用DIP策略，以求通用效率。对于1MB16路L2 Cache，DIP策略较LRU降低21%的失配率。</li>
</ul>
<p>LIP和BIP两种策略对于LRU-friendly（高局部性）的程序，性能均不佳。</p>
<h1 id="我实现的替换策略">我实现的替换策略</h1>
<p>考虑到实现难度，本次实验我实现了MK Qureshi提出的三个算法中的第一个LIP算法，具体的实现为：</p>
<ul>
<li>当访存命中时，将命中的Cache块放到对应栈的LRU端，其他块依次移位</li>
<li>当Cache缺失时，替换策略与LRU一致，这时需要将新换入的Cache块放到对应栈的MRU端</li>
</ul>
<h2 id="具体实现">具体实现</h2>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 这个函数是根据实现的Cache替换策略函数                                         </span></div><div class="line">INT32  CACHE_REPLACEMENT_STATE::Get_LIP_Victim( UINT32 setIndex )&#123;</div><div class="line">    <span class="comment">// Get pointer to replacement state of current set</span></div><div class="line">    LINE_REPLACEMENT_STATE *replSet = repl[ setIndex ];</div><div class="line"></div><div class="line">    INT32   lipWay   = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="comment">// Search for victim whose stack position is assoc-1</span></div><div class="line">    <span class="comment">// 被替换的块策略与LRU一致，选择栈底被替换出去</span></div><div class="line">    <span class="keyword">for</span>(UINT32 way=<span class="number">0</span>; way&lt;assoc; way++) </div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span>( replSet[way].LRUstackposition == (assoc<span class="number">-1</span>) ) </div><div class="line">        &#123;</div><div class="line">            lipWay = way;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// return lru way</span></div><div class="line">    <span class="keyword">return</span> lipWay;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// This function implements the LIP update routine for the traditional        //</span></div><div class="line"><span class="comment">// LIP replacement policy. The arguments to the function are the physical     //</span></div><div class="line"><span class="comment">// way and set index.                                                         </span></div><div class="line"><span class="keyword">void</span> CACHE_REPLACEMENT_STATE::UpdateLIP( UINT32 setIndex, INT32 updateWayID, <span class="keyword">bool</span> cacheHit )</div><div class="line">&#123;</div><div class="line">    <span class="comment">// Determine current LRU stack position</span></div><div class="line">    UINT32 currLRUstackposition = repl[ setIndex ][ updateWayID ].LRUstackposition;</div><div class="line"></div><div class="line">    <span class="comment">// 如果hit</span></div><div class="line">    <span class="comment">// Update the stack position of all lines before the current line</span></div><div class="line">    <span class="comment">// Update implies incremeting their stack positions by one</span></div><div class="line">    <span class="keyword">if</span> (cacheHit) &#123;</div><div class="line">        <span class="keyword">for</span>(UINT32 way=<span class="number">0</span>; way&lt;assoc; way++) </div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span>( repl[setIndex][way].LRUstackposition &lt; currLRUstackposition ) </div><div class="line">            &#123;</div><div class="line">                repl[setIndex][way].LRUstackposition++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// Set the LRU stack position of new line to be zero</span></div><div class="line">        repl[ setIndex ][ updateWayID ].LRUstackposition = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// Cache缺失时, 把新换入的Cache的行置于LRU端</span></div><div class="line">        repl[ setIndex ][ updateWayID ].LRUstackposition = assoc - <span class="number">1</span>;</div><div class="line">    &#125;   </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="替换策略测试">替换策略测试</h1>
<h2 id="测试方法">测试方法</h2>
<p>本次实验中将29个测试程序分别采用LRU,LIP算法进行了测试，测试时的Cache设置为 <code>UL3:1024:64:16</code></p>
<p>即</p>
<ul>
<li>实验在第3级Cache上进行，统一存储指令和数据，</li>
<li>Cache 大小为 1024KB</li>
<li>Cache 行大小为 64B</li>
<li>16路组相连</li>
</ul>
<p>在测试时我利用shell脚本自带的<code>time</code>命令输出其运行时间(取real time结果)以此代表程序运行时间，此外，我还采用了CPI,缺失率作为其评价指标</p>
<h2 id="分析不同替换策略下程序的运行时间cache-命中率受到的影响">分析不同替换策略下，程序的运行时间、Cache 命中率受到的影响</h2>
<table style="width:96%;">
<colgroup>
<col width="8%">
<col width="12%">
<col width="8%">
<col width="8%">
<col width="12%">
<col width="8%">
<col width="8%">
<col width="12%">
<col width="8%">
<col width="8%">
</colgroup>
<thead>
<tr class="header">
<th align="right"><strong>程序</strong></th>
<th align="right"><strong>LRU_time</strong></th>
<th align="right"><strong>LIP_time</strong></th>
<th align="right"><strong>less_time</strong></th>
<th align="right"><strong>LRU_CPI</strong></th>
<th align="right"><strong>LIP_CPI</strong></th>
<th align="right"><strong>Less_cpi</strong></th>
<th align="right"><strong>LRU_miss</strong></th>
<th align="right"><strong>LIP_miss</strong></th>
<th align="right"><strong>less miss</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">perlbench</td>
<td align="right">17.070</td>
<td align="right">16.420</td>
<td align="right">LIP</td>
<td align="right">0.642823</td>
<td align="right">0.669326</td>
<td align="right">LRU</td>
<td align="right">40.7952</td>
<td align="right">44.9668</td>
<td align="right">LRU</td>
</tr>
<tr class="even">
<td align="right">bzip2</td>
<td align="right">123.840</td>
<td align="right">120.870</td>
<td align="right">LIP</td>
<td align="right">0.554642</td>
<td align="right">0.571873</td>
<td align="right">LRU</td>
<td align="right">61.7369</td>
<td align="right">55.3261</td>
<td align="right">LIP</td>
</tr>
<tr class="odd">
<td align="right">gcc</td>
<td align="right">134.380</td>
<td align="right">130.780</td>
<td align="right">LIP</td>
<td align="right">0.614864</td>
<td align="right">0.575939</td>
<td align="right">LIP</td>
<td align="right">42.7521</td>
<td align="right">38.5965</td>
<td align="right">LIP</td>
</tr>
<tr class="even">
<td align="right">bwaves</td>
<td align="right">118.230</td>
<td align="right">117.520</td>
<td align="right">LIP</td>
<td align="right">0.253088</td>
<td align="right">0.253088</td>
<td align="right">=</td>
<td align="right">99.6634</td>
<td align="right">99.6634</td>
<td align="right">=</td>
</tr>
<tr class="odd">
<td align="right">gamess</td>
<td align="right">133.080</td>
<td align="right">135.110</td>
<td align="right">LRU</td>
<td align="right">0.30022</td>
<td align="right">0.312251</td>
<td align="right">LRU</td>
<td align="right">26.3204</td>
<td align="right">92.0923</td>
<td align="right">LRU</td>
</tr>
<tr class="even">
<td align="right">mcf</td>
<td align="right">163.610</td>
<td align="right">153.580</td>
<td align="right">LIP</td>
<td align="right">2.55358</td>
<td align="right">2.04087</td>
<td align="right">LIP</td>
<td align="right">75.676</td>
<td align="right">59.7033</td>
<td align="right">LIP</td>
</tr>
<tr class="odd">
<td align="right">milc</td>
<td align="right">148.670</td>
<td align="right">144.780</td>
<td align="right">LIP</td>
<td align="right">1.14939</td>
<td align="right">1.1807</td>
<td align="right">LRU</td>
<td align="right">77.0164</td>
<td align="right">79.3471</td>
<td align="right">LRU</td>
</tr>
<tr class="even">
<td align="right">zeusmp</td>
<td align="right">148.800</td>
<td align="right">133.400</td>
<td align="right">LIP</td>
<td align="right">0.451633</td>
<td align="right">0.452046</td>
<td align="right">LRU</td>
<td align="right">80.81</td>
<td align="right">82.492</td>
<td align="right">LRU</td>
</tr>
<tr class="odd">
<td align="right">gromacs</td>
<td align="right">143.230</td>
<td align="right">153.090</td>
<td align="right">LRU</td>
<td align="right">0.607769</td>
<td align="right">0.664129</td>
<td align="right">LRU</td>
<td align="right">71.1979</td>
<td align="right">89.1534</td>
<td align="right">LRU</td>
</tr>
<tr class="even">
<td align="right">cactusADM</td>
<td align="right">133.370</td>
<td align="right">130.880</td>
<td align="right">LIP</td>
<td align="right">0.44249</td>
<td align="right">0.378492</td>
<td align="right">LIP</td>
<td align="right">76.1164</td>
<td align="right">63.7024</td>
<td align="right">LIP</td>
</tr>
<tr class="odd">
<td align="right">leslie3d</td>
<td align="right">133.210</td>
<td align="right">133.850</td>
<td align="right">LRU</td>
<td align="right">1.50626</td>
<td align="right">1.4344</td>
<td align="right">LIP</td>
<td align="right">84.0284</td>
<td align="right">79.7774</td>
<td align="right">LIP</td>
</tr>
<tr class="even">
<td align="right">namd</td>
<td align="right">112.000</td>
<td align="right">111.370</td>
<td align="right">LIP</td>
<td align="right">0.273795</td>
<td align="right">0.273797</td>
<td align="right">LRU</td>
<td align="right">66.2603</td>
<td align="right">66.2661</td>
<td align="right">LRU</td>
</tr>
<tr class="odd">
<td align="right">gobmk</td>
<td align="right">127.020</td>
<td align="right">127.540</td>
<td align="right">LRU</td>
<td align="right">0.383876</td>
<td align="right">0.388093</td>
<td align="right">LRU</td>
<td align="right">14.919</td>
<td align="right">15.5215</td>
<td align="right">LRU</td>
</tr>
<tr class="even">
<td align="right">dealII</td>
<td align="right">130.630</td>
<td align="right">131.960</td>
<td align="right">LRU</td>
<td align="right">0.463916</td>
<td align="right">0.446134</td>
<td align="right">LIP</td>
<td align="right">45.0892</td>
<td align="right">47.2678</td>
<td align="right">LRU</td>
</tr>
<tr class="odd">
<td align="right">soplex</td>
<td align="right">72.310</td>
<td align="right">75.080</td>
<td align="right">LRU</td>
<td align="right">0.356909</td>
<td align="right">0.431378</td>
<td align="right">LRU</td>
<td align="right">15.2011</td>
<td align="right">35.9993</td>
<td align="right">LRU</td>
</tr>
<tr class="even">
<td align="right">povray</td>
<td align="right">134.860</td>
<td align="right">134.040</td>
<td align="right">LIP</td>
<td align="right">0.360431</td>
<td align="right">0.360387</td>
<td align="right">LIP</td>
<td align="right">39.9258</td>
<td align="right">39.7901</td>
<td align="right">LIP</td>
</tr>
<tr class="odd">
<td align="right">calculix</td>
<td align="right">130.460</td>
<td align="right">127.370</td>
<td align="right">LIP</td>
<td align="right">0.321346</td>
<td align="right">0.359601</td>
<td align="right">LRU</td>
<td align="right">34.05</td>
<td align="right">53.1214</td>
<td align="right">LRU</td>
</tr>
<tr class="even">
<td align="right">hmmer</td>
<td align="right">133.820</td>
<td align="right">135.260</td>
<td align="right">LRU</td>
<td align="right">0.258513</td>
<td align="right">0.258513</td>
<td align="right">=</td>
<td align="right">71.4736</td>
<td align="right">71.4868</td>
<td align="right">LRU</td>
</tr>
<tr class="odd">
<td align="right">sjeng</td>
<td align="right">129.020</td>
<td align="right">134.210</td>
<td align="right">LRU</td>
<td align="right">0.323006</td>
<td align="right">0.322841</td>
<td align="right">LIP</td>
<td align="right">93.5415</td>
<td align="right">93.3249</td>
<td align="right">LIP</td>
</tr>
<tr class="even">
<td align="right">GemsFDTD</td>
<td align="right">153.820</td>
<td align="right">171.260</td>
<td align="right">LRU</td>
<td align="right">0.368143</td>
<td align="right">0.368143</td>
<td align="right">=</td>
<td align="right">84.1525</td>
<td align="right">84.1525</td>
<td align="right">=</td>
</tr>
<tr class="odd">
<td align="right">libquantum</td>
<td align="right">147.090</td>
<td align="right">132.630</td>
<td align="right">LIP</td>
<td align="right">0.272749</td>
<td align="right">0.272749</td>
<td align="right">=</td>
<td align="right">100.0</td>
<td align="right">100.0</td>
<td align="right">=</td>
</tr>
<tr class="even">
<td align="right">h264ref</td>
<td align="right">137.550</td>
<td align="right">129.450</td>
<td align="right">LIP</td>
<td align="right">0.28787</td>
<td align="right">0.292871</td>
<td align="right">LRU</td>
<td align="right">70.0086</td>
<td align="right">72.4714</td>
<td align="right">LRU</td>
</tr>
<tr class="odd">
<td align="right">tonto</td>
<td align="right">122.590</td>
<td align="right">122.090</td>
<td align="right">LIP</td>
<td align="right">0.347856</td>
<td align="right">0.34803</td>
<td align="right">LRU</td>
<td align="right">78.8694</td>
<td align="right">79.2837</td>
<td align="right">LRU</td>
</tr>
<tr class="even">
<td align="right">lbm</td>
<td align="right">175.980</td>
<td align="right">175.560</td>
<td align="right">LIP</td>
<td align="right">1.15379</td>
<td align="right">1.15439</td>
<td align="right">LRU</td>
<td align="right">99.9725</td>
<td align="right">99.7331</td>
<td align="right">LIP</td>
</tr>
<tr class="odd">
<td align="right">omnetpp</td>
<td align="right">156.400</td>
<td align="right">150.580</td>
<td align="right">LIP</td>
<td align="right">0.41278</td>
<td align="right">0.412729</td>
<td align="right">LIP</td>
<td align="right">59.4443</td>
<td align="right">59.2859</td>
<td align="right">LIP</td>
</tr>
<tr class="even">
<td align="right">astar</td>
<td align="right">161.890</td>
<td align="right">152.050</td>
<td align="right">LIP</td>
<td align="right">0.267647</td>
<td align="right">0.267647</td>
<td align="right">=</td>
<td align="right">5.84718</td>
<td align="right">5.84718</td>
<td align="right">=</td>
</tr>
<tr class="odd">
<td align="right">sphinx3</td>
<td align="right">148.620</td>
<td align="right">145.960</td>
<td align="right">LIP</td>
<td align="right">0.445644</td>
<td align="right">0.445645</td>
<td align="right">LRU</td>
<td align="right">97.156</td>
<td align="right">97.1648</td>
<td align="right">LRU</td>
</tr>
<tr class="even">
<td align="right">xalancbmk</td>
<td align="right">163.490</td>
<td align="right">155.190</td>
<td align="right">LIP</td>
<td align="right">0.414993</td>
<td align="right">0.411322</td>
<td align="right">LIP</td>
<td align="right">66.2759</td>
<td align="right">63.1589</td>
<td align="right">LIP</td>
</tr>
<tr class="odd">
<td align="right">specrand</td>
<td align="right">90.180</td>
<td align="right">89.100</td>
<td align="right">LIP</td>
<td align="right">0.336211</td>
<td align="right">0.336348</td>
<td align="right">LRU</td>
<td align="right">95.9373</td>
<td align="right">97.6647</td>
<td align="right">LRU</td>
</tr>
</tbody>
</table>
<h3 id="两种算法表现统计">两种算法表现统计</h3>
<p>CPI值: LRU算法15次更小, LIP算法9次更小</p>
<p>运行时间:LRU算法9次更小, LIP算法20次更小</p>
<p>缺失率: LRU算法15次更小, LIP算法10次更小</p>
<h3 id="结果分析">结果分析</h3>
<p>由统计结果分析，大概一半的测试程序中，LRU的算法的缺失率和CPI指标比LIP算法更优，但是仍然有不少测试样例显示LIP算法表现更好，而这些程序即是前文所说的局部相关性不是特别高的情况，而LIP算法的运行时间明显更优。</p>
<p>由此可以分析，通常来说，程序的局部性更强时LRU算法表现会比较好，当程序的局部性表现有较大波动时，LIP一类改进算法会表现更好（即缺失率会降低），实际上，DIP算法的动态调节表现应该是最好的，不过出于实现难度本次实验没有进行实现。</p>
<h1 id="附件">附件：</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">## 算法文件</div><div class="line">replacement_state.cpp</div><div class="line">replacement_state.h</div><div class="line"></div><div class="line">## 实验数据</div><div class="line">results/</div><div class="line">├── get_time.py                 // 通过运行数据提取运行结果表格记录</div><div class="line">├── log_all.txt                 // 分别使用LRU算法和LIP算法运行29个测试程序的输出结果</div><div class="line">├── name.txt</div><div class="line">├── run.sh                      // 运行脚本，在CRC/项目根目录下运行即可</div><div class="line">├── runs                        // 解压后的测试结果</div><div class="line">│   ├── LIP_GemsFDTD.stats</div><div class="line">│   ├── LIP_astar.stats</div><div class="line">│   ├── LIP_bwaves.stats</div><div class="line">│   ├── LIP_bzip2.stats</div><div class="line">|   ......</div><div class="line">|</div><div class="line">└── time_log.txt                // 每个程序的运行时间记录</div><div class="line">----</div></pre></td></tr></table></figure>
<h1 id="参考文献">参考文献</h1>
<p>[1] Moinuddin K. Qureshi , Aamer Jaleel , Yale N. Patt , Simon C. Steely , Joel Emer, Adaptive insertion policies for high performance caching, Proceedings of the 34th annual international symposium on Computer architecture(ISCA), June 09-13, 2007, San Diego, California, USA</p>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[lec16_exe]]></title>
      <url>https://qingfeng14.github.io/2017/04/22/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/lec16-exe/</url>
      <content type="html"><![CDATA[<h1 id="请描述stride调度算法的目标思路和算法设计要求写出伪代码并分析stride调度算法只采用整数运算是如何避免stride计算溢出问题的">请描述stride调度算法的目标，思路和算法设计（要求写出伪代码），并分析stride调度算法只采用整数运算是如何避免stride计算溢出问题的。</h1>
<a id="more"></a>
<h2 id="目标">目标</h2>
<p>在round-robin调度算法的基础上，希望调度器能更智能地为每个进程分配合理的CPU资源，假设我们为不同的进程分配不同的优先级，则我们有可能希望每个进程得到的时间资源与他们的优先级成正比关系</p>
<h2 id="思路">思路</h2>
<p>1、为每个runnable的进程设置一个当前状态stride，表示该进程当前的调度权。另外定义其对应的pass值，表示对应进程在调度后，stride 需要进行的累加值，该pass值只与进程的优先级有关</p>
<p>2、每次需要调度时，从当前 runnable 态的进程中选择 stride最小的进程调度。对于获得调度的进程P，将对应的stride加上其对应的步长pass</p>
<p>3、在一段固定的时间之后，回到 2.步骤，重新调度当前stride最小的进程。</p>
<h2 id="算法设计">算法设计</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">init()                  // 初始化队列，proc[<span class="string">'stride'</span>]=<span class="number">0</span>, proc[<span class="string">'pass'</span>] = BIG_STRIDE/proc[<span class="string">'priority'</span>]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">schedule</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        <span class="keyword">if</span> runnable_list <span class="keyword">is</span> null:</div><div class="line">            <span class="keyword">continue</span>          <span class="comment"># 就绪队列为空， 等待就绪队列</span></div><div class="line">        cur_run = get_proc_min_stride(runnable_list) <span class="comment"># 选取stride值最小的进程</span></div><div class="line">        cur_run[<span class="string">'stride'</span>] += cur_run[<span class="string">'pass'</span>]         <span class="comment">#被选中队列的stride值+步长pass</span></div><div class="line">        cur_run[<span class="string">'time_slice'</span>] = time_slice      <span class="comment"># 分配时间片</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">proc_tick</span><span class="params">()</span>:</span></div><div class="line">    <span class="comment"># 时钟</span></div><div class="line">    <span class="keyword">if</span> cur_run[<span class="string">'run_time'</span>] &gt;= cur_run[<span class="string">'running_time'</span>]:</div><div class="line">        <span class="comment"># 进程运行完毕</span></div><div class="line">        do_exit(cur_run)</div><div class="line">        schedule()</div><div class="line">    <span class="keyword">if</span> cur_run[<span class="string">'time_slice'</span>] == <span class="number">0</span>:</div><div class="line">        <span class="comment"># 时间片用完，准备调度</span></div><div class="line">        cur_run[<span class="string">'need_sche'</span>] = <span class="number">1</span></div><div class="line">        schedule()</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        cur_run[<span class="string">'time_slice'</span>] -= <span class="number">1</span></div><div class="line"></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    proc_tick()</div><div class="line">    sleep(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h2 id="分析stride调度算法只采用整数运算是如何避免stride计算溢出问题的">分析stride调度算法只采用整数运算是如何避免stride计算溢出问题的。</h2>
<p>stride 算法是通过无符号数的有符号比较来解决溢出问题的，其最终的比较是通过将两个待比较的stride相减，结果以带符号整数形式进行比较。</p>
<p>在stride算法中，步长值设置为 <code>P-&gt;pass = BIG_STRIDE / P-&gt;priority</code>, 这样可以使进程的步长只与优先级相关，同时，这个设定使得每次进程的stride值得增量都不会超过<code>BIG_STRIDE</code>, 其中，<code>BIG_STRIDE</code>值是一个预先设定的大常数，这个大常数的设置是保证stride算法即使在溢出时仍然能够得到正确运行结果的关键。</p>
<p>设进程A、B的stride值分别为a、b， 假设一开始a=b,设进程B先被调度执行，此时b增加B_pass：</p>
<ul>
<li><p>如果此时B的stride值未溢出，那么自然有signed(a-(b+B_pass))&lt;0,下一次轮到A被调度执行，a增加</p></li>
<li><p>如果此时B的stride值溢出，以32位整数为例，则有<span class="math inline">\(b+B\_pass\ge2^{32}\)</span>,溢出后的实际值会是<span class="math inline">\(b&#39; = b+B\_pass - 2^{32}\)</span>, 此时为保证仍能正确运行，需要保证<span class="math inline">\(signed(a-b) \le 0\)</span>,则需要<span class="math inline">\(A\ge b + B\_pass -2^{32} + 2^{31} = b+BIG\_STRIDE-2^{31}\)</span>, 从而需要保证<code>BIG_STRIDE ＜ 2^31</code>,亦即<code>BIG_STRIDE</code>需要设置为最大的有符号整数值。</p></li>
</ul>
<p>基于这种特殊的考虑，才能使得即使stride有可能溢出，仍能得到理论上的当前最小stride。</p>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 作业 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Lec15练习]]></title>
      <url>https://qingfeng14.github.io/2017/04/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Lec15%E7%BB%83%E4%B9%A0/</url>
      <content type="html"><![CDATA[<h1 id="请证明短进程优先算法具有最小平均周转时间">请证明短进程优先算法具有最小平均周转时间。</h1>
<a id="more"></a>
<h2 id="证明">证明：</h2>
<p>设一组就绪进程 <span class="math inline">\(\{p_1, p_2,...p_n\}\)</span>, 其运行时间依次对应为 <span class="math inline">\(\{r_1, r_2,...,r_n\}\)</span>, 且<span class="math inline">\(\forall i \le j, r_i \le r_j\)</span></p>
<p>则按照短进程优先原则，其平均周转时间为：</p>
<p><span class="math display">\[avg_r = \frac{r_1 + (r_1 + r_2) + ... + (r_1 +...+r_n)}{n} = \frac{\sum _{i=1}^{n}{(n-i+1)r_i}}{n}\]</span></p>
<p>即需要证明上述排列方式计算的<span class="math inline">\(avg_r\)</span>最小，采用反证法，假设存在一个进程运行顺序使得其平均周转时间更小，为简单起见，不妨设，任意交换原序列中两个进程m,n，即序列变为<span class="math inline">\(\{p_1, p_2,...,p_n,...,p_m,...,p_n\}\)</span>则其平均周转时间为：</p>
<span class="math display">\[\begin{align}
avg_r &amp;= \frac{r_1 +(r_1 + r_2) +...(r_1 +...+r_{m-1}+r_n)+(r_1 +...+r_{m-1}+r_n + r_{m+1}) +... }{n} \\
 &amp; = \frac{\sum _{i=1}^{n}{(n-i+1) \cdot r_i} + (m-n)\cdot(r_m - r_n)}{n} \\
 &amp; \ge \frac{\sum _{i=1}^{n}{(n-i+1)r_i}}{n}
\end{align}\]</span>
<p>得证。</p>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 作业 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[图片搜索实验]]></title>
      <url>https://qingfeng14.github.io/2017/04/19/%E5%9B%BE%E7%89%87%E6%90%9C%E7%B4%A2%E5%AE%9E%E9%AA%8C/</url>
      <content type="html"><![CDATA[<h1 id="基本任务">基本任务</h1>
<a id="more"></a>
<h2 id="查找资料跑通流程">查找资料，跑通流程</h2>
<p>【部署方法】</p>
<p>– 使用MyEclipse导入该工程，运行ImageIndexer建立索引 – 下载安装Tomcat，在MyEclipse中配置Tomcat（参考<a href="http://www.cnblogs.com/hateislove214/archive/2010/11/23/1885182.html" class="uri" target="_blank" rel="external">http://www.cnblogs.com/hateislove214/archive/2010/11/23/1885182.html</a>） - 运行工程中的ImageIndexer.java,生成forIndex索引，将该文件夹放入Tomcat的bin/ 目录下，有时可能需要放在MyEclipse的安装目录下 – 将图片资料放在Tomcat的/webapps/ROOT/picture/目录下 – 在MyEclipse中部署工程，启动Tomcat Server – 访问 http://localhost:8080/ImageSearch/imagesearch.jsp 即可进行搜索显示</p>
<p>如下图所示：</p>
<div class="figure">
<img src="https://d2ppvlu71ri8gs.cloudfront.net/items/2X3W0G2S1R33312o1k2s/Image%202017-04-19%20at%207.15.25%20下午.png">

</div>
<h2 id="根据simple实现的lucene评分核心类了解lucene评分架构在simplescorer.java中实现bm25模型算法实现很简单">根据Simple实现的Lucene评分核心类，了解Lucene评分架构，在SimpleScorer.java中实现BM25模型算法（实现很简单）</h2>
<p>给定一个查询 Q,包含了关键词 <span class="math inline">\(q_1, ..., q_n\)</span>, 利用<a href="https://en.wikipedia.org/wiki/Okapi_BM25" target="_blank" rel="external">BM25算法</a>计算出的文档D的得分为:</p>
<p><span class="math display">\[{\text{score}}(D,Q)=\sum _{i=1}^{n}{\text{IDF}}(q_{i})\cdot {\frac {f(q_{i},D)\cdot (k_{1}+1)}{f(q_{i},D)+k_{1}\cdot \left(1-b+b\cdot {\frac {|D|}{\text{avgdl}}}\right)}}\]</span></p>
<p>其中：</p>
<ul>
<li><span class="math inline">\(f(q_i, D)\)</span> 表示关键词<span class="math inline">\(q_i\)</span>在文档D中的频率</li>
<li>|D| 是文档D的长度</li>
<li>avgdl 是平均文档长度</li>
<li><span class="math inline">\(k_1\)</span> 和 b 是调节因子, 通常<span class="math inline">\(k_1 \in [1.2,2.0]\)</span> , b = 0.75 （本实验中<span class="math inline">\(k_i = 2.0\)</span>）</li>
<li><span class="math inline">\(IDF(q_i)\)</span> 是查询词<span class="math inline">\(q_i\)</span>的IDF (inverse document frequency) 权重，是根据每个关键词在所有文档中出现的次数多少对该关键词的一个调整,其计算方式为：<span class="math display">\[\text{IDF}(q_i) = \log \frac{N - n(q_i) + 0.5}{n(q_i) + 0.5}\]</span> 其中N代表文档总数，<span class="math inline">\(n(q_i)\)</span>是包含该关键词的文档个数</li>
</ul>
<p>查阅Lucene可知，norm的计算为<code>lengthNorm = 1.0 / Math.sqrt(numTerms)</code></p>
<h2 id="利用lucene提供的评分核心类实现vsm模型并与bm25进行对比">利用Lucene提供的评分核心类实现VSM模型，并与BM25进行对比</h2>
<h1 id="扩展任务">扩展任务</h1>
<h2 id="基于语料库所提供的图片所在网页内容对图片描述文本进行扩充实现基于图片描述文本的图像检索">基于语料库所提供的图片所在网页内容，对图片描述文本进行扩充，实现基于图片描述文本的图像检索</h2>
<h2 id="基于bm25模型实现对于查询词的分词检索参考lucene的multitermquery对应的核心评分类实现也可参考网上的开源代码最终大作业时需要">基于BM25模型实现对于查询词的分词检索（参考Lucene的MultiTermQuery对应的核心评分类实现，也可参考网上的开源代码，最终大作业时需要）</h2>
]]></content>
      
        <categories>
            
            <category> 搜索引擎 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 搜索引擎 </tag>
            
            <tag> 课程 </tag>
            
            <tag> 实验 </tag>
            
            <tag> 图片搜索 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Lec13_Lec14]]></title>
      <url>https://qingfeng14.github.io/2017/04/14/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Lec13-Lec14/</url>
      <content type="html"><![CDATA[<p>(spoc) 理解用户进程的生命周期。</p>
<a id="more"></a>
<h3 id="练习用的lab5-spoc-exercise-project-source-code">练习用的<a href="https://github.com/chyyuu/ucore_lab/tree/master/related_info/lab5/lab5-spoc-discuss" target="_blank" rel="external">lab5 spoc exercise project source code</a></h3>
<h4 id="掌握知识点">掌握知识点</h4>
<ol style="list-style-type: decimal">
<li>用户进程的启动、运行、就绪、等待、退出</li>
<li>用户进程的管理与简单调度</li>
<li>用户进程的上下文切换过程</li>
<li>用户进程的特权级切换过程</li>
<li>用户进程的创建过程并完成资源占用</li>
<li>用户进程的退出过程并完成资源回收</li>
</ol>
<blockquote>
<p>注意，请关注：内核如何创建用户进程的？用户进程是如何在用户态开始执行的？用户态的堆栈是保存在哪里的？</p>
</blockquote>
<p>阅读代码，在现有基础上再增加一个用户进程A，并通过增加cprintf函数到ucore代码中， 能够把个人思考题和上述知识点中的内容展示出来：即在ucore运行过程中通过<code>cprintf</code>函数来完整地展现出来进程A相关的动态执行和内部数据/状态变化的细节。(越全面细致越好)</p>
<p>请完成如下练习，完成代码填写，并形成spoc练习报告</p>
<h2 id="内核如何创建用户进程的">内核如何创建用户进程的?</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">内核会先新建一个内核线程，然后将用户进程信息（数据，代码）导入新建的内核线程</div><div class="line">然后将用户进程的context， trap_frame信息设置好（执行地址等信息）</div><div class="line">然后通过forkret从内核态转向用户态，将用户进程放入进程队列中（就绪态），进行进程调度。</div></pre></td></tr></table></figure>
<h2 id="用户进程是如何在用户态开始执行的">用户进程是如何在用户态开始执行的</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">通过进程上下文切换switch_to和特权级转换load_esp0完成信息切换，并且设置好其trapframe, 在进程创建完成之后，通过iret切换到用户态进行执行</div></pre></td></tr></table></figure>
<h2 id="用户态的堆栈是保存在哪里的">用户态的堆栈是保存在哪里的？</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">用户态的堆栈是保存在进程的mm结构里。</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 作业 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[安卓开发记录]]></title>
      <url>https://qingfeng14.github.io/2017/04/12/%E5%AE%89%E5%8D%93%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/</url>
      <content type="html"><![CDATA[<h1 id="安卓中用户权限设置">安卓中用户权限设置</h1>
<a id="more"></a>
<p>位置：<code>AndroidManifest.xml</code> 在package之后， Application 之前</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--用户权限--&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span></div><div class="line"><span class="comment">&lt;!--VPN 权限--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.BIND_VPN_SERVICE"</span> /&gt;</span></div></pre></td></tr></table></figure>
<h1 id="android中intent机制">Android中Intent机制</h1>
<h2 id="作用">作用</h2>
<ul>
<li>启动 Activity： Activity 表示应用中的一个屏幕。通过将 Intent 传递给 startActivity()，您可以启动新的 Activity 实例。Intent 描述了要启动的 Activity，并携带了任何必要的数据。 如果您希望在 Activity 完成后收到结果，请调用 startActivityForResult()。在 Activity 的 onActivityResult() 回调中，您的 Activity 将结果作为单独的 Intent 对象接收。如需了解详细信息，请参阅 Activity 指南。</li>
<li>启动服务： Service 是一个不使用用户界面而在后台执行操作的组件。通过将 Intent 传递给 startService()，您可以启动服务执行一次性操作（例如，下载文件）。Intent 描述了要启动的服务，并携带了任何必要的数据。 如果服务旨在使用客户端-服务器接口，则通过将 Intent 传递给 bindService()，您可以从其他组件绑定到此服务。如需了解详细信息，请参阅服务指南。</li>
<li>传递广播： 广播是任何应用均可接收的消息。系统将针对系统事件（例如：系统启动或设备开始充电时）传递各种广播。通过将 Intent 传递给 sendBroadcast()、sendOrderedBroadcast() 或 sendStickyBroadcast()，您可以将广播传递给其他应用。</li>
</ul>
<h2 id="intent-结构">Intent 结构</h2>
<ul>
<li>action – 想要实施的动作，例: ACTION_VIEW, ACTION_EDIT, ACTION_MAIN, etc.</li>
<li>data – 具体的数据，一般由以Uri表示，例：通讯录中的某条记录，会以Uri来表示</li>
<li>category – 为实施的动作添加的额外信息，即Intent组件的种类信息，一个Intent对象可以有任意个category，例：CATEGORY_LAUNCHER 意味着，它应该在启动器中作为顶级应用而存在</li>
<li>type – 显示指定Intent的数据类型（MIME类型 - 多用途互联网邮件扩展，Multipurpose Internet Mail Extensions），例：一个组件是可以显示图片数据的而不能播放声音文件。很多情况下，data类型可在URI中找到，比如content:开头的URI，表明数据由设备上的content provider提供。但是通过设置这个属性，可以强制采用显式指定的类型而不再进行推导 MIME类型有两种：单个记录格式、多个记录格式</li>
<li>component – 指定Intent的目标组件的类名称。通常 Android会根据Intent 中包含的其它属性的信息，比如action、data/type、category进行查找，最终找到一个与之匹配的目标组件。但是，如果 component这个属性有指定的话，将直接使用它指定的组件，而不再执行上述查找过程。指定了这个属性以后，Intent的其它所有属性都是可选的，例如：Intent it = new Intent(Activity.Main.this, Activity2.class); startActivity(it);</li>
<li>extras – 附加信息，例如：it.putExtras(bundle) - 使用Bundle来传递数据；</li>
</ul>
<h2 id="暂存">暂存</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">int send_request_ip(int server_socket, JNIEnv *env, jobject obj, jclass cls) &#123;</div><div class="line">    LOGD(&quot;请求ip地址&quot;);</div><div class="line"></div><div class="line">    // 发送成功</div><div class="line"></div><div class="line">    responseIPv4(&quot;166.111.68.250 255.255.255.0 233.233.233&quot;, env, obj, cls);</div><div class="line"></div><div class="line">    return 0;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">int responseIPv4(string ipv4, JNIEnv *env, jobject obj, jclass cls) &#123;</div><div class="line"></div><div class="line">    LOGD(ipv4);</div><div class="line"></div><div class="line">    //2 寻找class里面的方法</div><div class="line">    //   jmethodID   (*GetMethodID)(JNIEnv*, jclass, const char*, const char*);</div><div class="line">    jmethodID method1 = (*env)-&gt;GetMethodID(env,cls,&quot;responseIPv4&quot;,&quot;(Ljava/lang/String;)I&quot;);</div><div class="line">    if(method1==0)&#123;</div><div class="line">        LOGD(&quot;find method1 error&quot;);</div><div class="line">        return 0;</div><div class="line">    &#125;</div><div class="line">    LOGD(&quot;find method1 &quot;);</div><div class="line">    //3 .调用这个方法</div><div class="line">    //    void        (*CallVoidMethod)(JNIEnv*, jobject, jmethodID, ...);</div><div class="line">    (*env)-&gt;CallVoidMethod(env,obj,method1);</div><div class="line"></div><div class="line">    return 0;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">JNIEXPORT jint JNICALL</div><div class="line">Java_com_example_ipv4_1over_1ipv6_MyVpnService_startVpn(JNIEnv *env, jobject instance) &#123;</div><div class="line"></div><div class="line">    // TODO</div><div class="line"></div><div class="line">    /*</div><div class="line">     * 开启VPN服务</div><div class="line">     * */</div><div class="line"></div><div class="line">    // c调用java函数</div><div class="line">    jclass cls;</div><div class="line">    cls = env-&gt;GetObjectClass(instance);</div><div class="line">    if(cls != NULL) &#123;</div><div class="line">        send_request_ip(0, env, instance, cls);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return 0;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> 4over6 </tag>
            
            <tag> 网络 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[操作系统复习笔记]]></title>
      <url>https://qingfeng14.github.io/2017/04/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h1 id="关于x86启动后执行的第一条指令及其地址">关于x86启动后执行的第一条指令及其地址</h1>
<p><a href="https://piazza.com/class/i5j09fnsl7k5x0?cid=770" target="_blank" rel="external">piazza</a></p>
<p>1、实模式下，地址为base+eip。第一条指令的地址是FFFFFFF0H = base(FFFF0000H) + EIP(0000FFF0H)。</p>
<p>2、争端出自于CS。可看看上面我高亮的normally和however部分。简单来讲就是，CS分为两部分，一部分为可见selector，另一部分为隐含base，实模式的一般情况下base = selector&lt;&lt;4，但是，机器刚启动的时候，selector=F000, base=FFFF0000！直到跳转指令以后才变成normally~</p>
<a id="more"></a>
<h2 id="例题thu-os-2015-mid-term-2">例题：THU OS 2015 mid term 2</h2>
<ol style="list-style-type: decimal">
<li><p>(启动)对于x86机器,加电后处于实模式下,并且cs寄存器的段选择子部分为0xf000, 隐藏的基址部分为0xffff0000,eip寄存器为0xfff0,则此时待执行的指令的物理地址为( 0xfffffff0)</p></li>
<li><p>(16位实模式)执行完第一条 jmp指令后,cs寄存器的段选择子部分变为0xf000,eip变为 0xe05b,则此时待执行指令的物理地址为()</p></li>
</ol>
<p>3） (进入32位保护模式)BIOS会将ucore bootloader 加载到网络地址0x7c00,且设置cs为0x0, eip为0x7c00。在boodoader中,使用 gdt加载了如下全局描述符表,然后进入32位保护模 式。此时为了正常工作。应该用 jmp将cs设置为(=3.1=),将ds/es/fs/gs/ss设置为(=3.2=) 此时若ep为0x7c6d,则实际被执行指令的物理地址为(一33二)</p>
<h1 id="进程挂起相关">进程挂起相关</h1>
<p>另一种解决方案是交换。包括把内存中某个进程的一部分或全部移到磁盘中。当内存中<font color="red">没有处于就绪状态的进程时</font>，操作系统就把被阻塞的进程换出到磁盘中的”挂起队列“（suspend queue），即暂时保存从内存中”驱逐“出来的被挂器的进程队列。操作系统在此之后取出<font color="red">挂起队列中的另一个进程，或者接受一个新进程的请求，将其纳入内存运行。</font></p>
<p>“交换”（swapping）是一个I/O操作，因而可能使问题更恶化。但是由于磁盘I/O一般是系统中最快的I/O（相对于磁带或者打印机I/O），所以交换通常会提高性能。</p>
<ul>
<li><p>阻塞-&gt;阻塞/挂起：如果<font color="red">没有就绪进程</font>，则至少一个阻塞进程被换出，为另一个没有阻塞的进程让出空间。如果操作系统确定当前正在运行的进程，或者就绪进程为了维护基本的性能要求而<font color="red">需要更多的内存空间</font>，那么，即使有可用的就绪态进程也可能出现这种转换。</p></li>
<li><p>阻塞挂起-&gt;就绪挂起：如果等待的事件发生了，则处于阻塞/挂起状态的进程可转换到就绪/挂起态。注意，这要求<font color="red">操作系统必须能够得到挂起进程的状态信息</font>。</p></li>
<li><p>就绪/挂起-&gt;就绪：<font color="red">如果内存中没有就绪态进程，操作系统需要调入一个进程继续执行</font>。此外，当处于就绪/挂起状态的进程比处于就绪态的任何进程的优先级都要高时，也可以进行这种转换。这种情况的产生是由于<font color="red">操作系统设计者规定，调入高优先级的进程比减少交换量更重要。</font></p></li>
<li><p>就绪-&gt;就绪/挂起：通常，操作系统更倾向于挂起阻塞态进程而不是就绪态进程，因为就绪态进程可以立即执行，而阻塞态进程占用了内存空间但不能执行。但如果释放内存以得到足够空间的唯一方法是挂起一个就绪态进程，那么这种转换也是必需的。并且，<font color="red">如果操作系统确信高优先级的阻塞态进程很快就会就绪，那么它可能选择挂起一个低优先级的就绪态进程，而不是一个高优先级的阻塞态进程。</font></p></li>
</ul>
<p><font color="red"> 通俗的说，就是挂起不挂起，不光要考虑为进程让出空间，不光要考虑是否就绪，还要考虑进程的优先级。</font></p>
<ul>
<li><p>新建-&gt;就绪挂起及新建-&gt;就绪：当创建一个新进程时，该进程或者加入就绪队列，或者加入就绪/挂起队列。不论哪种情况，操作系统都必须建立一些表管理进程，并为进程分配地址空间。<font color="red">操作系统可能更倾向于在初期执行这些辅助工作，这使得它可以维护大量的未阻塞的进程</font>。通过这一策略，内存中经常会没有足够的足够的空间分配给新进程。因此使用了（新建-&gt;就绪/挂起）转换。另一方面，我们可以证明创建进程时适时（just-in-time）原理，即尽可能推迟创建进程以减少操作系统的开销，并在系统被阻塞态进程阻塞时允许操作系统执行进程创建任务。</p></li>
<li><p>阻塞/挂起-&gt;阻塞：这种转化在设计中比较少见，如果一个进程没有准备好执行，并且不在内存中，调入它又有什么意义？但是考虑到下面的情况：<font color="red">一个进程终止，释放了一些内存空间，阻塞/挂起队列中有一个进程优先级比就绪/挂起队列中任何进程的优先级都要高，并且操作系统有理由相信阻塞进程的事件很快就会发射管，这时，把阻塞进程而不是就绪进程调入内存是合理的。</font></p></li>
<li><p>运行-&gt;就绪/挂起：通常当分配给一个运行进程的时间期满时，它将转换到就绪态。但是，<font color="red">如果由于位于阻塞/挂起队列中具有较高优先级的进程变得不再被阻塞，操作系统抢占这个进程，也可以直接把这个运行进程转换到就绪/挂起队列中，并释放一些内存空间。</font></p></li>
<li><p>各种状态/退出：在典型情况下，一个进程在运行时终止，或者是因为它已经完成，或者是因为出现了一些错误条件。但是，<font color="red">在某些操作系统中，一个进程可以被创建它的进程终止，或者当父进程终止时终止。如果允许这样，则进程在任何状态时都可以转换到退出态。</font></p></li>
</ul>
<h1 id="cow机制">COW机制</h1>
<p>COW机制简单来说就是fork的时候，子进程和父进程共用相同的内存，只有在修改的时候，拷贝原有内存当做一份私有的，在私有的基础上修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">1. fork的时候，进行如下处理。</div><div class="line">    1. VM_SHARE = 0，且页表P=1，将父进程的页表中的PTE_W记为0，这样这份内存只读不写。</div><div class="line">        如果考虑换入换出，应该注意，该页不能被换出，不然页表会不一致，所以我采取的办法是将该页设置为不可换出。</div><div class="line">    2. VM_SHARE = 0，且页表P=0，那么我们将页换入，然后按1和3做，或者也可以直接拷贝，并写入硬盘（比较麻烦）。</div><div class="line">    3. VM_SHARE = 1，不用cow机制。</div><div class="line">    段机制在这里不是特别好处理，我认为vma的管理就可以一定程度上取代段机制。</div><div class="line">2. 访问的时候如果发现pagefault，查看error_code和对应vmm的权限，如果发现</div><div class="line">    页存在，写出错，vmm可以写，那么我们进行处理。</div><div class="line">        1. VM_SHARE = 1，也就是说这块内存都是共享的，那么我们不应该对这块内存使用cow。</div><div class="line">        2. VM_SHARE = 0，新建对应的页表。</div><div class="line">    页存在，写出错，vmm不可以写，那就是错误异常了。</div><div class="line">    页不存在，写出错，vmm可以写</div><div class="line">        那么我们应该先把这一页换进来，再进行上面处理。</div></pre></td></tr></table></figure>
<h1 id="page_fault">Page_fault</h1>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/1Y1s3A2p1f1u1n0l2D2c/Image%202017-04-05%20at%208.33.32%20下午.png" alt="Page_fault">
<p class="caption">Page_fault</p>
</div>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/2F061T0g091x3M0Q1q0T/Image%202017-04-05%20at%208.35.16%20下午.png" alt="page_fault">
<p class="caption">page_fault</p>
</div>
<h1 id="造成page_fault的情况">造成page_fault的情况</h1>
<h2 id="造成page-fault有两种情况">造成page fault有两种情况</h2>
<ul>
<li>线性地址转换无效；</li>
<li>线性地址转换有效，但权限不合法。</li>
</ul>
<h2 id="线性地址转换无效的原因">线性地址转换无效的原因</h2>
<ul>
<li>页表项的P位为0，或保留位reserved为1。</li>
</ul>
<h2 id="error-code的p位">error code的P位</h2>
<ul>
<li>如果页表项的P位为0，则error code的P位为0。</li>
</ul>
<p>error code的P位 - P位为0时，表示page-fault缺页（准确来说，是entry的P位为0）。 - P位为1时，则不是因为缺页，而是因为page-level protection violation，即我们应该检测后面的标志位。</p>
<p>ucore的do_pgfault中</p>
<ul>
<li>P为0的处理，即case 0和case 2，作为缺页处理，没问题。</li>
<li>P为1时，这时应该检测后面的标志位。先看case 1，ucore直接failed，也就是说，非缺页的读操作产生的page fault，ucore不做处理（后面的U/S、RSVD或I/D的错误），可以理解，没问题。再看看case 3，ucore先检测虚地址管理vma的写位，如果vma有写的权限，而发生了page fault，那么可能是entry没有写权限，因此可以尝试在entry添加上写权限。问题在于，如果不是因为entry的写权限造成的page fault的呢？此时ucore将陷入死循环！ 简单总结</li>
</ul>
<p>ucore的page fault处理P=1,W/R=1的情况时，只处理了因为entry缺少写权限的情况，而没有考虑entry有写权限而由其它权限造成的异常，该处理可能导致ucore陷入死循环。赞同高思达同学对此处的质疑。</p>
<h2 id="缺页中断">缺页中断</h2>
<p>①页表项全为0——虚拟地址与物理地址未建立映射关系或已被撤销。 ②物理页面不在内存中——需要进行换页机制。 ③访问权限不够——输出错误信息，并退出。</p>
<h1 id="孤儿进程与僵尸进程">孤儿进程与僵尸进程</h1>
<p>我们知道在unix/linux中，正常情况下，<font color="red">子进程是通过父进程创建的，子进程再创建新的进程</font>。子进程的结束和父进程的运行是一个<font color="red">异步过程</font>,即父进程永远无法预测子进程到底什么时候结束。 当一个 进程完成它的工作终止之后，<font color="red">它的父进程需要调用wait()或者waitpid()系统调用取得子进程的终止状态。</font></p>
<p>孤儿进程：一个父进程退出，而它的一个或多个子进程还在运行，那么那些子进程将成为孤儿进程。孤儿进程将被init进程(进程号为1)所收养，并由init进程对它们完成状态收集工作。</p>
<p>僵尸进程：一个进程使用fork创建子进程，如果子进程退出，而父进程并没有调用wait或waitpid获取子进程的状态信息，那么子进程的进程描述符仍然保存在系统中。这种进程称之为僵死进程。</p>
<p>子进程通过exit()退出时，父进程既没有结束，也没有通过wait()等待子进程结束，则子进程成为“僵尸进程(zombie)</p>
<p>unix提供了一种机制可以保证只要父进程想知道子进程结束时的状态信息， 就可以得到。这种机制就是: 在每个进程退出的时候,内核释放该进程所有的资源,包括打开的文件,占用的内存等。 <font color="red">但是仍然为其保留一定的信息</font>(包括进程号the process ID,退出状态the termination status of the process,运行时间the amount of CPU time taken by the process等)。<font color="red">直到父进程通过wait / waitpid来取时才释放</font>。 但这样就导致了问题，如果进程不调用wait / waitpid的话， 那么保留的那段信息就不会释放，其进程号就会一直被占用，但是系统所能使用的进程号是有限的，如果大量的产生僵死进程，将因为没有可用的进程号而导致系统不能产生新的进程. <font color="red">此即为僵尸进程的危害</font>，应当避免。</p>
<p><font color="red">孤儿进程是没有父进程的进程，孤儿进程这个重任就落到了init进程身上</font>，init进程就好像是一个民政局，专门负责处理孤儿进程的善后工作。<font color="red">每当出现一个孤儿进程的时候，内核就把孤 儿进程的父进程设置为init</font>，而init进程会循环地wait()它的已经退出的子进程。这样，当一个孤儿进程凄凉地结束了其生命周期的时候，init进程就会代表党和政府出面处理它的一切善后工作。因此孤儿进程并不会有什么危害。</p>
<p>任何一个子进程(init除外)在exit()之后，并非马上就消失掉，而是留下一个称为僵尸进程(Zombie)的数据结构，等待父进程处理。这是每个 子进程在结束时都要经过的阶段。如果子进程在exit()之后，父进程没有来得及处理，这时用ps命令就能看到子进程的状态是“Z”。如果父进程能及时 处理，可能用ps命令就来不及看到子进程的僵尸状态，<font color="red">但这并不等于子进程不经过僵尸状态。</font> <font color="red">如果父进程在子进程结束之前退出，则子进程将由init接管</font>。init将会以父进程的身份对僵尸状态的子进程进行处理。</p>
<p>设置僵死状态的目的是<font color="red">维护子进程的信息，以便父进程在以后某个时候获取</font>。这些信息包括了子进程的进程ID、终止状态以及资源利用信息（CPU时间、内存使用量等等）。如果一个进程终止（使其所有子进程变成孤儿进程），而该进程有子进程处于僵死状态，<font color="red">那么它的所有僵死子进程的父进程ID将被重置为1（init进程）。</font>继承这些子进程的init进程将清理它们（也就是init进程将wait它们，从而除去它们的僵死状态）。</p>
<h1 id="belady现象">Belady现象</h1>
<p>Clock算法有Belady现象</p>
<p>123412512345</p>
<p><a href="https://piazza.com/class/i5j09fnsl7k5x0?cid=214" target="_blank" rel="external">实例</a></p>
<h1 id="x86寄存器">X86寄存器</h1>
<h2 id="通用寄存器">通用寄存器</h2>
<h2 id="段寄存器-cs代码段-ds数据段">段寄存器 CS(代码段) DS(数据段)</h2>
<h2 id="指令寄存器-和标志寄存器">指令寄存器 和标志寄存器</h2>
<p>EIP：指令寄存器， EIP的低16位即8086的ip， 储存的是下一条要执行的指令的内存地址，在分段地址转换中，表示指令的<font color="red">段内便宜地址</font></p>
<p>EFLAGS: 标志寄存器， 中断允许标志位<em>（IF）</em>, CLI（禁止中断）、STI两个命令控制， CF,PF，ZF等等寄存器</p>
<h1 id="用户态或内核态下的中断处理有什么区别在trapframe中有什么体现">用户态或内核态下的中断处理有什么区别？在trapframe中有什么体现</h1>
<p>用户态进入中断时，由于涉及到从用户态进入内核态，需要从用户栈切换到内核栈，因此需要多保存ss（堆栈段）和esp（栈顶）两个寄存器，先在栈中压入这两个值。再压入error code，cs，eip，flags。</p>
<p>而内核态进入中断时，不需要设计栈的切换，因此只需要压入error code，cs，eip，flags。</p>
<p>在trapframe数据结构中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">struct trapframe &#123;</div><div class="line">    struct pushregs tf_regs;</div><div class="line">    uint16_t tf_gs;</div><div class="line">    uint16_t tf_padding0;</div><div class="line">    uint16_t tf_fs;</div><div class="line">    uint16_t tf_padding1;</div><div class="line">    uint16_t tf_es;</div><div class="line">    uint16_t tf_padding2;</div><div class="line">    uint16_t tf_ds;</div><div class="line">    uint16_t tf_padding3;</div><div class="line">    uint32_t tf_trapno;</div><div class="line">    /* below here defined by x86 hardware */</div><div class="line">    uint32_t tf_err;</div><div class="line">    uintptr_t tf_eip;</div><div class="line">    uint16_t tf_cs;</div><div class="line">    uint16_t tf_padding4;</div><div class="line">    uint32_t tf_eflags;</div><div class="line">    /* below here only when crossing rings, such as from user to kernel */</div><div class="line">    uintptr_t tf_esp;</div><div class="line">    uint16_t tf_ss;</div><div class="line">    uint16_t tf_padding5;</div><div class="line">&#125; __attribute__((packed));</div></pre></td></tr></table></figure>
<p>注释的那一行“below here only hwn crossing rings”，就表示ss和esp只需要在切换特权级（即从用户态到内核态）时需要保存。</p>
<h1 id="x86特权级">x86特权级</h1>
<p><a href="http://blog.csdn.net/tianhuadihuo/article/details/6845287" target="_blank" rel="external">linux操作系统CPL、DPL、RPL说明</a></p>
<p>Linux操作系统中特权级有3种：CPL,DPL和RPL，每个都是有4个等级。 我对他们的关系理解是这样：一般来说，CPL代表当前代码段的权限，如果它想要去访问一个段或门，首先要看看对方的权限如何，也就是检查对方的DPL，如果满足当前的权限比要访问的权限高，则有可能允许去访问，有些情况我们还要检查 选择子的权限，即RPL,因为我们通过选择子:偏移量的方式去访问一个段，这算是一个访问请求动作，因此 称为请求访问权限RPL(Requst Privilege Level)。当请求权限也满足条件，那么访问就被允许了。</p>
<p>CPL(Current Privilege Level) CPL是当前执行的任务的特权等级，它存储在CS和SS的第0位和第1位上。(两位表示0~3四个等级) 通常情况下，CPL等于代码所在段的特权等级，当程序转移到不同的代码段时，处理器将改变CPL。 注意:在遇到一致代码段时，情况特殊，一致代码段的特点是：可以被等级相同或者更低特权级的代码访问，当处理器访问一个与当前代码段CPL特权级不同的一致代码段时，CPL不会改变。</p>
<p>DPL(Descriptor Privilege Level) 表示门或者段的特权级，存储在门（中断描述符IDT）或者段的描述符（GDT）的DPL字段中。正如上面说的那样，当当前代码段试图访问一个段或者门时，其DPL将会和当前特权级CPL以及段或门的选择子比较，根据段或者门的类型不同，DPL的含义不同：</p>
<p>1.数据段的DPL：规定了访问此段的最低权限。比如一个数据段的DPL是1，那么只有运行在CPL为0或1的程序才可能访问它。为什么说可能呢？因为还有一个比较的因素是RPL。访问数据段要满足有效特权级别（上述）高于数据段的DPL. 2.非一致代码段的DPL(不使用调用门的情况)：DPL规定访问此段的特权，只有CPL与之相等才有可能访问。 3.调用门的DPL，规定了程序或任务访问该门的最低权限。与数据段同。 4.一致代码段和通过调用门访问的非一致代码段，DPL规定访问此段的最高权限。 比如一个段的DPL为2，那么CPL为0或者1的程序都无法访问。 5. TSS的DPL，同数据段。</p>
<p>RPL（Rquest Privilege Level） RPL是通过选择子的低两位来表现出来的(这么说来，CS和SS也是存放选择子的，同时CPL存放在CS和SS的低两位上，那么对CS和SS来说，选择子的RPL=当前段的CPL)。处理器通过检查RPL和CPL来确认一个访问是否合法。即提出访问的段除了有足够的特权级CPL，如果RPL不够也是不行的(有些情况会忽略RPL检查)。</p>
<p>为什么要有RPL？ 操作系统往往通过设置RPL的方法来避免低特权级的应用程序访问高特权级的内层数据。 例子情景：调用者调用操作系统的某过程去访问一个段。 当操作系统(被调用过程)从应用程序(调用者)接受一个选择子时，会把选择子的RPL设置称调用者的权限等级，于是操作系统用这个选择子去访问相应的段时(这时CPL为操作系统的等级,因为正在运行操作系统的代码)，处理器会使用调用者的特权级去进行特权级检查，而不是正在实施访问动作的操作系统的特权级(CPL)，这样操作系统就不用以自己的身份去访问(就防止了应用去访问需要高权限的内层数据,除非应用程序本身的权限就足够高)。 那么RPL的作用就比较明显了：因为同一时刻只能有一个CPL，而当低权限的应用去调用拥有至高权限的操作系统的功能来访问一个目标段时，进入操作系统代码段时CPL变成了操作系统的CPL，如果没有RPL，那么权限检查的时候就会用CPL，而这个CPL权限比应用程序高，也就可能去访问需要高权限才能访问的数据，这就不安全了。所以引入RPL，让它去代表访问权限，因此在检查CPL的同时，也会检查RPL.一般来说如果RPL的数字比CPL大(权限比CPL的低)，那么RPL会起决定性作用。</p>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 课程 </tag>
            
            <tag> 复习 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Lec12练习]]></title>
      <url>https://qingfeng14.github.io/2017/04/03/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Lec12%E7%BB%83%E4%B9%A0/</url>
      <content type="html"><![CDATA[<p>1（不用回答）理解 孤儿进程和僵死进程的含义 http://www.cnblogs.com/xiehongfeng100/p/4619913.html http://www.cnblogs.com/Anker/p/3271773.html https://piazza.com/class/i5j09fnsl7k5x0?cid=753</p>
<p>孤儿进程：一个父进程退出、但其仍在运行的孤儿进程。孤儿进程将被init进程（进程号为1）所收养，并由init进程对它们完成状态收集工作。</p>
<p>僵尸进程：一个已经终止、但是其父进程尚未对其进行善后处理（获取终止子进程的有关信息，释放它仍占用的资源）的进程。</p>
<a id="more"></a>
<p>5 请仔细阅读https://chyyuu.gitbooks.io/os_course_exercises/content/all/05-2-spoc-discussion.html. 中的小组思考题</p>
<p>设计一个简化的进程管理子系统，可以管理并调度如下简化进程.给出了参考代码（https://github.com/chyyuu/ucore_lab/blob/master/related_info/lab5/process-cpuio-homework.py），请理解代码，并完成＂YOUR CODE“部分的内容．</p>
<p>根据注释及gitbook中的提示完成实验即可，需要注意的是切换进程的时刻有:进程结束或进程发出yield请求</p>
<p>以及IO的时间设置问题，由输出的提示可知： System will switch when the current process is FINISHED or ISSUES AN YIELD or IO After IOs, the process issuing the IO will run LATER (when it is its turn)</p>
<p>因此，io完成时间应该是 <code>clock_tick + self.io_length + 2</code>,即需要两个切换时间</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 设置IO完成时间</span></div><div class="line">self.io_finish_times[self.curr_proc].append(clock_tick + self.io_length + <span class="number">2</span>)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#! /usr/bin/env python</span></div><div class="line"><span class="comment"># coding:utf8</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">from</span> optparse <span class="keyword">import</span> OptionParser</div><div class="line"><span class="keyword">import</span> random</div><div class="line"></div><div class="line"><span class="comment"># process switch behavior</span></div><div class="line">SCHED_SWITCH_ON_IO = <span class="string">'SWITCH_ON_IO'</span></div><div class="line"></div><div class="line"><span class="comment"># io finished behavior</span></div><div class="line">IO_RUN_LATER = <span class="string">'IO_RUN_LATER'</span></div><div class="line"></div><div class="line"><span class="comment"># process states</span></div><div class="line">STATE_RUNNING = <span class="string">'RUNNING'</span></div><div class="line">STATE_READY = <span class="string">'READY'</span></div><div class="line">STATE_DONE = <span class="string">'DONE'</span></div><div class="line">STATE_WAIT = <span class="string">'WAITING'</span></div><div class="line"></div><div class="line"><span class="comment"># members of process structure</span></div><div class="line">PROC_CODE = <span class="string">'code_'</span></div><div class="line">PROC_PC = <span class="string">'pc_'</span></div><div class="line">PROC_ID = <span class="string">'pid_'</span></div><div class="line">PROC_STATE = <span class="string">'proc_state_'</span></div><div class="line"></div><div class="line"><span class="comment"># things a process can do</span></div><div class="line">DO_COMPUTE = <span class="string">'cpu'</span></div><div class="line">DO_YIELD = <span class="string">'yld'</span></div><div class="line">DO_IO = <span class="string">'io'</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">scheduler</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, process_switch_behavior, io_done_behavior, io_length)</span>:</span></div><div class="line">        <span class="comment"># keep set of instructions for each of the processes</span></div><div class="line">        self.proc_info = &#123;&#125;</div><div class="line">        self.process_switch_behavior = process_switch_behavior</div><div class="line">        self.io_done_behavior = io_done_behavior</div><div class="line">        self.io_length = io_length</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">new_process</span><span class="params">(self)</span>:</span></div><div class="line">        proc_id = len(self.proc_info)</div><div class="line">        self.proc_info[proc_id] = &#123;&#125;</div><div class="line">        self.proc_info[proc_id][PROC_PC] = <span class="number">0</span></div><div class="line">        self.proc_info[proc_id][PROC_ID] = proc_id</div><div class="line">        self.proc_info[proc_id][PROC_CODE] = []</div><div class="line">        self.proc_info[proc_id][PROC_STATE] = STATE_READY</div><div class="line">        <span class="keyword">return</span> proc_id</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">load</span><span class="params">(self, program_description)</span>:</span></div><div class="line">        proc_id = self.new_process()</div><div class="line">        tmp = program_description.split(<span class="string">':'</span>)</div><div class="line">        <span class="keyword">if</span> len(tmp) != <span class="number">3</span>:</div><div class="line">            <span class="keyword">print</span> <span class="string">'Bad description (%s): Must be number &lt;x:y:z&gt;'</span></div><div class="line">            <span class="keyword">print</span> <span class="string">'  where X is the number of instructions'</span></div><div class="line">            <span class="keyword">print</span> <span class="string">'  and Y is the percent change that an instruction is YIELD'</span></div><div class="line">            <span class="keyword">print</span> <span class="string">'  and Z is the percent change that an instruction is IO'</span></div><div class="line">            exit(<span class="number">1</span>)</div><div class="line"></div><div class="line">        num_instructions, chance_yield, chance_io = int(tmp[<span class="number">0</span>]), float(</div><div class="line">            tmp[<span class="number">1</span>]) / <span class="number">100.0</span>, float(tmp[<span class="number">2</span>]) / <span class="number">100.0</span></div><div class="line">        <span class="keyword">assert</span> (chance_yield + chance_io &lt; <span class="number">1</span>)</div><div class="line"></div><div class="line">        <span class="comment"># print "proc %d, num_instr %d, change_cpu %f" % (proc_id,num_instructions, chance_cpu)</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(num_instructions):</div><div class="line">            randnum = random.random();</div><div class="line">            <span class="keyword">if</span> randnum &lt; (<span class="number">1.0</span> - chance_yield - chance_io):</div><div class="line">                self.proc_info[proc_id][PROC_CODE].append(DO_COMPUTE)</div><div class="line">            <span class="keyword">elif</span> randnum &gt;= (<span class="number">1.0</span> - chance_yield - chance_io) <span class="keyword">and</span> randnum &lt; (</div><div class="line">                <span class="number">1.0</span> - chance_io):</div><div class="line">                self.proc_info[proc_id][PROC_CODE].append(DO_YIELD)</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                self.proc_info[proc_id][PROC_CODE].append(DO_IO)</div><div class="line">                <span class="comment"># print "proc %d, instr idx %d, instr cxt %s" % (proc_id, i, self.proc_info[proc_id][PROC_CODE][i])</span></div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="comment"># change to WAIT STATE, the current proc's state should be expected</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move_to_wait</span><span class="params">(self, expected)</span>:</span></div><div class="line">        <span class="keyword">assert</span> (self.proc_info[self.curr_proc][PROC_STATE] == expected)</div><div class="line">        self.proc_info[self.curr_proc][PROC_STATE] = STATE_WAIT</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="comment"># change to READY STATE, the current proc's state should be expected</span></div><div class="line">    <span class="comment"># if pid==-1, then pid=self.curr_proc</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move_to_ready</span><span class="params">(self, expected, pid=<span class="number">-1</span>)</span>:</span></div><div class="line">        <span class="comment"># YOUR CODE</span></div><div class="line">        <span class="keyword">if</span> pid <span class="keyword">is</span> <span class="number">-1</span>:</div><div class="line">            pid = self.curr_proc</div><div class="line">        <span class="keyword">assert</span> (self.proc_info[pid][PROC_STATE] == expected)</div><div class="line">        self.proc_info[pid][PROC_STATE] = STATE_READY</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="comment"># change to RUNNING STATE, the current proc's state should be expected</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move_to_running</span><span class="params">(self, expected)</span>:</span></div><div class="line">        <span class="comment"># YOUR CODE</span></div><div class="line">        <span class="keyword">assert</span> (self.proc_info[self.curr_proc][PROC_STATE] == expected)</div><div class="line">        self.proc_info[self.curr_proc][PROC_STATE] = STATE_RUNNING</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="comment"># change to DONE STATE, the current proc's state should be expected</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move_to_done</span><span class="params">(self, expected)</span>:</span></div><div class="line">        <span class="comment"># YOUR CODE</span></div><div class="line">        <span class="keyword">assert</span> (self.proc_info[self.curr_proc][PROC_STATE] == expected)</div><div class="line">        self.proc_info[self.curr_proc][PROC_STATE] = STATE_DONE</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="comment"># choose next proc using FIFO/FCFS scheduling, If pid==-1, then pid=self.curr_proc</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next_proc</span><span class="params">(self, pid=<span class="number">-1</span>)</span>:</span></div><div class="line">        <span class="comment"># YOUR CODE</span></div><div class="line">        <span class="string">"""</span></div><div class="line">        使用FIFO/FCFS：先来先服务, 只有进程done, yield, io时才会执行切换</div><div class="line">        先查找位于proc_info队列的curr_proc元素(当前进程)之后的进程(curr_proc+1..end)是否处于READY态，</div><div class="line">        再查找位于proc_info队列的curr_proc元素(当前进程)之前的进程(begin..curr_proc-1)是否处于READY态</div><div class="line">        如都没有，继续执行curr_proc直到结束</div><div class="line">        """</div><div class="line">        <span class="keyword">if</span> pid == <span class="number">-1</span>:</div><div class="line">            pid = self.curr_proc</div><div class="line">        <span class="comment"># 使用FIFO/FCFS(先到先服务)调度算法选择下一个进程</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(self.curr_proc + <span class="number">1</span>, len(self.proc_info)):</div><div class="line">            <span class="keyword">if</span> self.proc_info[i][PROC_STATE] == STATE_READY:</div><div class="line">                self.curr_proc = i</div><div class="line">                self.move_to_running(STATE_READY)</div><div class="line">                <span class="keyword">return</span></div><div class="line">                <span class="comment"># break</span></div><div class="line"></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">0</span>, self.curr_proc):</div><div class="line">            <span class="keyword">if</span> self.proc_info[i][PROC_STATE] == STATE_READY:</div><div class="line">                self.curr_proc = i</div><div class="line">                self.move_to_running(STATE_READY)</div><div class="line">                <span class="keyword">return</span></div><div class="line">                <span class="comment"># break</span></div><div class="line"></div><div class="line">        <span class="comment"># 进程切换</span></div><div class="line">        <span class="keyword">if</span> self.proc_info[self.curr_proc][PROC_STATE] == STATE_READY:</div><div class="line">            self.move_to_running(STATE_READY)</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_num_processes</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> len(self.proc_info)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_num_instructions</span><span class="params">(self, pid)</span>:</span></div><div class="line">        <span class="keyword">return</span> len(self.proc_info[pid][PROC_CODE])</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_instruction</span><span class="params">(self, pid, index)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.proc_info[pid][PROC_CODE][index]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_num_active</span><span class="params">(self)</span>:</span></div><div class="line">        num_active = <span class="number">0</span></div><div class="line">        <span class="keyword">for</span> pid <span class="keyword">in</span> range(len(self.proc_info)):</div><div class="line">            <span class="keyword">if</span> self.proc_info[pid][PROC_STATE] != STATE_DONE:</div><div class="line">                num_active += <span class="number">1</span></div><div class="line">        <span class="keyword">return</span> num_active</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_num_runnable</span><span class="params">(self)</span>:</span></div><div class="line">        num_active = <span class="number">0</span></div><div class="line">        <span class="keyword">for</span> pid <span class="keyword">in</span> range(len(self.proc_info)):</div><div class="line">            <span class="keyword">if</span> self.proc_info[pid][PROC_STATE] == STATE_READY <span class="keyword">or</span> \</div><div class="line">                            self.proc_info[pid][PROC_STATE] == STATE_RUNNING:</div><div class="line">                num_active += <span class="number">1</span></div><div class="line">        <span class="keyword">return</span> num_active</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_ios_in_flight</span><span class="params">(self, current_time)</span>:</span></div><div class="line">        num_in_flight = <span class="number">0</span></div><div class="line">        <span class="keyword">for</span> pid <span class="keyword">in</span> range(len(self.proc_info)):</div><div class="line">            <span class="keyword">for</span> t <span class="keyword">in</span> self.io_finish_times[pid]:</div><div class="line">                <span class="keyword">if</span> t &gt; current_time:</div><div class="line">                    num_in_flight += <span class="number">1</span></div><div class="line">        <span class="keyword">return</span> num_in_flight</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">space</span><span class="params">(self, num_columns)</span>:</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(num_columns):</div><div class="line">            <span class="keyword">print</span> <span class="string">'%10s'</span> % <span class="string">' '</span>,</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">check_if_done</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> len(self.proc_info[self.curr_proc][PROC_CODE]) == <span class="number">0</span>:</div><div class="line">            <span class="keyword">if</span> self.proc_info[self.curr_proc][PROC_STATE] == STATE_RUNNING:</div><div class="line">                self.move_to_done(STATE_RUNNING)</div><div class="line">                self.next_proc()</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        clock_tick = <span class="number">0</span></div><div class="line"></div><div class="line">        <span class="keyword">if</span> len(self.proc_info) == <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span></div><div class="line"></div><div class="line">        <span class="comment"># track outstanding IOs, per process</span></div><div class="line">        self.io_finish_times = &#123;&#125;</div><div class="line">        <span class="keyword">for</span> pid <span class="keyword">in</span> range(len(self.proc_info)):</div><div class="line">            self.io_finish_times[pid] = []</div><div class="line"></div><div class="line">        <span class="comment"># make first one active</span></div><div class="line">        self.curr_proc = <span class="number">0</span></div><div class="line">        self.move_to_running(STATE_READY)</div><div class="line"></div><div class="line">        <span class="comment"># OUTPUT: heade`[rs for each column</span></div><div class="line">        <span class="keyword">print</span> <span class="string">'%s'</span> % <span class="string">'Time'</span>,</div><div class="line">        <span class="keyword">for</span> pid <span class="keyword">in</span> range(len(self.proc_info)):</div><div class="line">            <span class="keyword">print</span> <span class="string">'%10s'</span> % (<span class="string">'PID:%2d'</span> % (pid)),</div><div class="line">        <span class="keyword">print</span> <span class="string">'%10s'</span> % <span class="string">'CPU'</span>,</div><div class="line">        <span class="keyword">print</span> <span class="string">'%10s'</span> % <span class="string">'IOs'</span>,</div><div class="line">        <span class="keyword">print</span> <span class="string">''</span></div><div class="line"></div><div class="line">        <span class="comment"># init statistics</span></div><div class="line">        io_busy = <span class="number">0</span></div><div class="line">        cpu_busy = <span class="number">0</span></div><div class="line"></div><div class="line">        <span class="keyword">while</span> self.get_num_active() &gt; <span class="number">0</span>:</div><div class="line">            clock_tick += <span class="number">1</span></div><div class="line"></div><div class="line">            <span class="comment"># check for io finish</span></div><div class="line">            io_done = <span class="keyword">False</span></div><div class="line">            <span class="keyword">for</span> pid <span class="keyword">in</span> range(len(self.proc_info)):</div><div class="line">                <span class="keyword">if</span> clock_tick <span class="keyword">in</span> self.io_finish_times[pid]:</div><div class="line">                    <span class="comment"># if IO finished, the should do something for related process</span></div><div class="line">                    <span class="comment"># YOUR CODE</span></div><div class="line">                    <span class="comment"># IO完成，将pid进程转换为Ready状态</span></div><div class="line">                    self.move_to_ready(STATE_WAIT, pid)</div><div class="line">                    <span class="keyword">if</span> self.proc_info[self.curr_proc][</div><div class="line">                        PROC_STATE] != STATE_RUNNING:</div><div class="line">                        self.next_proc();</div><div class="line">                    io_done = <span class="keyword">True</span></div><div class="line">                    <span class="comment"># pass #YOU should delete this</span></div><div class="line"></div><div class="line">            <span class="comment"># if current proc is RUNNING and has an instruction, execute it</span></div><div class="line">            instruction_to_execute = <span class="string">''</span></div><div class="line">            <span class="keyword">if</span> self.proc_info[self.curr_proc][PROC_STATE] == STATE_RUNNING <span class="keyword">and</span> \</div><div class="line">                            len(self.proc_info[self.curr_proc][PROC_CODE]) &gt; <span class="number">0</span>:</div><div class="line">                <span class="comment"># pop a instruction from proc_info[self.curr_proc][PROC_CODE]to instruction_to_execute</span></div><div class="line">                <span class="comment"># YOUR CODE</span></div><div class="line">                instruction_to_execute = self.proc_info[self.curr_proc][</div><div class="line">                    PROC_CODE].pop(<span class="number">0</span>)</div><div class="line">                <span class="comment"># pass #YOU should delete this</span></div><div class="line"></div><div class="line">            <span class="comment"># OUTPUT: print what everyone is up to</span></div><div class="line">            <span class="keyword">if</span> io_done:</div><div class="line">                <span class="keyword">print</span> <span class="string">'%3d*'</span> % clock_tick,</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="keyword">print</span> <span class="string">'%3d '</span> % clock_tick,</div><div class="line">            <span class="keyword">for</span> pid <span class="keyword">in</span> range(len(self.proc_info)):</div><div class="line">                <span class="keyword">if</span> pid == self.curr_proc <span class="keyword">and</span> instruction_to_execute != <span class="string">''</span>:</div><div class="line">                    <span class="keyword">print</span> <span class="string">'%10s'</span> % (<span class="string">'RUN:'</span> + instruction_to_execute),</div><div class="line">                <span class="keyword">else</span>:</div><div class="line">                    <span class="keyword">print</span> <span class="string">'%10s'</span> % (self.proc_info[pid][PROC_STATE]),</div><div class="line">            <span class="keyword">if</span> instruction_to_execute == <span class="string">''</span>:</div><div class="line">                <span class="keyword">print</span> <span class="string">'%10s'</span> % <span class="string">' '</span>,</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="keyword">print</span> <span class="string">'%10s'</span> % <span class="number">1</span>,</div><div class="line">            num_outstanding = self.get_ios_in_flight(clock_tick)</div><div class="line">            <span class="keyword">if</span> num_outstanding &gt; <span class="number">0</span>:</div><div class="line">                <span class="keyword">print</span> <span class="string">'%10s'</span> % str(num_outstanding),</div><div class="line">                io_busy += <span class="number">1</span></div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="keyword">print</span> <span class="string">'%10s'</span> % <span class="string">' '</span>,</div><div class="line">            <span class="keyword">print</span> <span class="string">''</span></div><div class="line"></div><div class="line">            <span class="comment"># if this is an YIELD instruction, switch to ready state</span></div><div class="line">            <span class="comment"># and add an io completion in the future</span></div><div class="line">            <span class="keyword">if</span> instruction_to_execute == DO_YIELD:</div><div class="line">                <span class="comment"># YOUR CODE</span></div><div class="line">                <span class="comment"># 发出YIELD请求,放弃使用CPU, 进程切换</span></div><div class="line">                self.move_to_ready(STATE_RUNNING)</div><div class="line">                self.next_proc()</div><div class="line">                <span class="keyword">pass</span>  <span class="comment"># YOU should delete this</span></div><div class="line">            <span class="comment"># if this is an IO instruction, switch to waiting state</span></div><div class="line">            <span class="comment"># and add an io completion in the future</span></div><div class="line">            <span class="keyword">elif</span> instruction_to_execute == DO_IO:</div><div class="line">                <span class="comment"># YOUR CODE</span></div><div class="line">                <span class="comment"># 发出I/O操作请求,放弃使用CPU</span></div><div class="line">                self.move_to_wait(STATE_RUNNING)</div><div class="line">                <span class="comment"># 设置IO完成时间</span></div><div class="line">                self.io_finish_times[self.curr_proc].append(</div><div class="line">                    clock_tick + self.io_length + <span class="number">2</span>)</div><div class="line">                <span class="comment"># 切换进程</span></div><div class="line">                self.next_proc()</div><div class="line">                <span class="keyword">pass</span>  <span class="comment"># YOU should delete this</span></div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                cpu_busy += <span class="number">1</span></div><div class="line"></div><div class="line">            <span class="comment"># ENDCASE: check if currently running thing is out of instructions</span></div><div class="line">            self.check_if_done()</div><div class="line">        <span class="keyword">return</span> (cpu_busy, io_busy, clock_tick)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># PARSE ARGUMENTS</span></div><div class="line"><span class="comment">#</span></div><div class="line"></div><div class="line">parser = OptionParser()</div><div class="line">parser.add_option(<span class="string">'-s'</span>, <span class="string">'--seed'</span>, default=<span class="number">0</span>, help=<span class="string">'the random seed'</span>, action=<span class="string">'store'</span>, type=<span class="string">'int'</span>, dest=<span class="string">'seed'</span>)</div><div class="line">parser.add_option(<span class="string">'-l'</span>, <span class="string">'--processlist'</span>, default=<span class="string">''</span>, help=<span class="string">'a comma-separated list of processes to run, in the form X1:Y1:Z1,X2:Y2:Z2,... where X is the number of instructions that process should run, and Y/Z the chances (from 0 to 100) issue an YIELD/IO'</span>, action=<span class="string">'store'</span>, type=<span class="string">'string'</span>, dest=<span class="string">'process_list'</span>)</div><div class="line">parser.add_option(<span class="string">'-L'</span>, <span class="string">'--iolength'</span>, default=<span class="number">3</span>, help=<span class="string">'how long an IO takes'</span>, action=<span class="string">'store'</span>, type=<span class="string">'int'</span>, dest=<span class="string">'io_length'</span>)</div><div class="line">parser.add_option(<span class="string">'-p'</span>, <span class="string">'--printstats'</span>, help=<span class="string">'print statistics at end; only useful with -c flag (otherwise stats are not printed)'</span>, action=<span class="string">'store_true'</span>, default=<span class="keyword">False</span>, dest=<span class="string">'print_stats'</span>)</div><div class="line">(options, args) = parser.parse_args()</div><div class="line"></div><div class="line">random.seed(options.seed)</div><div class="line"></div><div class="line">process_switch_behavior = SCHED_SWITCH_ON_IO</div><div class="line">io_done_behavior = IO_RUN_LATER</div><div class="line">io_length = options.io_length</div><div class="line"></div><div class="line">s = scheduler(process_switch_behavior, io_done_behavior, io_length)</div><div class="line"></div><div class="line"><span class="comment"># example process description (10:100,10:100)</span></div><div class="line"><span class="keyword">for</span> p <span class="keyword">in</span> options.process_list.split(<span class="string">','</span>):</div><div class="line">    s.load(p)</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">'Produce a trace of what would happen when you run these processes:'</span></div><div class="line"><span class="keyword">for</span> pid <span class="keyword">in</span> range(s.get_num_processes()):</div><div class="line">    <span class="keyword">print</span> <span class="string">'Process %d'</span> % pid</div><div class="line">    <span class="keyword">for</span> inst <span class="keyword">in</span> range(s.get_num_instructions(pid)):</div><div class="line">        <span class="keyword">print</span> <span class="string">'  %s'</span> % s.get_instruction(pid, inst)</div><div class="line">    <span class="keyword">print</span> <span class="string">''</span></div><div class="line"><span class="keyword">print</span> <span class="string">'Important behaviors:'</span></div><div class="line"><span class="keyword">print</span> <span class="string">'  System will switch when'</span>,</div><div class="line"><span class="keyword">if</span> process_switch_behavior == SCHED_SWITCH_ON_IO:</div><div class="line">    <span class="keyword">print</span> <span class="string">'the current process is FINISHED or ISSUES AN YIELD or IO'</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'error in sched switch on iobehavior'</span></div><div class="line">    exit(<span class="number">-1</span>)</div><div class="line"><span class="keyword">print</span> <span class="string">'  After IOs, the process issuing the IO will'</span>,</div><div class="line"><span class="keyword">if</span> io_done_behavior == IO_RUN_LATER:</div><div class="line">    <span class="keyword">print</span> <span class="string">'run LATER (when it is its turn)'</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'error in IO done behavior'</span></div><div class="line">    exit(<span class="number">-1</span>)</div><div class="line"><span class="keyword">print</span> <span class="string">''</span></div><div class="line"></div><div class="line">(cpu_busy, io_busy, clock_tick) = s.run()</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">''</span></div><div class="line"><span class="keyword">print</span> <span class="string">'Stats: Total Time %d'</span> % clock_tick</div><div class="line"><span class="keyword">print</span> <span class="string">'Stats: CPU Busy %d (%.2f%%)'</span> % (</div><div class="line">cpu_busy, <span class="number">100.0</span> * float(cpu_busy) / clock_tick)</div><div class="line"><span class="keyword">print</span> <span class="string">'Stats: IO Busy  %d (%.2f%%)'</span> % (</div><div class="line">io_busy, <span class="number">100.0</span> * float(io_busy) / clock_tick)</div><div class="line"><span class="keyword">print</span> <span class="string">''</span></div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 作业 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[服务器配置相关问题]]></title>
      <url>https://qingfeng14.github.io/2017/03/31/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h1 id="服务器配置相关记录">服务器配置相关记录</h1>
<h2 id="apache的反向代理">Apache的反向代理</h2>
<p>首先是库之类的环境配置， 如果是编译的，./configure附加–enable-proxy参数，把代理模块编译进来。</p>
<p>如果是安装好的，就在配置文件http.conf里启用相应的模块 LoadModule proxy_module modules/mod_proxy.so LoadModule proxy_http_module modules/mod_proxy_http.so</p>
<p>有的服务器该配置文件为, <code>/etc/apache2/apache2.conf</code> <a id="more"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">LoadModule proxy_module /usr/lib/apache2/modules/mod_proxy.so</div><div class="line">LoadModule proxy_http_module /usr/lib/apache2/modules/mod_proxy_http.so</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;VirtualHost *:80&gt;</div><div class="line">    ServerAlias wordpress.zhangshenghao.win</div><div class="line">    ServerName wordpress.zhangshenghao.win</div><div class="line">    ProxyPassReverse / http://pi.zhangshenghao.win/wordpress/</div><div class="line">    ProxyPass / http://pi.zhangshenghao.win/wordpress/</div><div class="line">    </div><div class="line">&lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">&lt;VirtualHost *:80&gt;</div><div class="line">    ServerAlias blog.zhangshenghao.win</div><div class="line">    ServerName blog.zhangshenghao.win</div><div class="line">    ProxyPassReverse / http://pi.zhangshenghao.win/qingfeng14.github.io/</div><div class="line">    ProxyPass / http://pi.zhangshenghao.win/qingfeng14.github.io/</div><div class="line">    </div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;VirtualHost *:80&gt;</div><div class="line">    ServerAlias www.zhangshenghao.win</div><div class="line">    ServerName www.zhangshenghao.win</div><div class="line">    # ProxyPassReverse / http://pi.zhangshenghao.win/wordpress/</div><div class="line">    DocumentRoot /var/www/html/qingfeng14.github.io/</div><div class="line">    </div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<p>服务器重启</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo /etc/init.d/apache2 restart</div></pre></td></tr></table></figure>
<h1 id="开启https-代理">开启HTTPS 代理</h1>
<p><a href="http://www.cnblogs.com/best-jobs/p/3298258.html" target="_blank" rel="external">开启HTTPS步骤</a> <a href="http://blog.csdn.net/newjueqi/article/details/9789659" target="_blank" rel="external">更全</a></p>
<ul>
<li><p>步骤1：生成密钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl genrsa 1024 &gt; server.key</div></pre></td></tr></table></figure>
<p>说明：这是用128位rsa算法生成密钥，得到server.key文件</p></li>
<li><p>步骤2: 生成证书请求文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl req -new -key server.key &gt; server.csr</div></pre></td></tr></table></figure>
<p>说明：这是用步骤1的密钥生成证书请求文件server.csr, 这一步提很多问题，一一输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Country Name (2 letter code) [AU]:CN ← 国家代号，中国输入CN </div><div class="line">State or Province Name (full name) [Some-State]:BeiJing ← 省的全名，拼音 </div><div class="line">Locality Name (eg, city) []:BeiJing ← 市的全名，拼音 </div><div class="line">Organization Name (eg, company) [Internet Widgits Pty Ltd]:MyCompany Corp. ← 公司英文名 </div><div class="line">Organizational Unit Name (eg, section) []: ← 可以不输入 </div><div class="line">Common Name (eg, YOUR name) []: ← 此时不输入 </div><div class="line">Email Address []:admin@mycompany.com ← 电子邮箱，可随意填</div><div class="line">Please enter the following ‘extra’ attributes </div><div class="line">to be sent with your certificate request </div><div class="line">A challenge password []: ← 可以不输入 </div><div class="line">An optional company name []: ← 可以不输入</div></pre></td></tr></table></figure></li>
<li><p>步骤3: 生成证书</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl req -x509 -days 3650 -key server.key -in server.csr &gt; server.crt</div></pre></td></tr></table></figure>
<p>说明：这是用步骤1,2的的密钥和证书请求生成证书server.crt，-days参数指明证书有效期，单位为天</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ln -s /etc/apache2/sites-available/default-ssl.conf  /etc/apache2/sites-enabled/001-ssl.conf</div></pre></td></tr></table></figure></li>
</ul>
<h1 id="lets-encrypt">let’s encrypt</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Generating key (2048 bits): /etc/letsencrypt/keys/0001_key-certbot.pem</div><div class="line">Creating CSR: /etc/letsencrypt/csr/0001_csr-certbot.pem</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line">&lt;VirtualHost _default_:443&gt;</div><div class="line">        ServerAdmin zhangshenghao1995@163.com</div><div class="line"></div><div class="line">        DocumentRoot /var/www/html/qingfeng14.github.io/</div><div class="line"></div><div class="line">        ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</div><div class="line">        CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</div><div class="line"></div><div class="line">        #   SSL Engine Switch:</div><div class="line">        #   Enable/Disable SSL for this virtual host.</div><div class="line">        SSLEngine on</div><div class="line"></div><div class="line">        #   A self-signed (snakeoil) certificate can be created by installing</div><div class="line">        #   the ssl-cert package. See</div><div class="line">        #   /usr/share/doc/apache2/README.Debian.gz for more info.</div><div class="line">        #   If both key and certificate are stored in the same file, only the</div><div class="line">        #   SSLCertificateFile directive is needed.</div><div class="line">        SSLCertificateFile  /etc/letsencrypt/live/zhangshenghao.win/fullchain.pem</div><div class="line">        SSLCertificateKeyFile /etc/letsencrypt/live/zhangshenghao.win/privkey.pem</div><div class="line"></div><div class="line">        &lt;FilesMatch &quot;\.(cgi|shtml|phtml|php)$&quot;&gt;</div><div class="line">                SSLOptions +StdEnvVars</div><div class="line">        &lt;/FilesMatch&gt;</div><div class="line">        &lt;Directory /usr/lib/cgi-bin&gt;</div><div class="line">                SSLOptions +StdEnvVars</div><div class="line">        &lt;/Directory&gt;</div><div class="line"></div><div class="line">        BrowserMatch &quot;MSIE [2-6]&quot; \</div><div class="line">                nokeepalive ssl-unclean-shutdown \</div><div class="line">                downgrade-1.0 force-response-1.0</div><div class="line">        # MSIE 7 and newer should be able to use keepalive</div><div class="line">        BrowserMatch &quot;MSIE [17-9]&quot; ssl-unclean-shutdown</div><div class="line"></div><div class="line">        ServerName zhangshenghao.win</div><div class="line">    &lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">    &lt;VirtualHost _default_:443&gt;</div><div class="line">        ServerAdmin zhangshenghao1995@163.com</div><div class="line"></div><div class="line">        DocumentRoot /var/www/html/qingfeng14.github.io/</div><div class="line"></div><div class="line">        ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</div><div class="line">        CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</div><div class="line"></div><div class="line">        #   SSL Engine Switch:</div><div class="line">        #   Enable/Disable SSL for this virtual host.</div><div class="line">        SSLEngine on</div><div class="line"></div><div class="line">        #   A self-signed (snakeoil) certificate can be created by installing</div><div class="line">        #   the ssl-cert package. See</div><div class="line">        #   /usr/share/doc/apache2/README.Debian.gz for more info.</div><div class="line">        #   If both key and certificate are stored in the same file, only the</div><div class="line">        #   SSLCertificateFile directive is needed.</div><div class="line">        SSLCertificateFile  /etc/letsencrypt/live/blog.zhangshenghao.win/fullchain.pem</div><div class="line">        SSLCertificateKeyFile /etc/letsencrypt/live/blog.zhangshenghao.win/privkey.pem</div><div class="line"></div><div class="line">        &lt;FilesMatch &quot;\.(cgi|shtml|phtml|php)$&quot;&gt;</div><div class="line">                SSLOptions +StdEnvVars</div><div class="line">        &lt;/FilesMatch&gt;</div><div class="line">        &lt;Directory /usr/lib/cgi-bin&gt;</div><div class="line">                SSLOptions +StdEnvVars</div><div class="line">        &lt;/Directory&gt;</div><div class="line"></div><div class="line">        BrowserMatch &quot;MSIE [2-6]&quot; \</div><div class="line">                nokeepalive ssl-unclean-shutdown \</div><div class="line">                downgrade-1.0 force-response-1.0</div><div class="line">        # MSIE 7 and newer should be able to use keepalive</div><div class="line">        BrowserMatch &quot;MSIE [17-9]&quot; ssl-unclean-shutdown</div><div class="line"></div><div class="line">        ServerName blog.zhangshenghao.win</div><div class="line">    &lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<h2 id="http-重定向至-http">http 重定向至 http</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">RewriteEngine On</div><div class="line">RewriteRule ^ https://%&#123;SERVER_NAME&#125;%&#123;REQUEST_URI&#125; [END,NE,R=permanent]</div></pre></td></tr></table></figure>
<h1 id="squid-代理服务器">squid 代理服务器</h1>
<h2 id="问题">问题</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ERROR</div><div class="line"></div><div class="line">The requested URL could not be retrieved</div><div class="line"></div><div class="line">The following error was encountered while trying to retrieve the URL: http://www.cnki.net/</div><div class="line"></div><div class="line">Access Denied.</div><div class="line"></div><div class="line">Access control configuration prevents your request from being allowed at this time. Please contact your service provider if you feel this is incorrect.</div><div class="line"></div><div class="line">Your cache administrator is webmaster.</div></pre></td></tr></table></figure>
<h2 id="解决-添加dns解析">解决: 添加DNS解析</h2>
<p><code>sudo vi /etc/resolv.conf</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># Generated by resolvconf</div><div class="line">domain zhangshenghao.win</div><div class="line">nameserver 166.111.68.130</div><div class="line">nameserver 8.8.8.8</div><div class="line">nameserver 127.0.0.1</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> 服务器 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 终端 </tag>
            
            <tag> 服务器 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[lec10_lec11练习题]]></title>
      <url>https://qingfeng14.github.io/2017/03/29/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/lec10-lec11/</url>
      <content type="html"><![CDATA[<h3 id="以lab3为例说明虚拟页与磁盘后备页面的对应关系是什么">1 以lab3为例，说明虚拟页与磁盘后备页面的对应关系是什么？</h3>
<p>物理内存+磁盘空间 构成了虚拟存储通过虚拟页式存储机制提供给用户更大的逻辑空间，虚拟内存页有可能在物理内存中，也可能在磁盘后备页面中，这种调整是通过页面置换算法进行对应的换入换出的。 <a id="more"></a></p>
<h3 id="由于何种原因可出现进程的何种状态转到退出状态">4 由于何种原因，可出现进程的何种状态转到退出状态？</h3>
<ul>
<li>正常退出：进程的应用程序逻辑流程执行结束，进程会由运行态转为退出状态</li>
<li>错误退出：程序运行过程中发现错误（异常输入等等）主动退出（运行状态到退出状态）</li>
<li>致命错误：程序运行出现差错无法继续执行而退出（运行到退出）</li>
<li>被其他进程所杀，其他进程向该进程发送信号使之退出（此前可能是就绪状态，运行状态，等待状态）</li>
</ul>
<h3 id="请设计一个简化的进程管理子系统可以管理并调度如下简化进程.给出了参考代码httpsgithub.comchyyuuucore_labblobmasterrelated_infolab4process-concept-homework.py请理解代码并完成your-code部分的内容">5 请设计一个简化的进程管理子系统，可以管理并调度如下简化进程.给出了参考代码（https://github.com/chyyuu/ucore_lab/blob/master/related_info/lab4/process-concept-homework.py），请理解代码，并完成＂YOUR CODE“部分的内容。</h3>
<p>该调度算法模拟了先到先服务调度（FCFS）算法，根据注释填入代码即可</p>
<p>需要注意的是在进行FCFS算法时，需要注意在还有其他进程处于Ready状态时不要让当前进程继续运行,如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">next_proc</span><span class="params">(self, pid=<span class="number">-1</span>)</span>:</span></div><div class="line">        <span class="comment">#YOUR CODE</span></div><div class="line">        <span class="keyword">if</span> pid==<span class="number">-1</span>:</div><div class="line">            pid = self.curr_proc</div><div class="line">        <span class="comment"># 使用FIFO/FCFS(先到先服务)调度算法选择下一个进程</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">0</span>, len(self.proc_info)):</div><div class="line">            <span class="keyword">if</span> self.proc_info[i][PROC_STATE] == STATE_READY <span class="keyword">and</span> i != pid:</div><div class="line">                <span class="comment"># 避免选择本进程再次调度</span></div><div class="line">                self.curr_proc = i</div><div class="line">                <span class="keyword">break</span></div><div class="line">        <span class="keyword">if</span> self.proc_info[self.curr_proc][PROC_STATE] == STATE_READY:</div><div class="line">            self.move_to_running(STATE_READY)</div><div class="line">        <span class="keyword">return</span></div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 作业 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[[计算机系统结构]指令系统]]></title>
      <url>https://qingfeng14.github.io/2017/03/26/%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84-%E5%B1%82%E6%AC%A1%E5%AD%98%E5%82%A8/</url>
      <content type="html"><![CDATA[<p>程序访问的局部性原理：时间局部性，空间局部性</p>
<h2 id="存储系统的多级层次结构">存储系统的多级层次结构</h2>
<p>CPU-&gt;M1-&gt;M2–。。。。。。.&gt;Mn</p>
<p>在存储层次中，各存储器中一般满足包含关系,即任何一层存储器中的内容都是其下一层存储（离CPU更远一级）中内容的子集</p>
<p>CPU与M1一般以字为单位传递，M1以外一般以块/页为单位传递数据</p>
<a id="more"></a>
<h2 id="存储系统性能参数">存储系统性能参数</h2>
<h3 id="存储容量s">存储容量S</h3>
<p>一般来说，整个存储系统的存储容量即为最后一级存储器的容量，eg:cache + 主存的存储系统容量为主存容量</p>
<h3 id="存储系统的平均每位价格c">存储系统的平均每位价格C</h3>
<h3 id="命中率h">命中率H</h3>
<p>CPU 访问该存储系统时，在M1中找到所需信息的概率</p>
<h3 id="平均访存时间t_a">平均访存时间<span class="math inline">\(T_A\)</span></h3>
<p>命中时间 不命中开销：访一级时间 + 数据传送时间</p>
<h2 id="三级存储系统cache-主存-磁盘">三级存储系统：Cache + 主存 + 磁盘</h2>
<ul>
<li>cache-主存层次：为了弥补主存速度的不足，一般是硬件完成的，对应用程序员和系统程序员是透明的</li>
<li>主存-辅存层次：为了弥补主存容量的不足，常被用于实现虚拟存储器，向编程人员提供用不完的程序空间，主要由软件完成</li>
</ul>
<h2 id="存储层次的四个问题">存储层次的四个问题</h2>
<ul>
<li>映像规则</li>
<li>查找算法</li>
<li>替换算法</li>
<li>写策略</li>
</ul>
<h1 id="cache">Cache</h1>
<h2 id="cache-基本结构及原理">cache 基本结构及原理</h2>
<p>cache是按块管理的，cache和主存均被分成大小相同的块，信息以块为单位调入cache中</p>
<p>主存地址： 块地址（块号） | 块内偏移</p>
<p>主存地址寄存器–》主存-Cache地址转换部件</p>
<p>–》 命中，Cache块地址，根据偏移在Cache存储体中查到对应的数据指令送给CPU</p>
<p>-》 未命中，访主存储器，调入Cache（是否需要替换），送给CPU，或者直接送给CPU提高效率</p>
<h2 id="cache-映像规则">Cache 映像规则</h2>
<h3 id="全相联映射">全相联映射</h3>
<p>主存中的人意块可以放到Cache中的任意一个位置 ### 直接映射 主存中每一块只能放到Cache中的唯一一个位置，对应关系依次循环分配 主存的第i块（块地址为i）映射到Cache的第j块 <span class="math display">\[j = i mod M\]</span> M为Cache的快数， 若<span class="math inline">\(M = 2^m\)</span>，则j实际上是i的低m位（注意是块地址的低m位），可用这m位去进行选择（索引）</p>
<h3 id="组相连映像">组相连映像</h3>
<p>Cache被分为若干组，每个组由若干块组成，主存中每一个块可以放到Cache中唯一一个组的任意一个位置。组的选择通常采用<font color="red">位选择方法</font></p>
<p>对于主存中的第i个块，若它映射到Cache中的组号为j，则 <span class="math display">\[j = i mdo G\]</span> G为Cache的组数，当<span class="math inline">\(G=2^g\)</span>时，k为块号i的低g位，这里的低g位称为索引</p>
<p>如果每组有n 个块，则称该映像规则为n路组相联</p>
<p>n值越大，Cache的空间利用率就越高，块冲突的概率就越低</p>
<h2 id="查找方法">查找方法</h2>
<p>Cache中设置有一个目录表，每一个Cache块在该表中均有唯一的一项，用于指出当前该块存放的信息是哪个主存块的（一般有多个主存块映射到该Cache块，它实际上记录了该主存块的块地址的高位部分，称为标识），每个主存块能唯一地由其标识来确定</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">主存地址：  标识 | 索引 | 块内偏移</div><div class="line">		  ____块地址__</div></pre></td></tr></table></figure>
<h1 id="经典的cpu性能公式">经典的CPU性能公式</h1>
<p>现在我们可以用指令数、CPI和时钟周期时间来写出基本的性能公式：</p>
<p>CPU时间=指令数×CPI×时钟周期时间</p>
<p>CPI（clock cycles per instruction）：每条指令的时钟周期数，表示执行某个程序或者程序片段时每条指令所需的时钟周期平均数。</p>
<p>指令数（instruction count）：执行某程序所需的总指令数量。</p>
<p>或</p>
<p>CPU时间=指令数×CPI/时钟频率</p>
<p>永远记住，唯一能够被完全可靠测量的计算机性能指标是时间。例如，对指令集减少指令数目的改进可能降低时钟周期时间或提高CPI，从而抵消了改进的效果。类似地，CPI与执行的指令类型相关，执行指令数最少的代码其执行速度未必是最快的。</p>
<h1 id="写分配法">写分配法</h1>
<div class="figure">
<embed src="http://netclass.csu.edu.cn/NCourse/hep077/architecture/chapter4/lecture2/htm/lecture2_8.htm">
<p class="caption">张晨曦</p>
</div>
<ol style="list-style-type: decimal">
<li><p>按写分配法：写失效时，先把所写单元所在的块调入 Cache，然后再进行写入。这与读失效类似。这种方法也称为写时取方法。</p></li>
<li><p>不按写分配法：写失效时，直接写入下一级存储器而不将相应的块调入 Cache。这种方法也称为绕写法。</p></li>
</ol>
<h1 id="写策略">写策略</h1>
<p>写Cache时何时更新主存中的内容</p>
<p>写直达法： 执行写操作时，不仅把数据写入Cache中对应的块，还把数据写入下一级存储器 写回法： 拷回法，只把数据写回cache，Cache块被替换时写回下一级存储器</p>
]]></content>
      
        <categories>
            
            <category> 系统结构 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 课程 </tag>
            
            <tag> 系统结构 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[操作系统-页面置换算法]]></title>
      <url>https://qingfeng14.github.io/2017/03/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E9%A1%B5%E9%9D%A2%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<h1 id="置换算法的功能和目标">置换算法的功能和目标</h1>
<h2 id="功能">功能</h2>
<p>当出现<font color="red">缺页异常</font>，需调入新页面而内存已满时，<font color="red">置换算法选择被置换的物理页面</font></p>
<h2 id="设计目标">设计目标</h2>
<ul>
<li>尽可能减少页面的调入调出次数</li>
<li>把未来不再访问或短期内不访问的页面调出</li>
</ul>
<a id="more"></a>
<h2 id="页面锁定frame-locking">页面锁定(frame locking)</h2>
<ul>
<li>描述必须<font color="red">常驻内存</font>的逻辑页面</li>
<li>操作系统的<font color="red">关键部分</font></li>
<li>要求<font color="red">响应速度</font>的代码和数据</li>
<li>页表中的<font color="red">锁定标志位</font>(lock bit)</li>
</ul>
<h2 id="置换算法的评价方法">置换算法的评价方法</h2>
<ul>
<li>记录进程访问内存的页面轨迹</li>
<li>评价：模拟页面置换算法，记录缺页的次数，更少的缺页意味着更好的性能</li>
</ul>
<h1 id="页面置换算法分类">页面置换算法分类</h1>
<ul>
<li>局部页面置换算法：着眼于当前进程 最优算法，先进先出算法，最近最久未使用算法，时钟算法，最不常用算法</li>
<li>全局页面置换算法：着眼于所有可换出的物理页面 工作集算法，缺页率算法</li>
</ul>
<h1 id="局部页面置换算法">局部页面置换算法</h1>
<h2 id="最优页面置换算法-opt">最优页面置换算法 OPT</h2>
<ul>
<li>置换未来最长时间不访问的页面</li>
<li>实际系统中无法实现</li>
</ul>
<h2 id="fifo算法">FIFO算法</h2>
<ul>
<li>思路： 选择在内存中滞留时间最长的页面进行置换</li>
<li>实现：
<ul>
<li>维护一个记录所有位于内存中的逻辑页面链表</li>
<li>链表元素按驻留内存时间排序，链首最长，链尾最短</li>
<li>出现缺页时，选择链首进行置换</li>
</ul></li>
<li>特征：
<ul>
<li>实现简单</li>
<li>性能较差</li>
<li>Belady现象</li>
</ul></li>
</ul>
<h2 id="时钟置换算法">时钟置换算法</h2>
<ul>
<li>思路：对页面的访问情况进行大致统计</li>
<li>实现：
<ul>
<li>在页表项增加访问位，</li>
<li>各页面组织成环形链表</li>
<li>指针指向最先调入的页面</li>
</ul></li>
<li>算法：
<ul>
<li>访问页面时，在页表项记录页面访问情况</li>
<li>缺页时，从指针处开始顺序查找未被访问的页面进行置换</li>
</ul></li>
<li>特征：是LRU和FIFO的折中 【Note】:访问位的标记是硬件自动完成的</li>
<li>具体流程
<ul>
<li>页面装入内存时，访问位初始化为0</li>
<li>访问页面（读/写)时，访问位置1</li>
<li>缺页时，从指针当前位置顺序检查环形链表
<ul>
<li>访问位为0，则置换该页</li>
<li>访问位为1，则访问位置0，并指针移动到下一个页面，</li>
<li>直到找到可置换的页面</li>
</ul></li>
</ul></li>
</ul>
<h1 id="全局页面置换算法">全局页面置换算法</h1>
<h2 id="工作集页置换算法">工作集页置换算法</h2>
<ul>
<li>工作集 <span class="math inline">\(W(t, \Delta)\)</span>
<ul>
<li>t是当前的执行时刻</li>
<li><span class="math inline">\(\Delta\)</span> 是工作集窗口，即一个定长的页面访问时间窗口</li>
<li><span class="math inline">\(W(t,\Delta)\)</span>表示在当前时刻t前的<span class="math inline">\(\Delta\)</span>时间窗口中的所有访问页面所组成的集合</li>
<li><span class="math inline">\(|W(t,\Delta)|\)</span>指工作集的大小，即页面数目</li>
</ul></li>
<li>工作集页置换算法思路：换出不在工作集中的页面</li>
<li>窗口大小<span class="math inline">\(\tau\)</span>:当前时刻前<span class="math inline">\(\tau\)</span>个内存访问的页引用是工作集，<span class="math inline">\(\tau\)</span>被称为窗口大小</li>
<li>实现方法：
<ul>
<li>访存链表：维护窗口内的访存页面链表</li>
<li>访存时，换出不在工作集的页面，更新访存链表</li>
<li>缺页时，换出页面，更新访存链表</li>
</ul></li>
</ul>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 页面置换算法 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[OS-lec9-exercise]]></title>
      <url>https://qingfeng14.github.io/2017/03/24/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/OS-lec9-exercise/</url>
      <content type="html"><![CDATA[<h1 id="lec9-练习题">Lec9 练习题</h1>
<h3 id="物理页帧数量为3且初始时没有对应的虚拟页虚拟页访问序列为01201303103请问采用最优置换算法的缺页次数为4">1. 物理页帧数量为3，且初始时没有对应的虚拟页。虚拟页访问序列为0,1,2,0,1,3,0,3,1,0,3，请问采用最优置换算法的缺页次数为（4）</h3>
<a id="more"></a>
<p>最优置换算法：置换未来最长时间不访问的页面。</p>
<table>
<thead>
<tr class="header">
<th>时间</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>物理页帧</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>0</td>
<td>1</td>
<td>3</td>
<td>0</td>
<td>3</td>
<td>1</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1</td>
<td></td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td></td>
<td></td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="odd">
<td>缺页?</td>
<td>缺页</td>
<td>缺页</td>
<td>缺页</td>
<td></td>
<td></td>
<td>缺页</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>2-&gt;3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>缺页次数为4次</p>
<h3 id="物理页帧数量为3且初始时没有对应的虚拟页虚拟页访问序列为01201303103请问采用fifo置换算法的缺页次数为6">2. 物理页帧数量为3，且初始时没有对应的虚拟页。虚拟页访问序列为0,1,2,0,1,3,0,3,1,0,3，请问采用FIFO置换算法的缺页次数为（6）</h3>
<table>
<thead>
<tr class="header">
<th>时间</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>物理页帧</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>0</td>
<td>1</td>
<td>3</td>
<td>0</td>
<td>3</td>
<td>1</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="odd">
<td>1</td>
<td></td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td></td>
<td></td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>缺页?</td>
<td>缺页</td>
<td>缺页</td>
<td>缺页</td>
<td></td>
<td></td>
<td>缺页</td>
<td>缺页</td>
<td></td>
<td>缺页</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>0-&gt;3</td>
<td>1-&gt;0</td>
<td></td>
<td>2-&gt;1</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>缺页6次</p>
<h3 id="物理页帧数量为4且初始时没有对应的虚拟页虚拟页访问序列为032013431032134请问采用clock置换算法用1个bit表示存在时间的缺页次数为9">3.物理页帧数量为4，且初始时没有对应的虚拟页。虚拟页访问序列为0,3,2,0,1,3,4,3,1,0,3,2,1,3,4，请问采用CLOCK置换算法（用1个bit表示存在时间）的缺页次数为（9）</h3>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/3n3e2V071X1b2e2A3y2J/Image%202017-03-25%20at%207.12.52%20下午.png" alt="题3Clock算法1">
<p class="caption">题3Clock算法1</p>
</div>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/2U2t0i1d2N0C3q1x1E3K/Image%202017-03-25%20at%207.13.20%20下午.png" alt="题3Clock算法2">
<p class="caption">题3Clock算法2</p>
</div>
<p>缺页次数9</p>
<h3 id="物理页帧数量为4且初始时没有对应的虚拟页虚拟页访问序列为032013431032134请问采用clock置换算法用2个关联bit表示存在时间可以表示4的缺页次数为">4. 物理页帧数量为4，且初始时没有对应的虚拟页。虚拟页访问序列为0,3,2,0,1,3,4,3,1,0,3,2,1,3,4，请问采用CLOCK置换算法（用2个关联，bit表示存在时间,可以表示4,）的缺页次数为（）</h3>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/3V1s390F1Z251f3T3V0z/Image%202017-03-25%20at%2010.03.39%20下午.png" alt="题4-1">
<p class="caption">题4-1</p>
</div>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/3v0M0W3c3u340S2M0V0h/Image%202017-03-25%20at%2010.04.57%20下午.png" alt="题4-2">
<p class="caption">题4-2</p>
</div>
<p>缺页次数为8</p>
<h3 id="spoc根据你的学号-mod-4的结果值确定选择四种页面置换算法0lru置换算法1改进的clock页置换算法2工作集页置换算法3缺页率置换算法中的一种来设计一个应用程序可基于pythonruby-c-clisp等模拟实现并给出测试用例和测试结果请参考如python代码或独自实现">5.（spoc）根据你的学号 mod 4的结果值，确定选择四种页面置换算法（0：LRU置换算法，1:改进的clock页置换算法，2：工作集页置换算法，3：缺页率置换算法）中的一种来设计一个应用程序（可基于python,ruby, C, C++，LISP等）模拟实现，并给出测试用例和测试结果。请参考如python代码或独自实现。</h3>
<p>工作集页置换算法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"><span class="comment"># ! /usr/bin/env python</span></div><div class="line"></div><div class="line"><span class="comment"># 工作集页面置换算法</span></div><div class="line"></div><div class="line"><span class="comment"># 访存页面链表</span></div><div class="line">work_list = []</div><div class="line"><span class="comment"># 工作集</span></div><div class="line">work_set = set(work_list)</div><div class="line"><span class="comment"># 窗口大小</span></div><div class="line">t = <span class="number">4</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">access</span><span class="params">(page)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line">    访问页面函数,针对每一个页,进行工作集的更新,访存链表的更新,页面置换</div><div class="line">    :param page:</div><div class="line">    :return:</div><div class="line">    """</div><div class="line">    <span class="keyword">global</span> work_set</div><div class="line">    <span class="keyword">global</span> work_list</div><div class="line">    <span class="comment"># 是否出现页缺失</span></div><div class="line">    miss = <span class="keyword">False</span></div><div class="line">    <span class="keyword">if</span> page <span class="keyword">in</span> work_set:</div><div class="line">        <span class="comment"># 当前页面在工作集中,表示命中</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"命中页面"</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        miss = <span class="keyword">True</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"页缺失"</span></div><div class="line">    work_list.append(page)</div><div class="line">    <span class="comment"># 删除第一个页面</span></div><div class="line">    first = work_list[<span class="number">0</span>]</div><div class="line">    <span class="keyword">if</span> len(work_list) &gt; t:</div><div class="line">        <span class="comment"># 已经超出工作集,去除列表首页</span></div><div class="line">        <span class="keyword">del</span> work_list[<span class="number">0</span>]</div><div class="line">    work_set = set(work_list)</div><div class="line">    <span class="keyword">if</span> first <span class="keyword">not</span> <span class="keyword">in</span> work_set:</div><div class="line">        <span class="keyword">print</span> <span class="string">'page %s 换出'</span> % first</div><div class="line">    <span class="keyword">if</span> miss:</div><div class="line">        <span class="keyword">print</span> <span class="string">"page %s 换入"</span> % page</div><div class="line">    <span class="keyword">print</span> <span class="string">"当前访存链表:"</span>, work_list</div><div class="line">    <span class="keyword">print</span> <span class="string">"当前工作集:"</span>, work_set</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">access_pages</span><span class="params">(pages, input_work_list)</span>:</span></div><div class="line">    <span class="keyword">global</span> work_set</div><div class="line">    <span class="keyword">global</span> work_list</div><div class="line">    work_list = input_work_list</div><div class="line">    work_set = set(input_work_list)</div><div class="line">    <span class="keyword">print</span> <span class="string">"页面访问顺序为:"</span>, pages</div><div class="line">    <span class="keyword">print</span> <span class="string">"初始工作集:"</span>, work_set</div><div class="line">    <span class="keyword">print</span> <span class="string">"初始访问列表:"</span>, work_list</div><div class="line">    pages = pages.split(<span class="string">','</span>)</div><div class="line">    count = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> pages:</div><div class="line">        count += <span class="number">1</span></div><div class="line">        <span class="keyword">print</span> <span class="string">'Page '</span>, count, i,</div><div class="line">        access(i)</div><div class="line">        <span class="keyword">print</span> <span class="string">''</span></div><div class="line">    <span class="comment"># 访问完成之后清空</span></div><div class="line">    work_list = []</div><div class="line">    work_set = set(work_list)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">"这是一个工作集置换算法的简单实现"</span></div><div class="line"></div><div class="line">    log = <span class="string">'''</span></div><div class="line">    t = 4</div><div class="line">    test_pages = "c,c,d,b,c,e,c,e,a,d"</div><div class="line">    test_work_str = "e,d,a"</div><div class="line">    '''</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">"课件中测试集:"</span>, log</div><div class="line">    t = input(<span class="string">"窗口大小t="</span>)</div><div class="line">    <span class="keyword">assert</span> (int(t) &gt; <span class="number">0</span>)</div><div class="line">    <span class="comment"># 访问页面顺序</span></div><div class="line">    test_pages = raw_input(<span class="string">'测试页面顺序(以,隔开,如e,d,a,c,c) test_pages='</span>)</div><div class="line">    test_work_str = raw_input(<span class="string">'此前访问的t个页面顺序为(如e,d,a)test_work_str='</span>)</div><div class="line">    test_work_list = test_work_str.split(<span class="string">','</span>)</div><div class="line">    <span class="keyword">print</span> test_work_list</div><div class="line">    <span class="keyword">assert</span> (len(test_work_list) &lt;= t)</div><div class="line">    <span class="comment"># test_pages = "e,d,a,c,c,d,b,c,e,c,e,a,d"</span></div><div class="line">    access_pages(test_pages, test_work_list)</div></pre></td></tr></table></figure>
<p>测试用例使用课本中的访问顺序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">页面访问顺序为: c,c,d,b,c,e,c,e,a,d</div><div class="line">初始工作集: set([&apos;a&apos;, &apos;e&apos;, &apos;d&apos;])</div><div class="line">初始访问列表: [&apos;e&apos;, &apos;d&apos;, &apos;a&apos;]</div><div class="line">Page  1 c 页缺失</div><div class="line">page c 换入</div><div class="line">当前访存链表: [&apos;e&apos;, &apos;d&apos;, &apos;a&apos;, &apos;c&apos;]</div><div class="line">当前工作集: set([&apos;a&apos;, &apos;c&apos;, &apos;e&apos;, &apos;d&apos;])</div><div class="line"></div><div class="line">Page  2 c 命中页面</div><div class="line">page e 换出</div><div class="line">当前访存链表: [&apos;d&apos;, &apos;a&apos;, &apos;c&apos;, &apos;c&apos;]</div><div class="line">当前工作集: set([&apos;a&apos;, &apos;c&apos;, &apos;d&apos;])</div><div class="line"></div><div class="line">Page  3 d 命中页面</div><div class="line">当前访存链表: [&apos;a&apos;, &apos;c&apos;, &apos;c&apos;, &apos;d&apos;]</div><div class="line">当前工作集: set([&apos;a&apos;, &apos;c&apos;, &apos;d&apos;])</div><div class="line"></div><div class="line">Page  4 b 页缺失</div><div class="line">page a 换出</div><div class="line">page b 换入</div><div class="line">当前访存链表: [&apos;c&apos;, &apos;c&apos;, &apos;d&apos;, &apos;b&apos;]</div><div class="line">当前工作集: set([&apos;c&apos;, &apos;b&apos;, &apos;d&apos;])</div><div class="line"></div><div class="line">Page  5 c 命中页面</div><div class="line">当前访存链表: [&apos;c&apos;, &apos;d&apos;, &apos;b&apos;, &apos;c&apos;]</div><div class="line">当前工作集: set([&apos;c&apos;, &apos;b&apos;, &apos;d&apos;])</div><div class="line"></div><div class="line">Page  6 e 页缺失</div><div class="line">page e 换入</div><div class="line">当前访存链表: [&apos;d&apos;, &apos;b&apos;, &apos;c&apos;, &apos;e&apos;]</div><div class="line">当前工作集: set([&apos;c&apos;, &apos;b&apos;, &apos;e&apos;, &apos;d&apos;])</div><div class="line"></div><div class="line">Page  7 c 命中页面</div><div class="line">page d 换出</div><div class="line">当前访存链表: [&apos;b&apos;, &apos;c&apos;, &apos;e&apos;, &apos;c&apos;]</div><div class="line">当前工作集: set([&apos;c&apos;, &apos;b&apos;, &apos;e&apos;])</div><div class="line"></div><div class="line">Page  8 e 命中页面</div><div class="line">page b 换出</div><div class="line">当前访存链表: [&apos;c&apos;, &apos;e&apos;, &apos;c&apos;, &apos;e&apos;]</div><div class="line">当前工作集: set([&apos;c&apos;, &apos;e&apos;])</div><div class="line"></div><div class="line">Page  9 a 页缺失</div><div class="line">page a 换入</div><div class="line">当前访存链表: [&apos;e&apos;, &apos;c&apos;, &apos;e&apos;, &apos;a&apos;]</div><div class="line">当前工作集: set([&apos;a&apos;, &apos;c&apos;, &apos;e&apos;])</div><div class="line"></div><div class="line">Page  10 d 页缺失</div><div class="line">page d 换入</div><div class="line">当前访存链表: [&apos;c&apos;, &apos;e&apos;, &apos;a&apos;, &apos;d&apos;]</div><div class="line">当前工作集: set([&apos;a&apos;, &apos;c&apos;, &apos;e&apos;, &apos;d&apos;])</div></pre></td></tr></table></figure>
<h3 id="请判断optlrufifoclock和lfu等各页面置换算法是否存在belady现象如果存在给出实例如果不存在给出证明">6. 请判断OPT、LRU、FIFO、Clock和LFU等各页面置换算法是否存在Belady现象？如果存在，给出实例；如果不存在，给出证明。</h3>
<h4 id="fifo存在belady现象例子">FIFO：存在Belady现象，例子</h4>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/3m0B3F3Z0O2G2v2Q0d36/Image%202017-03-25%20at%2010.01.57%20下午.png" alt="FIFO算法">
<p class="caption">FIFO算法</p>
</div>
<p>物理页面增加，缺失数次数反而升高，出现了Belady现象</p>
<h4 id="lru不存在belady现象">LRU:不存在Belady现象</h4>
<p>证明：对于确定的页面访问序列PagesList,设其分配的物理页面数为n， 当访问PagesList[i]页面时发生了缺页(易知i&gt;n)，即页面PagesList[i]不在页面i-n到i-1这n个页面中，进而发生了缺页异常，而加大n至n1, PagesList[i]有可能在i-n1 至 i-1这n1个页面中，也可能不在，前者此时不会发生缺页异常，后者仍然会发生，但无论如何，分配的物理页面数增加时，其缺页数可能持平，也可能减少，但不可能增加。</p>
<h4 id="opt不存在belady现象">OPT:不存在Belady现象</h4>
<p>最优置换算法置换出未来最长时间不访问的页面，这就意味着分配物理页数目为n时，置换一次页面之后，至少n次访问不会出现缺页，而n增大时，可以将缺页继续向后推迟，进而n增大时缺页数不可能会反而增加</p>
<h4 id="lfuclock不存在belady现象">LFU,Clock:不存在Belady现象</h4>
<p>实际上，堆栈式页面置换算法都不会产生Belady现象，LRU,OPT，LFU,Clock均属于堆栈式页面置换算法，在堆栈式页面置换算法中，页面优先级的分配是独立于页面帧数的，对于堆栈式页面置换算法，分配的物理页面帧数增加时可以使得其缺页数减少，而FIFO这类算法，其替换页面的优先级决定于其分配的物理页面帧数，因此在这种情况下可能会出现Belady现象，而堆栈式算法则不会出现这样的状况。</p>
<p>参考资料:</p>
<ul>
<li><a href="http://www.eecs.berkeley.edu/Pubs/TechRpts/1987/CSD-87-358.pdf" target="_blank" rel="external">Efficient (stack) algorithms for analysis of write-back and sector memories</a> [http://www.eecs.berkeley.edu/Pubs/TechRpts/1987/CSD-87-358.pdf section 1.3]</li>
<li><a href="http://cseweb.ucsd.edu/classes/sp02/cse120_B/stack.html" target="_blank" rel="external">Principles of Computer Operating Systemm Stack Page Replacement Policies</a> [http://cseweb.ucsd.edu/classes/sp02/cse120_B/stack.html]</li>
</ul>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> 作业 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ucore_lab]]></title>
      <url>https://qingfeng14.github.io/2017/03/23/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ucore-lab/</url>
      <content type="html"><![CDATA[<h1 id="ucore_lab-实验中一些重要结构体参数的含义">ucore_lab 实验中一些重要结构体参数的含义</h1>
<h2 id="page结构体">Page结构体</h2>
<p>每个Page描述了一个物理页</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">/* *</div><div class="line"> * struct Page - Page descriptor structures. Each Page describes one</div><div class="line"> * physical page. In kern/mm/pmm.h, you can find lots of useful functions</div><div class="line"> * that convert Page to other data types, such as phyical address.</div><div class="line"> * */</div><div class="line">struct Page &#123;</div><div class="line">    int ref;                        // page frame&apos;s reference counter</div><div class="line">    // 页帧的reference</div><div class="line">    uint32_t flags;                 // array of flags that describe the status </div><div class="line">    of the page frame</div><div class="line">    // 描述页帧的标记位， unsigned int</div><div class="line">    unsigned int property;          // the num of free block, used in first fit pm manager</div><div class="line">    // 空闲块的数量， 用于first fit算法</div><div class="line">    list_entry_t page_link;         // free list link</div><div class="line">    // page_link</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="set_bit-clear_bit宏">set_bit, clear_bit宏</h1>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">set_bit(<span class="keyword">int</span> nr,<span class="keyword">void</span> *addr)；</div><div class="line"><span class="comment">// 将addr中第nr位的值置为1 返回addr原第nr为的值，即0或者1</span></div><div class="line">clear_bit(<span class="keyword">int</span> nr,<span class="keyword">void</span> *addr)；</div><div class="line"><span class="comment">// 将addr中第nr位的值置为0 返回addr原第nr为的值的反码</span></div><div class="line">test_bit(<span class="keyword">int</span> nr, <span class="keyword">volatile</span> <span class="keyword">void</span> *addr) </div><div class="line"><span class="comment">// 改为是否为1， 是1返回1，是0返回0</span></div></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SetPageReserved(page)       set_bit(PG_reserved, &amp;((page)-&gt;flags))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ClearPageReserved(page)     clear_bit(PG_reserved, &amp;((page)-&gt;flags))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PageReserved(page)          test_bit(PG_reserved, &amp;((page)-&gt;flags))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SetPageProperty(page)       set_bit(PG_property, &amp;((page)-&gt;flags))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ClearPageProperty(page)     clear_bit(PG_property, &amp;((page)-&gt;flags))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PageProperty(page)          test_bit(PG_property, &amp;((page)-&gt;flags))</span></div></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PG_reserved                 0       <span class="comment">// if this bit=1: the Page is reserved for kernel, cannot be used in alloc/free_pages; otherwise, this bit=0 </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PG_property                 1       <span class="comment">// if this bit=1: the Page is the head page of a free memory block(contains some continuous_addrress pages), and can be used in alloc_pages; if this bit=0: if the Page is the the head page of a free memory block, then this Page and the mem. Or this Page isn't the head page.</span></span></div></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// convert list entry to page</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> le2page(le, member)            to_struct((le), struct Page, member)</span></div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> 操作系统 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 操作系统 </tag>
            
            <tag> ucore_lab </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[数值分析]]></title>
      <url>https://qingfeng14.github.io/2017/03/21/%E6%95%B0%E5%80%BC%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>设𝑨,𝑩,𝑪均为𝑛×𝑛矩阵，且𝑩、𝑪非奇异，𝒃是𝑛维向量，要计算<span class="math inline">\(𝒙 = B^{-1} (2A+I)(C^{-1}+A)b\)</span>, 请给出一个合理、高效率的算法流程.</p>
<a id="more"></a>
<p><span class="math display">\[y1 = C^{-1}b\]</span> <span class="math display">\[y2 = y1 + Ab\]</span> <span class="math display">\[y_3 = 2(Ay_2) + y_2\]</span> <span class="math display">\[ x = B^{-1}y_3\]</span></p>
<p>如果A的每个对角元的绝对值都比所在行的非对角元的绝对值的和要大,即 <span class="math display">\[|a_{ii}|&gt;sum{j!=i}|a_{ij}|\]</span> 对所有的i成立,那么称A是<font color="red">（行）严格对角占优阵</font>. 如果A’是行严格对角占优阵,那么称A是<font color="red">列严格对角占优阵</font>. 习惯上如果不指明哪种类型的话就认为是行对角占优.</p>
<h1 id="矩阵特征值的几何意义">矩阵特征值的几何意义</h1>
<p>矩阵乘法对应了一个<font color="red">变换</font>，是<font color="red">把任意一个向量变成另一个方向或长度都大多不同的新向量</font>。在这个变换的过程中，原向量主要发生<font color="red">旋转、伸缩</font>的变化。如果矩阵对某一个向量或某些向量只发生<font color="red">伸缩变换</font>，<font color="red">不对这些向量产生旋转的效果，那么这些向量就称为这个矩阵的特征向量</font>，<font color="red">伸缩的比例就是特征值</font>。</p>
<p>实际上，上述的一段话既讲了矩阵变换特征值及特征向量的几何意义（图形变换）也讲了其物理含义。物理的含义就是运动的图景：特征向量在一个矩阵的作用下作伸缩运动，伸缩的幅度由特征值确定。特征值大于1，所有属于此特征值的特征向量身形暴长；特征值大于0小于1，特征向量身形猛缩；特征值小于0，特征向量缩过了界，反方向到0点那边去了。</p>
<h1 id="特征值及特征向量定义">特征值及特征向量定义</h1>
<p>定义 设A是n阶方阵，如果数λ和n维非零列向量x使关系式</p>
<p>Ax=λx (1)</p>
<p>成立，那么这样的数λ称为矩阵A特征值，非零向量x称为A的对应于特征值λ的特征向量．（1）式也可写成，</p>
<p>( A-λE)X=0 (2)</p>
<p>这是n个未知数n个方程的齐次线性方程组，它有非零解的充分必要条件是系数行列式</p>
<p>|A-λE|=0 , (3)</p>
<h1 id="特征值-来自维基百科的解释">特征值 来自维基百科的解释</h1>
<p>在数学上，特别是线性代数中，对于一个给定的线性变换<span class="math inline">\(A\)</span>，它的特征向量（eigenvector，也译固有向量或本征向量）<span class="math inline">\(v\)</span> 经过这个线性变换之后，得到的新向量仍然与原来的<span class="math inline">\(v\)</span>保持在同一条直线上，但其长度或方向也许会改变。即</p>
<p><span class="math display">\[ Av=\lambda v\]</span></p>
<p><span class="math inline">\(\lambda\)</span> 为标量，即特征向量的长度在该线性变换下缩放的比例，称 <span class="math inline">\(\lambda\)</span> 为其特征值（本征值）。如果特征值为正，则表示<span class="math inline">\(v\)</span>在经过线性变换的作用后方向也不变；如果特征值为负，说明方向会反转；如果特征值为0，则是表示缩回零点。但无论怎样，仍在同一条直线上。图1给出了一个以著名油画《蒙娜丽莎》为题材的例子。在一定条件下（<font color="red">如其矩阵形式为实对称矩阵的线性变换）</font>，一个变换可以由其特征值和特征向量完全表述，<font color="red">也就是说：所有的特征向量组成了这向量空间的一组基底。</font>一个特征空间(eigenspace)是具有相同特征值的特征向量与一个同维数的零向量的集合，可以证明该集合是一个线性子空间，比如 <span class="math display">\[ E_{\lambda}=\{u \in V\mid Au=\lambda u\}\]</span> 即为线性变换 A中以λ为特征值的特征空间。</p>
<p>这些概念在纯数学和应用数学的众多领域中都有重要的应用。在线性代数和泛函分析之外，甚至在一些非线性的情况下，这些概念都是十分重要的。</p>
<p><span class="math inline">\(\mathbf{A}\)</span>的特征向量<span class="math inline">\(\mathbf {x}\)</span> ，按照定义，是在变换 <span class="math inline">\(\mathbf{A}\)</span>的作用下会得到 <span class="math inline">\(\mathbf {x}\)</span> 自身的若干倍的非零向量。假设在 <span class="math inline">\(\mathbf{A}\)</span>的作用下 <span class="math inline">\(\mathbf {x}\)</span> 变成了自身的 <span class="math inline">\(\lambda\)</span> 倍，也就是 <span class="math inline">\(\mathbf{A} \mathbf{x} = \lambda \mathbf{x}\)</span> 在等式两边的左侧乘以单位矩阵I，得到 <span class="math display">\[\mathbf{IA} \mathbf{x} =\mathbf{I} \cdot \lambda \mathbf{x} \]</span></p>
<p><span class="math inline">\(\mathbf{A}\mathbf{x} = (\lambda I)\mathbf{x}\)</span> 因此</p>
<p><span class="math inline">\((\mathbf{A}-\lambda \mathbf{I}) \mathbf{x}=0\)</span> 根据线性方程组理论，为了使这个方程有非零解，矩阵</p>
<p><span class="math inline">\(\mathbf{A}-\lambda \mathbf{I}\)</span>的行列式必须是零：</p>
<p><span class="math display">\[\det(\mathbf{A}-\lambda \mathbf{I}) = 0\]</span> 按照行列式的展开定义，上面式子的左端是一个关于 <span class="math inline">\(\lambda\)</span> 的多项式，称为特征多项式。这个多项式的系数只和 <span class="math inline">\(\mathbf{A}\)</span>有关。在这个例子中，可以计算这个特征多项式： <span class="math display">\[\det\!\left(\begin{bmatrix}1 &amp; 0\\ -\frac{1}{2} &amp; 1\end{bmatrix} - \lambda\begin{bmatrix}1 &amp; 0\\ 0 &amp; 1\end{bmatrix} \right)=(1-\lambda)^2\]</span> 在这种情况下特征多项式的方程变成 <span class="math display">\[(1-\lambda)^2 = 0\]</span>它的唯一的解是： <span class="math inline">\(\lambda=1\)</span>。这就是矩阵 <span class="math inline">\(\mathbf{A}\)</span>的特征值。 找到特征值 <span class="math inline">\(\lambda=1\)</span>后，就可以找出 <span class="math display">\[(\mathbf{A}-\lambda \mathbf{I}) \mathbf{x}=0\]</span> 的非零解，也就是特征向量了。在例子中： <span class="math display">\[\begin{bmatrix}1-\lambda &amp; 0\\ -\frac{1}{2} &amp; 1-\lambda \end{bmatrix}\begin{bmatrix}x_1\\ x_2\end{bmatrix}=0\]</span> 将<span class="math inline">\(\lambda=1\)</span>代入，就有 <span class="math display">\[\begin{bmatrix}0 &amp; 0\\ -\frac{1}{2} &amp; 0 \end{bmatrix}\begin{bmatrix}x_1\\ x_2\end{bmatrix}=0\]</span> 解这个新矩阵方程，得到如下形式的解： <span class="math display">\[\mathbf{x} = \begin{bmatrix}0\\ c\end{bmatrix}\]</span> 这里的c是任意非零常量。因此，矩阵<span class="math inline">\(\mathbf{A}\)</span>的特征向量就是所有竖直方向的向量（比如图中红色箭头代表的向量）。</p>
<h1 id="正定矩阵的判定">正定矩阵的判定</h1>
<ul>
<li>判定定理1：对称阵A为正定的充分必要条件是：A的特征值全为正。</li>
<li>判定定理2：对称阵A为正定的充分必要条件是：A的各阶顺序主子式都为正。</li>
<li>判定定理3：任意阵A为正定的充分必要条件是：A合同于单位阵。</li>
</ul>
]]></content>
      
        <categories>
            
            <category> 数值分析 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 课程 </tag>
            
            <tag> 数值分析 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[lec8 SPOC思考题]]></title>
      <url>https://qingfeng14.github.io/2017/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/lec8-SPOC%E6%80%9D%E8%80%83%E9%A2%98/</url>
      <content type="html"><![CDATA[<h1 id="内存访问局部性的应用程序例子">内存访问局部性的应用程序例子</h1>
<p>(1)(w4l2)下面是一个体现内存访问局部性好的简单应用程序例子，请参考，在linux中写一个简单应用程序，体现内存局部性差，并给出其执行时间。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NUM 1024</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> COUNT 10</span></div><div class="line"><span class="keyword">int</span> A[NUM][NUM];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">  <span class="keyword">int</span> i,j,k;</div><div class="line">  <span class="keyword">for</span> (k = <span class="number">0</span>; k&lt;COUNT; k++)</div><div class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; NUM; i++)</div><div class="line">  <span class="keyword">for</span> (j = <span class="number">0</span>; j  &lt; NUM; j++)</div><div class="line">      A[i][j] = i+j;</div><div class="line">  <span class="built_in">printf</span>(<span class="string">"%d count computing over!\n"</span>,i*j*k);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以用下的命令来编译和运行此程序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gcc -O0 -o goodlocality goodlocality.c</div><div class="line">time ./goodlocality</div></pre></td></tr></table></figure>
<p>可以看到其执行时间。</p>
<p>执行该段代码，输出的执行时间为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">real    0m0.045s</div><div class="line">user    0m0.043s</div><div class="line">sys     0m0.002s</div></pre></td></tr></table></figure>
<p>将i、j顺序调换，更改数组访问时间之后</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NUM 1024</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> COUNT 10</span></div><div class="line"><span class="keyword">int</span> A[NUM][NUM];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">  <span class="keyword">int</span> i,j,k;</div><div class="line">  <span class="keyword">for</span> (k = <span class="number">0</span>; k&lt;COUNT; k++)</div><div class="line">  <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; NUM; j++)</div><div class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; NUM; i++)</div><div class="line">      A[i][j] = i+j;</div><div class="line">  <span class="built_in">printf</span>(<span class="string">"%d count computing over!\n"</span>,i*j*k);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="number">10485760</span> count computing over!</div><div class="line"></div><div class="line">real    <span class="number">0</span>m0<span class="number">.266</span>s</div><div class="line">user    <span class="number">0</span>m0<span class="number">.251</span>s</div><div class="line">sys     <span class="number">0</span>m0<span class="number">.014</span>s</div></pre></td></tr></table></figure>
<p>更换ij顺序之后，局部性较差，执行时间也就相应较长，因为数组在存储器中是按照行顺序的存储的，而CPU提取cache中数据时会将其相邻位置数据载入，缺页的加载也是以页为单位的载入，因此，行扫描时数据缺失的情况会更少，执行时间会更短。</p>
<h1 id="缺页异常嵌套">缺页异常嵌套</h1>
<p>（1）缺页异常可用于虚拟内存管理中。如果在中断服务例程中进行缺页异常的处理时，再次出现缺页异常，这时计算机系统（软件或硬件）会如何处理？请给出你的合理设计和解释。</p>
<p>参考条目：</p>
<ol style="list-style-type: decimal">
<li><a href="http://www.lenky.info/archives/2012/04/1479" target="_blank" rel="external">Lenky @ Double Fault &amp; Triple Fault</a> [http://www.lenky.info/archives/2012/04/1479]</li>
<li><a href="https://en.wikipedia.org/wiki/Double_fault" target="_blank" rel="external">Wiki Double_fault</a> [https://en.wikipedia.org/wiki/Double_fault]</li>
<li><a href="https://en.wikipedia.org/wiki/Triple_fault" target="_blank" rel="external">Wiki Triple_fault</a> [https://en.wikipedia.org/wiki/Triple_fault]</li>
</ol>
<p>解答: 在中断服务例程中进行缺页异常处理时，系统处于内核态，此时如果再次出现缺页异常，也就意味着内核出现了问题，（这种现象称为Double Fault）,由参考条目1中的提示可知，在x86中，发生Double Fault的情况有以下几种：</p>
<table>
<thead>
<tr class="header">
<th><strong>First Exception</strong></th>
<th><strong>Second Exception</strong></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>Benign</td>
<td>Contributory</td>
<td>Page Fault</td>
</tr>
<tr class="even">
<td>Benign</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="odd">
<td>Contributory</td>
<td>x</td>
<td>Double Fault</td>
<td>x</td>
</tr>
<tr class="even">
<td>Page Fault</td>
<td>x</td>
<td>Double Fault</td>
<td>Double Fault</td>
</tr>
</tbody>
</table>
<p>在遇到Double Fault时，操作系统无法对这种异常进行恢复，但会收集相关的信息，关闭对应的程序和服务，而如果此时处理Double Fault异常的函数也出现了异常，则会进一步发生Triple Fault，这时CPU只能进行机器的重启。</p>
<h1 id="缺页中断次数计算">缺页中断次数计算</h1>
<p>（2）如果80386机器的一条机器指令(指字长4个字节)，其功能是把一个32位字的数据装入寄存器，指令本身包含了要装入的字所在的32位地址。这个过程最多会引起几次缺页中断？</p>
<blockquote>
<p>提示：内存中的指令和数据的地址需要考虑地址对齐和不对齐两种情况。需要考虑页目录表项invalid、页表项invalid、TLB缺失等是否会产生中断？</p>
</blockquote>
<p>解答：指令字长4字节，在极端情况下有可能恰好在两个相邻页的中间，进而取指令时会引发两次缺页中断，而数据也是4字节，与之相似，最多可引发两次缺页中断，从而这个过程最多可引起4次缺页中断。</p>
<p>补充：在x86中，TLB缺失是由硬件进行处理的，不会触发中断，而页表是常驻内存的，不会触发中断，例如，对于二级页表来说，页目录项为invalid时，其对应的页表实际上并不存在，当实际需要时动态进行分配，但是并不会产生异常。页表项为invalid时，其页表中存储了其在磁盘中的索引,或者该映射既没有在内存中，也没有在硬盘上，但是这些都不会产生缺页中断。</p>
<h1 id="虚拟页式存储的地址转换">虚拟页式存储的地址转换</h1>
<p>（3）(spoc) 有一台假想的计算机，页大小（page size）为32 Bytes，支持8KB的虚拟地址空间（virtual address space）,有4KB的物理内存空间（physical memory），采用二级页表，一个页目录项（page directory entry ，PDE）大小为1 Byte,一个页表项（page-table entries PTEs）大小为1 Byte，1个页目录表大小为32 Bytes，1个页表大小为32 Bytes。页目录基址寄存器（page directory base register，PDBR）保存了页目录表的物理地址（按页对齐）。</p>
<p>PTE格式（8 bit） : <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">VALID | PFN6 ... PFN0</div></pre></td></tr></table></figure></p>
<p>PDE格式（8 bit） : <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">VALID | PT6 ... PT0</div></pre></td></tr></table></figure></p>
<p>其 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">VALID==1表示，表示映射存在；VALID==0表示，表示内存映射不存在（有两种情况：a.对应的物理页帧swap out在硬盘上；b.既没有在内存中，页没有在硬盘上，这时页帧号为0x7F）。</div><div class="line">PFN6..0:页帧号或外存中的后备页号</div><div class="line">PT6..0:页表的物理基址&gt;&gt;5</div></pre></td></tr></table></figure></p>
<p>已经建立好了1个页目录表和8个页表，且页目录表的index为0~7的页目录项分别对应了这8个页表。</p>
<p>在<a href="./04-1-spoc-memdiskdata.md">物理内存模拟数据文件</a>中，给出了4KB物理内存空间和4KBdisk空间的值，PDBR的值。</p>
<p>请手工计算后回答下列虚地址是否有合法对应的物理内存，请给出对应的pde index, pde contents, pte index, pte contents，the value of addr in phy page OR disk sector。 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1) Virtual Address 6653:</div><div class="line">2) Virtual Address 1c13:</div><div class="line">3) Virtual Address 6890:</div><div class="line">4) Virtual Address 0af6:</div><div class="line">5) Virtual Address 1e6f:</div></pre></td></tr></table></figure></p>
<p>解答：根据 <code>04-1-spoc-memdiskdata.md</code>物理内存模拟数据文件， PDBR 值为 0xd80, 对应页号为0x6c, 8KB的虚拟地址空间需要13bit编址， 4KB物理地址需要12bit编址，一级页表中页目录项需要5bit定位，二级页表中页表项需要5bit定位，页内偏移用5bit编址，页帧号用7bit编址</p>
<p>题目中给出的是16bit虚拟地址，其中14-10位页目录项的index， 9-5位为页表项的index， 4-0位为页内偏移</p>
<ol style="list-style-type: decimal">
<li>Virtual Address 6653:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">0 110_01 10_010 1_0011</div><div class="line"> 	--&gt; pde index: 0x19(11001) pde contents: (valid 0x0, pt 0x7f)</div><div class="line">	--&gt; Fault (page directory entry not valid)</div></pre></td></tr></table></figure>
<p>2)Virtual Address 1c13:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">0001 1100 0001 0011</div><div class="line">0 001_11 00_000 1_0011</div><div class="line">--&gt; pde index:0x07  pde contents:(0xbd, 1 011 1101, valid 1, pfn 0x3d)</div><div class="line">  --&gt; pte index:0x00, 页号0x3d  pte contents:(valid 1, pfn 0x76)</div><div class="line">    --&gt; Page 76 ,To Physical Address 0xed3(0 1110 1101 0011) --&gt; Value: 02</div></pre></td></tr></table></figure>
<p>3)Virtual Address 6890:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">0110 1000 1001 0000</div><div class="line">0 110_10 00_100 1_0000</div><div class="line">--&gt; pde index:0x1a  pde contents:(valid 0, pfn 0x7f)</div><div class="line">--&gt; Fault (page directory entry not valid)</div></pre></td></tr></table></figure>
<p>4)Virtual Address 0af6:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">0000 1010 1111 0110</div><div class="line">0 000_10 10_111 1_0110</div><div class="line">--&gt; pde index:0x02  pde contents:(0xa1(1 010 0001), valid 1, pfn 0x21)</div><div class="line">  --&gt; pte index:0x17 页号0x21  pte contents:(valid 0, pfn 0x7f)</div><div class="line">    --&gt; Fault (page directory entry not valid)</div></pre></td></tr></table></figure>
<p>5)Virtual Address 1e6f:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> 0 001_11 10_011 0_1111</div><div class="line"> --&gt; pde index:0x7  pde contents:(0xbd, valid 1, pfn 0x3d)</div><div class="line">   --&gt; pte index:0x13, 页号0x3d  pte contents:(0x16, valid 0, pfn 0x16)</div><div class="line">--&gt; To Disk Sector Address 0x2cf (0010 1100 1111) --&gt; Value: 1c</div></pre></td></tr></table></figure>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[机器学习-朴素贝叶斯]]></title>
      <url>https://qingfeng14.github.io/2017/03/19/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF/</url>
      <content type="html"><![CDATA[<h1 id="朴素贝叶斯原理">朴素贝叶斯原理</h1>
<p><a href="https://github.com/yourtion/DataminingGuideBook" target="_blank" rel="external">youryion数据挖掘指导</a></p>
<p>朴素贝叶斯法属于一种分类方法，基于<font color="red">特征条件独立假设</font>学习<font color="red">输入输出的联合概率分布</font>，以此为模型，对于给定的输入x，利用贝叶斯定理求出<font color="red">后验概率最大的输出y。</font></p>
<p>简单有效，是一种常用的机器学习方法.</p>
<a id="more"></a>
<ul>
<li>设输入空间 <span class="math inline">\(X \subseteq R^n\)</span>为n维向量的集合</li>
<li>输出空间为类标记集合 <span class="math inline">\(Y=c_1, c_2,\cdots,c_k\)</span></li>
<li>X是定义在<font color="red">输入空间</font>上的随机变量</li>
<li>Y是定义在输出空间上的随机变量</li>
<li>P(X,Y)是X和Y的联合概率分布</li>
<li><span class="math inline">\(T = (x_1, y_1), (x_2, y_2), \cdots, (x_N, y_N)\)</span>是由P(X,Y)<font color="red">独立同分布</font>产生的训练集</li>
</ul>
<h1 id="贝叶斯法则">贝叶斯法则</h1>
<p>条件概率</p>
<p>条件概率表示为P（A|B），读作“在B条件下A的概率”。</p>
<p>若只有两个事件A，B，那么 <span class="math display">\[P(A|B) = \frac{P(AB)}{P(B)}\]</span></p>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/3H2A1k1M0B0G0e1Y2z0J/Image%202017-03-19%20at%201.16.18%20下午.png" alt="贝叶斯法则">
<p class="caption">贝叶斯法则</p>
</div>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/1e1r1i0J2l2T1V332H2C/Image%202017-03-19%20at%201.36.53%20下午.png">

</div>
<p>引入独立性假设</p>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/3B1d3L1A2D42390u3c2g/Image%202017-03-19%20at%201.38.11%20下午.png">

</div>
<p>得到朴素贝叶斯分类器</p>
<div class="figure">
<embed src="https://d3uepj124s5rcx.cloudfront.net/items/2I3E2O0P2k2O2B1L2I3P/Image%202017-03-19%20at%201.39.01%20下午.png?v=ed93793c">

</div>
<p>拉普拉斯平滑</p>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/2E3p06433b2e241u0i1d/Image%202017-03-19%20at%201.41.19%20下午.png">

</div>
]]></content>
      
        <categories>
            
            <category> 机器学习 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 实验 </tag>
            
            <tag> 机器学习 </tag>
            
            <tag> 朴素贝叶斯 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[机器学习实验-朴素贝叶斯分类器]]></title>
      <url>https://qingfeng14.github.io/2017/03/18/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E9%AA%8C-%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/</url>
      <content type="html"><![CDATA[<h1 id="提示个人联系方式及代码简要说明运行方式在readme.md文件中">提示：个人联系方式及代码简要说明、运行方式在README.md文件中</h1>
<h1 id="实验目的">实验目的</h1>
<ul>
<li>在真实数据集上实现朴素贝叶斯分类器，并验证其分类效果</li>
<li>了解如何在测试数据集上实现一个机器学习算法</li>
<li>了解如何评价分类效果</li>
<li>了解如果分析实验结果</li>
</ul>
<a id="more"></a>
<h1 id="算法实现原理">算法实现原理</h1>
<p>假设各条件相互间独立，即<span class="math display">\[P(y|x_1,\cdots,x_n)P(y) \propto \prod_{i=1}^{n}P(x_i|y)\]</span></p>
<p>在训练时训练 <span class="math inline">\(P(y)\)</span> 以及<span class="math inline">\(P(x_i|y)\)</span></p>
<p>测试时输出 <span class="math display">\[\hat y = argmax_yP(y)\prod_{i=1}^{n}P(x_i|y)\]</span></p>
<h1 id="数据集处理">数据集处理</h1>
<h2 id="数据集描述">数据集描述</h2>
<p>实验给定了Adult数据集，其中adult.train为训练集（32561条数据），adult.test为测试集(16281条数据)，每行数据代表一个人，共有15个维度的特征，最后一个特征为该人的收入是否超过了50K。</p>
<p>数据集中部分特征是连续数据，部分数据可能未知(用?表示)</p>
<h2 id="分类器的性能评价指标">分类器的性能评价指标：</h2>
<p>本次实验中，我采用了准确率作为朴素贝叶斯分类器性能的评价指标，计算方法为：</p>
<p><span class="math display">\[Accuracy = \frac{number\ of\ correctly\ classified\ records}{number\ test\ records}\]</span></p>
<h2 id="数据集的变量及其含义">数据集的变量及其含义</h2>
<table>
<thead>
<tr class="header">
<th><strong>变量名</strong></th>
<th><strong>意义</strong></th>
<th><strong>数据特征</strong></th>
<th><strong>处理方式</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>年龄</td>
<td>连续数据</td>
<td>分段离散</td>
</tr>
<tr class="even">
<td>work_class</td>
<td>职业类型</td>
<td>离散数据</td>
<td></td>
</tr>
<tr class="odd">
<td>fnlwgt</td>
<td>最终重量(?)</td>
<td>连续数据</td>
<td>无意义、忽略</td>
</tr>
<tr class="even">
<td>education</td>
<td>学历等级</td>
<td>离散数据</td>
<td></td>
</tr>
<tr class="odd">
<td>education_num</td>
<td>学历的数字等级</td>
<td>连续数据</td>
<td>重复、忽略</td>
</tr>
<tr class="even">
<td>marital-status</td>
<td>婚姻状况</td>
<td>离散数据</td>
<td></td>
</tr>
<tr class="odd">
<td>occupation</td>
<td>职业</td>
<td>离散数据</td>
<td></td>
</tr>
<tr class="even">
<td>relationship</td>
<td>家庭关系</td>
<td>离散数据</td>
<td></td>
</tr>
<tr class="odd">
<td>race</td>
<td>人种</td>
<td>离散数据</td>
<td></td>
</tr>
<tr class="even">
<td>sex</td>
<td>性别</td>
<td>离散数据</td>
<td></td>
</tr>
<tr class="odd">
<td>capital_gain</td>
<td>资本利得</td>
<td>连续数据</td>
<td>离散化</td>
</tr>
<tr class="even">
<td>capital_loss</td>
<td>资本损失</td>
<td>连续数据</td>
<td>离散化</td>
</tr>
<tr class="odd">
<td>hours_per_week</td>
<td>每周工作时长</td>
<td>连续数据</td>
<td>离散化</td>
</tr>
<tr class="even">
<td>native-country</td>
<td>出生国</td>
<td>离散</td>
<td></td>
</tr>
<tr class="odd">
<td>income</td>
<td>收入</td>
<td>离散</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="特殊数据的处理方式">特殊数据的处理方式</h2>
<h3 id="未知数据的处理">未知数据？的处理</h3>
<p>数据集中有未知的数据(?), 我的处理方式是将这类数据直接忽略掉</p>
<h3 id="数据合并">数据合并</h3>
<p>使用R语言对数据进行统计，发现，Never-worked和Without-pay可以合并为Without-pay字段。</p>
<h3 id="数据的离散化">数据的离散化</h3>
<h4 id="数据规律探索">数据规律探索</h4>
<p>考虑到R语言对数据处理的优越性，因此采用R语言对数据规律进行探索，利用R语言读入测试集和训练集</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 读取测试集，已清除？</span></div><div class="line">test = read.csv(<span class="string">"after.test"</span>, </div><div class="line">                  sep=<span class="string">","</span>, header=<span class="literal">F</span>, col.names=c(<span class="string">"age"</span>, <span class="string">"work_class"</span>, <span class="string">"fnlwgt"</span>, <span class="string">"education"</span>, <span class="string">"education_num"</span>, </div><div class="line">                                                  <span class="string">"marital-status"</span>, <span class="string">"occupation"</span>, <span class="string">"relationship"</span>, <span class="string">"race"</span>, <span class="string">"sex"</span>,</div><div class="line">                                                  <span class="string">"capital_gain"</span>, <span class="string">"capital_loss"</span>, <span class="string">"hourr_per_week"</span>,<span class="string">"native-country"</span>, <span class="string">"income"</span>),</div><div class="line">                  fill = <span class="literal">FALSE</span>, strip.white = <span class="literal">T</span>)</div></pre></td></tr></table></figure>
<p>然后对连续数据做统计之后得到如下结果</p>
<h5 id="age的规律">Age的规律</h5>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; table(train$age)</div><div class="line"></div><div class="line"> 17  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40  41  42  43  44 </div><div class="line">328 447 594 629 621 674 824 752 799 745 789 808 774 813 851 789 837 836 828 852 828 791 786 765 769 741 743 704 </div><div class="line"> 45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 </div><div class="line">706 711 683 523 555 575 571 455 448 394 386 343 337 344 332 276 259 213 186 173 136 110 111  90  80  64  54  40 </div><div class="line"> 73  74  75  76  77  78  79  80  81  82  83  84  85  86  88  90 </div><div class="line"> 49  38  34  29  20  14  15  16  13   7   5   8   3   1   3  35</div></pre></td></tr></table></figure>
<p>可知年龄范围为17~90，我们设置其分割粒度为5</p>
<h4 id="资本收益">资本收益</h4>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/1E0s1Q3v0t1y2B1s2y1f/Image%202017-03-19%20at%205.52.19%20下午.png" alt="资本收益">
<p class="caption">资本收益</p>
</div>
<p>可以从统计结果看出，投资收益相互间差别很大，直接以固定颗粒度分割并不适合，考虑到投资和收入之间存在一定的关系，而且可以很明显的看出收益为0的占了所有数据的大部分，我们将其分为三个类别，没有资本收益，资本收益较少，资本收益较大，。</p>
<p>除去数据中为0的值之后，求得其平均值，中位数，方差如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="comment"># 资本收益平均值</span></div><div class="line">&gt; mean(train<span class="variable">$capital_gain</span>[train<span class="variable">$capital_gain</span>!=0])</div><div class="line">[1] 12977.6</div><div class="line">&gt; <span class="comment"># 资本收益中位数</span></div><div class="line">&gt; median(train<span class="variable">$capital_gain</span>[train<span class="variable">$capital_gain</span>!=0])</div><div class="line">[1] 7298</div><div class="line">&gt; <span class="comment"># 资本收益方差</span></div><div class="line">&gt; sd(train<span class="variable">$capital_gain</span>[train<span class="variable">$capital_gain</span>!=0])</div><div class="line">[1] 22311.91</div></pre></td></tr></table></figure>
<p>可以看出其方差较大，以平均值作为界点不合适，我们取其中位数作为资本收益高低的界点(训练集与测试集这个数据差别不大)</p>
<p>同理，资本损失的数据也有这样的规律，我们也用这样的方法对其进行处理。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="comment"># 资本损失平均值</span></div><div class="line">&gt; mean(train<span class="variable">$capital_loss</span>[train<span class="variable">$capital_loss</span>!=0])</div><div class="line">[1] 1867.898</div><div class="line">&gt; <span class="comment"># 资本损失中位数</span></div><div class="line">&gt; median(train<span class="variable">$capital_loss</span>[train<span class="variable">$capital_loss</span>!=0])</div><div class="line">[1] 1887</div><div class="line">&gt; <span class="comment"># 资本损失收益方差</span></div><div class="line">&gt; sd(train<span class="variable">$capital_loss</span>[train<span class="variable">$capital_loss</span>!=0])</div><div class="line">[1] 361.8574</div></pre></td></tr></table></figure>
<p>资本损失的差异值不大，我们直接取中位数作为分界点</p>
<h4 id="每周工作时间">每周工作时间</h4>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/0b0O241E2f29341k1o3o/Image%202017-03-19%20at%206.16.34%20下午.png" alt="每周工作时间">
<p class="caption">每周工作时间</p>
</div>
<p>工作时间为1~99， 分割粒度设置为5</p>
<h3 id="各连续变量的范围及对应的分割粒度如下">各连续变量的范围及对应的分割粒度如下：</h3>
<table>
<thead>
<tr class="header">
<th><strong>变量名</strong></th>
<th><strong>范围</strong></th>
<th><strong>分割粒度</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>17~90</td>
<td>5</td>
</tr>
<tr class="even">
<td>capital_gain</td>
<td>0 ~ 99999</td>
<td>0，0~7298，7298+</td>
</tr>
<tr class="odd">
<td>capital_loss</td>
<td>0 ~ 4356</td>
<td>0，0~1887， 1887+</td>
</tr>
<tr class="even">
<td>hours_per_week</td>
<td>1~99</td>
<td>5</td>
</tr>
</tbody>
</table>
<h1 id="实验结果的分析">实验结果的分析</h1>
<h2 id="训练集规模的影响">训练集规模的影响</h2>
<p>问题：训练集的规模对分类效果有什么影响？</p>
<h3 id="选取5-50-100的训练集数据训练分类模型">选取5%， 50%， 100%的训练集数据训练分类模型</h3>
<p>测试数据的选择，经过多方面的对比测试，发现选取的特征值为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">年龄 工作类别 学历等级 婚姻状况 职业 投资利得 投资损失 收入</div></pre></td></tr></table></figure>
<p>时，训练的模型分类效果最好。以此为基础，分别选取 5%， 50%， 100%的训练集数据训练分类模型时的训练结果对比如下：</p>
<table>
<thead>
<tr class="header">
<th><strong>比例</strong></th>
<th><strong>训练集数目</strong></th>
<th><strong>准确率</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>5%</td>
<td>1494</td>
<td>83.71%</td>
</tr>
<tr class="even">
<td>50%</td>
<td>15075</td>
<td>83.99%</td>
</tr>
<tr class="odd">
<td>100%</td>
<td>30162</td>
<td>84.12%</td>
</tr>
</tbody>
</table>
<p>由这个表格可以看出，随着数据集的增加，分类器的分类效果越来越好。而实际上，即使只取了5%（1494条训练数据），训练出的分类器分类效果仍然挺好的，可以由此体会到贝叶斯分类的高效性和实用性。</p>
<h3 id="重复随机抽取样本实验5次记录最小最大平均准确率">重复随机抽取样本实验（5次），记录最小，最大，平均准确率</h3>
<table>
<thead>
<tr class="header">
<th><strong>随机比例</strong></th>
<th><strong>训练集数目</strong></th>
<th><strong>准确率</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>70.13%</td>
<td>21131</td>
<td>83.99%</td>
</tr>
<tr class="even">
<td>47.92%</td>
<td>14458</td>
<td>84.01%</td>
</tr>
<tr class="odd">
<td>94.40%</td>
<td>28472</td>
<td>84.04%</td>
</tr>
<tr class="even">
<td>58.65%</td>
<td>17687</td>
<td>84.14%</td>
</tr>
<tr class="odd">
<td>11.83%</td>
<td>3566</td>
<td>83.95%</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th><strong>最小值</strong></th>
<th><strong>最大值</strong></th>
<th><strong>平均值</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>83.95%</td>
<td>84.14%</td>
<td>84.03%</td>
</tr>
</tbody>
</table>
<p>综合两个测试结果可以得出如下结论：数据集的规模会对分类效果产生一定影响，但这种影响并不是绝对的，当抽取的训练集具有随机性时，小训练集也有可能会有特别好的分类效果，不过整体来看，训练集规模越大，分类效果越好。</p>
<h2 id="概率的处理">0概率的处理</h2>
<p>当测试集中某个数据的某条特征值取了某个值<span class="math inline">\(x_i\)</span>，但训练集中该特征值并没有取过该值<span class="math inline">\(x_i\)</span>，则在训练时<span class="math inline">\(P(x_i|y) = 0\)</span>，由此在做测试时计算其概率<span class="math display">\[\hat y = argmax_yP(y)\prod_{i=1}^{n}P(x_i|y)\]</span>时会得到概率为0。</p>
<p>解决方法：通常我们会进行拉普拉斯平滑处理，即在计算条件概率时对每个<span class="math inline">\(x_i\)</span> 做<span class="math inline">\(+\lambda\)</span>处理, 对应的总数也需要做<span class="math inline">\(+M\lambda\)</span>，经过测试可以发现，在未做拉普拉斯平滑时，训练集取50%时，分类准确率为83.95%， 加上拉普拉斯平滑处理之后，分类准确率为83.99%， 准确率有一定提升。</p>
<h2 id="连续特征以及未知特征的处理">连续特征以及未知特征的处理</h2>
<h3 id="连续数据如何进行处理">连续数据如何进行处理</h3>
<p>说明：<strong>【数据的分析及离散化方案】</strong>见前面<strong>【3.4.3数据的离散化】</strong>小节。由于后期经过测试发现特征选取<code>年龄 工作类别 学历等级 婚姻状况 职业 投资利得 投资损失 收入</code>这8个特征时分类效果最好，故前面测试样例的特征选取均选择了这8个，为了测试连续数据分割方案对分类效果的影响，将每周工作时间这一连续特征加入分类的特征中。</p>
<p>测试时，训练集取100%， 拉普拉斯平滑处理的<span class="math inline">\(\lambda = 1\)</span></p>
<p>各连续特征值分割粒度与其分类效果对比</p>
<table>
<thead>
<tr class="header">
<th><strong>特征</strong></th>
<th><strong>分割粒度</strong></th>
<th><strong>准确率</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>不分割</td>
<td>83.816%</td>
</tr>
<tr class="even">
<td>age</td>
<td>3</td>
<td>83.831%</td>
</tr>
<tr class="odd">
<td>age</td>
<td>5</td>
<td>83.751%</td>
</tr>
<tr class="even">
<td>age</td>
<td>10</td>
<td>83.784%</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th><strong>特征</strong></th>
<th><strong>分割粒度</strong></th>
<th><strong>准确率</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>hour</td>
<td>不分割</td>
<td>83.845%</td>
</tr>
<tr class="even">
<td>hour</td>
<td>3</td>
<td>83.845%</td>
</tr>
<tr class="odd">
<td>hour</td>
<td>5</td>
<td>83.752%</td>
</tr>
<tr class="even">
<td>hour</td>
<td>10</td>
<td>83.804%</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th><strong>特征</strong></th>
<th><strong>分割粒度</strong></th>
<th><strong>准确率</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>投资收益与损失</td>
<td>不分割</td>
<td>【85.20%】</td>
</tr>
<tr class="even">
<td>投资收益与损失</td>
<td>1000</td>
<td>83.62%</td>
</tr>
<tr class="odd">
<td>投资收益与损失</td>
<td>无，低，高</td>
<td>83.75%</td>
</tr>
</tbody>
</table>
<p>（<strong>注意</strong>：测试某一特征时，其余特征分割情况默认为： 年龄分割粒度 5， 每周工作时间分割粒度为5， 投资收益和损失分割为<code>无， 收益/损失低, 收益/损失高</code>）</p>
<p>结果分析：这里发现了一些很尴尬的结果，对这三个连续特征值进行不同粒度离散之后发现，【不进行离散】，直接以每一个数据单独作为一个类别进行分类时准确率反而比对其进行不同间距离散之后分类【准确率高】，特别是【投资收益与损失】的两个特征值，不进行离散时其准确率甚至高达 <strong>【85.2%】</strong>，而进行了等间距离散或者以<code>无，低、高</code>， 结合前面对各个特征的分布情况的统计可以进行如下猜测：</p>
<blockquote>
<p>结合前面age, work hour, capital_gain, capital_loss几个特征值的取值特征统计结果， 可以发现，age和work hour在各个取值中虽然较为分散，但是也有小范围集中，简单的等间距离散，对其分类的优化效果不大，甚至于有可能因为粒度过大而使分类效果显著下降， 当分割粒度恰好使得集中数据分在了一个category时，其准确率会略高一点，而如果恰好使之分散开，可能会对分类准确率有反作用，如work hour特征分割粒度为5和10的对比。</p>
<p>对于投资收益和损失这两个特征值，分析其数据特征可以发现，有超过70%的数据是0，而其他数据就较为零散并且差异值极大，简单地等间距分割，或者以中位数，平均数作为临界点进行分割都是不太合理的，因此这种情况下不进行离散化分类效果反而会更好，（不知道高斯分布处理会不会优化其分类效果，由于能力和时间限制，没来得及进行测试）</p>
</blockquote>
<h3 id="未知数据如何处理">未知数据如何处理</h3>
<p>对于未知数据的处理，我做了两种情况的对比，一种是直接忽略掉这些数据，另一种是将‘？’也视为一种数据和特征</p>
<table>
<thead>
<tr class="header">
<th><strong>处理方案</strong></th>
<th><strong>准确率</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>忽略未知数据</td>
<td>84.12%</td>
</tr>
<tr class="even">
<td>视为新类型</td>
<td>【84.45%】</td>
</tr>
</tbody>
</table>
<p>可以看出，将未知数据视为一种特殊的新类型时其分类准确率有较大提高，可知这些数据某种程度上也能够反映出其收入的高低</p>
<h2 id="选取的特征值对比">选取的特征值对比</h2>
<table>
<thead>
<tr class="header">
<th><strong>选取的特征值</strong></th>
<th><strong>准确率</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>年龄 工作类别 重量 学历等级 教育年限 婚姻状况 职业 家庭关系 人种 性别 投资利得 投资损失 每周工作时间 出生国 收入</td>
<td>79.77%</td>
</tr>
<tr class="even">
<td>年龄 工作类别 学历等级 婚姻状况 职业 家庭关系 人种 性别 投资利得 投资损失 每周工作时间 出生国 收入</td>
<td>81.85%</td>
</tr>
<tr class="odd">
<td>年龄 工作类别 学历等级 婚姻状况 职业 家庭关系 性别 投资利得 投资损失 每周工作时间 出生国 收入</td>
<td>81.83%</td>
</tr>
<tr class="even">
<td>年龄 工作类别 学历等级 婚姻状况 职业 人种 投资利得 投资损失 每周工作时间 收入</td>
<td>83.74%</td>
</tr>
<tr class="odd">
<td>年龄 工作类别 学历等级 婚姻状况 职业 投资利得 投资损失 每周工作时间 收入</td>
<td>83.75%</td>
</tr>
<tr class="even">
<td>年龄 工作类别 学历等级 婚姻状况 职业 投资利得 投资损失 收入</td>
<td>84.12%</td>
</tr>
<tr class="odd">
<td>年龄 工作类别 教育年限 婚姻状况 职业 收入</td>
<td>81.79%</td>
</tr>
</tbody>
</table>
<p>由这个表的对比分析可以明显地感受到特征值的选取对分类效果的影响,【年龄,工作类别,学历等级,婚姻状况,职业,投资利得,投资损失】这几个特征值能够很大程度上反应出其<code>收入</code>的高低，特别是投资收入和损失，这个特征与收入有较大的相关性，这也是为什么在【5.3.1 连续数据如何进行处理】一节中提到对这两个特征不进行分割时其分类效果甚至可以高达85.20%的一个原因。</p>
<p>这也提醒我们在选取训练数据时注意对特征值的选取，有代表性的特征对其分类准确率有促进作用，而一些无关的特征则会对分类效果有负作用。</p>
<h2 id="交叉验证">交叉验证</h2>
<p>选取不同比例的测试集数据用作训练，观察其对分类效果的影响</p>
<table>
<thead>
<tr class="header">
<th><strong>测试集比例</strong></th>
<th><strong>训练集+测试集</strong></th>
<th><strong>准确率</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0%</td>
<td>15075 + 0</td>
<td>83.99%</td>
</tr>
<tr class="even">
<td>5%</td>
<td>15075 + 751</td>
<td>84.02%</td>
</tr>
<tr class="odd">
<td>50%</td>
<td>15075 + 7525</td>
<td>84.23%</td>
</tr>
<tr class="even">
<td>100%</td>
<td>15075 + 15060</td>
<td>84.26%</td>
</tr>
</tbody>
</table>
<p>[注] 训练集选取的是50%训练集数据</p>
<p>由这个数据对比可以看出，训练模型时加入部分测试集数据，对分类效果有提升作用。</p>
<h1 id="实验总结及结论">实验总结及结论</h1>
<p>本次实验实现了贝叶斯分类算法，并探讨了数据规模、特征值的选择对分类效果的影响，以及连续值，未知值的不同离散方案和处理方案对分类效果的影响，并探讨了拉普拉斯平滑对分类效果的影响。</p>
<p>通过多方面的对比，主要得出了以下一些结论:</p>
<ul>
<li>特征值的选取对分类效果影响较大，可以根据特征值与类别的相关性大小判断其对分类是有帮助的还是有干扰的。</li>
<li>特征值个数也对分类效果有一定影响，选择合适的，足够的特征作为分类依据是较好的，特征值的选择和个数的选择可通过参数的调整进行尝试后得出最优方案</li>
<li>数据规模对分类效果有一定影响，但是只要特征值选取较好，训练数据较少情况下训练出的模型其分类效果也较好。</li>
<li>连续值的处理方式对分类效果影响较大，对于一些本身比较离散并且该特征值对类型影响较大情况下，分割粒度越小，分类效果会更好，尤其是本实验中投资收入和投资损失两个特征值，不进行分割时其准确率甚至高达85.2%，可明显体会到数据离散粒度对分类效果的影响。</li>
<li>未知数据的处理，未知数据视为一种特殊类型也是一种比较有效的处理方式，背后原因可能是这些没统计到数据的人群可能具有某方面的共性，其收入也会受到这方面的影响。</li>
</ul>
<p>本次实验中自己收获很大，特别是学会了从不同的方面去评价一个算法的性能的方式的分析方法。此外，对编程也有一些新的启发，在编程时需要注意面向对象编程，考虑到各种可能的变化，本次实验中的贝叶斯分类器的实现方法我参考了【参考资料1 使用python编写朴素贝叶斯分类器】一文的实现方式，这种实现可以达到一种自适应的状态，不论特征值有多少个，是什么类型的数据，只要给出参数，均可对其进行训练和分类，这就方便了我们进行不同的特征值对分类效果的影响分析时的测试，只需要对测试文件和训练文件做对应修改即可。此外，在实现过程中设置了很多参数，可以方便进行训练数据比例，是否随机选取，特征值分割粒度，是否进行拉普拉斯平滑处理等进行设置，极大地方便了测试和分析。</p>
<h1 id="参考资料">参考资料</h1>
<ul>
<li><p><a href="https://dataminingguide.books.yourtion.com/chapter-6/chapter-6-6.html" target="_blank" rel="external">使用Python编写朴素贝叶斯分类器</a> https://dataminingguide.books.yourtion.com/chapter-6/chapter-6-6.html</p></li>
<li><p><a href="http://scg.sdsu.edu/dataset-adult_r/" target="_blank" rel="external">Dataset: Adult (R)</a> http://scg.sdsu.edu/dataset-adult_r/</p></li>
</ul>
]]></content>
      
        <categories>
            
            <category> 机器学习 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 实验 </tag>
            
            <tag> 机器学习 </tag>
            
            <tag> 朴素贝叶斯 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[搜索引擎性能评价实验]]></title>
      <url>https://qingfeng14.github.io/2017/03/18/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E6%80%A7%E8%83%BD%E8%AF%84%E4%BB%B7%E5%AE%9E%E9%AA%8C/</url>
      <content type="html"><![CDATA[<h1 id="实验步骤">实验步骤</h1>
<a id="more"></a>
<ol style="list-style-type: decimal">
<li>自由分组， 至多2人一组</li>
<li>构建查询样例集合：利用网络资源(http://top.baidu.com/; http://top.sogou.com/等) 和个人使用经验构建查询样例集合，查询样例集合需覆盖不同查询热门程度（ 冷门/热门） 和各种类型的用户查询需求（ 导航类/信息类/事务类），样例集合的规模为10个查询，各类比例为2:5:3， 并根据个人经验，撰写每个查询样例的信息需求内容。</li>
<li>构建Pooling：学生根据其构建的查询样例集合，抓取常用的三个中文搜索引擎(百度、360好搜、 搜狗)对这部分查询词的查询结果，每个搜索引擎抓取查询结果的前十位结果，并利用这些结果 构建Pooling。</li>
<li>构建相关性标注集合：根据步骤2中撰写好的信息需求，对Pooling里的结果进行标注，标注为 “ 答案” 和“ 非答案” 两类即可。</li>
<li>根据标注结果，依据<font color="red">MAP，P@10，MRR</font>等评价指标对各个搜索引擎的查询性能进行评价，并对 搜索引擎满足不同信息需求的情况加以比较，每人各自撰写实验报告。</li>
</ol>
<h1 id="查询样例集合创建">查询样例集合创建</h1>
<h2 id="导航类">导航类</h2>
<p>丝芙兰官网（热门） 河海大学主页（冷门）</p>
<h2 id="信息类">信息类</h2>
<p>萨德(热门), 美对朝忍耐到尽头(热门)，红薯 地瓜（冷门），青铜器制作流程（冷门）, 烟草学专业(冷门)</p>
<h2 id="事务类">事务类</h2>
<p>NBA直播(热门)， 金刚狼3下载（热门），张家界联想笔记本维修（冷门）</p>
<h1 id="查询样例信息需求">查询样例信息需求</h1>
<ul>
<li>丝芙兰官网（热门）：找到丝芙兰官网，查看产品信息，功效，购买方式等等</li>
<li>河海大学主页（冷门）：找到河海大学的校园主页</li>
<li>萨德：关于萨德的最新新闻，以及事件经历</li>
<li>美对朝忍耐到尽头：相关的新闻</li>
<li>红薯 地瓜：红薯与地瓜是否是同一种事物，各地有什么区别</li>
<li>青铜器制作流程：直接给出青铜器的制作方法</li>
<li>烟草学专业：查询专业简介，需要给出专业学习内容，就业方向，相关学校</li>
<li>NBA直播：最新NBA赛事直播，比分情况，赛况解说等</li>
<li>金刚狼3下载：给出电影的下载链接或者在线观看链接</li>
<li>张家界联想笔记本维修：给出维修点，联系方式等</li>
</ul>
<h1 id="构建pooling">构建pooling</h1>
<p>针对三个搜索引擎分别抓取对应搜索数据，并进行标记，抓取结果及Pooling标记结果见【统计数据.xls】</p>
<h1 id="性能指标计算">性能指标计算</h1>
<p>首先需要明确性能指标的计算方法</p>
<h2 id="平均准确率ap">平均准确率（AP）：</h2>
<p><span class="math display">\[AP=\frac{1}{N}\sum_{i=1}^NPrecision(i)\]</span></p>
<h2 id="map">MAP</h2>
<p>MAP方法是Mean Average Precison，即平均准确率法的简称。其定义是求每个相关文档检索出后的准确率的平均值（即Average Precision）的算术平均值（Mean），即 <span class="math display">\[MAP = mean(AP)\]</span></p>
<h2 id="rr">RR</h2>
<p>首位相关结果倒数RR,即出现第一个相关性标注的排序的倒数</p>
<p><span class="math display">\[RR = \frac{1}{Rank(1)}\]</span></p>
<h2 id="mrr">MRR</h2>
<p>MRR是平均排序倒数（Mean Reciprocal Rank）的简称，MRR方法主要用于寻址类检索（Navigational Search）或问答类检索（Question Answering）,MRR方法首先计算每一个查询的第一个相关文档位置的倒数，然后将所有倒数值求平均。</p>
<h2 id="pn">P@N</h2>
<p>P@N本身是Precision<span class="citation">@N的简称</span>，指的是对特定的查询，考虑位置因素，检测前N条结果的准确率</p>
<p>基于此，计算各词条的RR,P@10，AP，以及对搜索引擎的MRR,MAP，P@10结果如下：</p>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/2d2g3q1C2q3t213r2v3h/Image%202017-03-29%20at%206.29.33%20下午.png" alt="分词条结果">
<p class="caption">分词条结果</p>
</div>
<p>进一步统计各个搜索引擎对不同类型的关键词的搜索结果性能：</p>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/0g0o2j2K1I1B182k2F2j/Image%202017-03-29%20at%206.28.33%20下午.png" alt="各搜索引擎不同类别的统计结果">
<p class="caption">各搜索引擎不同类别的统计结果</p>
</div>
<h1 id="实验结论">实验结论</h1>
<p>按照统计结果做出各项指标的柱状图如下：</p>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/0a3K1W2B0E000V0s3g3W/Image%202017-03-29%20at%206.22.39%20下午.png" alt="MAP">
<p class="caption">MAP</p>
</div>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/3z013u00203m2A0s0c2h/Image%202017-03-29%20at%206.25.22%20下午.png" alt="MP@10">
<p class="caption">MP@10</p>
</div>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/3D3h0o2C3R182U2d3w2Q/Image%202017-03-29%20at%206.26.11%20下午.png" alt="MRR">
<p class="caption">MRR</p>
</div>
<h2 id="总体的数据">总体的数据</h2>
<p>由统计结果分析，从总体来看，在各项指标中，百度是三个搜索引擎中表现最好的,360的性能次之，而搜狗的结果则稍差一些。</p>
<h2 id="导航类搜索词">导航类搜索词</h2>
<p>对于导航类搜索关键词，RR一般用作评价导航类的查询需求，用于表示用户在知道目标前需要浏览的结果数目，可以看到，三大搜索引擎的导航类关键词的MRR指标均为1，可以发现，当用户想要搜索的信息为已知资源，主页，资源等信息时，搜索引擎可能会更倾向于返回给用户一些官方的主页信息，以使用户能够尽快找到目标，对于导航类信息的其他指标，相差也不大，但是P@10的指标值相差比较大，百度的P@10值是较好的，而360和搜狗的结果则稍差，查看原始搜索结果标记，三大搜索引擎都加入了对应的百科，问答平台，而搜狗和360的结果还夹杂了不少“同名的广告”，以“河海大学主页”词条为例，360和搜狗的结果中有不少标题虽是“河海大学招生网”等信息，但实际是一些培训机构的页面，两家的搜索引擎并没有做这方面的剔除，使得结果首页多了不少奇怪的“广告”，影响了搜索体验。另一个比较有趣的现象是，河海大学离退休工作处官网的名称是“河海大学主页”，这个页面在三大搜索引擎的结果中排第2、3位，可见搜索引擎背后会根据用户的点击数据调整结果的显示顺序。</p>
<h2 id="信息类搜索词">信息类搜索词</h2>
<p>信息类数据是用户搜索需求中占比最大的，用户的关注点在于结果的全面和权威性，对于这类搜索词，搜索引擎多数会给出其问答平台的结果，相关新闻结果，或者百科结果。对于信息类关键词，P@10是评价其搜索性能的较好指标，百度的数据在70%左右，而360和搜狗在60%左右，可见在中文搜索中，百度的确做得比较好，对于大多数信息类搜索词，百度的结果足够全面。对于新闻类的信息，三大搜索引擎结果差别并不是特别大，但是对于一些知识类信息，或者生活类信息的搜索，360和搜狗的表现则差强人意，以“红薯 地瓜”关键词为例，用户的搜索需求是查询红薯地瓜的区别，百度的结果大体上与之相符，而搜狗和360除了少数两三条结果与之相关，多数结果只与红薯有关，可以推测是由于搜索引擎的分词和联合搜索系统的处理方式的差异。</p>
<h2 id="事务类搜索词">事务类搜索词</h2>
<p>事物类搜索词中，百度的结果优势不是那么明显，甚至略差，360的结果则稍微更好一些， 这里差异较大的词条是金刚狼3下载这个搜索词条，其实这个词条是一个坑，一般来说这类资源可能在互联网上很少甚至不存在，因此很多数据可能其实是广告或者一些死链接，这时可能更需要搜索引擎去剔除一些不必要的结果以帮助用户完成其任务需求，360的结果大多数是迅雷的链接，而百度的结果则包含了各种不同的站点，这些站点大多数是广告等非用户目标站点，可能是出于广告费等方面的考虑吧，使得其结果表现并不好。</p>
<h2 id="冷热门">冷热门</h2>
<p>对于热门数据，三大搜索引擎的表现都比较好，冷门数据百度表现依然较好，而360和搜狗的性能则有所下降，一方面可能是由于百度的市场占有率更大，用户更多，能够获取到的用户数据也更多更全面，即使是冷门搜索词由于有较大的用户基数也能得到较好地反馈结果，另一方面，百度的数据抓取可能更全面，对于不同类别的搜索词，百度的P@10指标均能达到近70%，可见其数据是比较齐全的，这也给其冷门搜索词的搜索提供的数据。</p>
<h2 id="总结">总结</h2>
<p>从各方面的分析可以看出，百度的性能的确是最好的，分析推测其原因如下：百度的实力更强，硬件资源，软件资源均遥遥领先于其他两家搜索引擎，这就使得百度可以拿到更多的数据，拿到更全面的数据，这会对搜索引擎性能有较大的影响；此外，百度的用户群体更大，丰富的用户数据可以帮助百度动态优化其搜索结果的排序，进而提升用户体验；百度的分词和检索算法可能更优，正如前面提到的“地瓜 红薯”词条，百度的结果是两个词的联合结果，而360和搜狗的结果可能只与其中一个有关。对于搜狗来说，其搜索结果中有时总是会有微信或者知乎的结果，当用户的意图并不在此时，可能会极大地影响其体验。</p>
]]></content>
      
        <categories>
            
            <category> 搜索引擎 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 搜索引擎 </tag>
            
            <tag> 课程 </tag>
            
            <tag> 实验 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[CCF2016]]></title>
      <url>https://qingfeng14.github.io/2017/03/16/%E7%AE%97%E6%B3%95/CCF2016/</url>
      <content type="html"><![CDATA[<p>2016年CCF真题练习</p>
<p>Mac 下C++的编译</p>
<p><code>gcc -o target  source.cpp  -lstdc++</code></p>
<a id="more"></a>
<h1 id="第一题-中间数">2016-12 第一题 中间数</h1>
<p>试题名称： 中间数 时间限制： 1.0s 内存限制： 256.0MB</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">问题描述</div><div class="line">　　在一个整数序列a1, a2, …, an中，如果存在某个数，大于它的整数数量等于小于它的整数数量，则称其为中间数。在一个序列中，可能存在多个下标不相同的中间数，这些中间数的值是相同的。</div><div class="line">　　给定一个整数序列，请找出这个整数序列的中间数的值。</div><div class="line">输入格式</div><div class="line">　　输入的第一行包含了一个整数n，表示整数序列中数的个数。</div><div class="line">　　第二行包含n个正整数，依次表示a1, a2, …, an。</div><div class="line">输出格式</div><div class="line">　　如果约定序列的中间数存在，则输出中间数的值，否则输出-1表示不存在中间数。</div><div class="line">样例输入</div><div class="line">6</div><div class="line">2 6 5 6 3 5</div><div class="line">样例输出</div><div class="line">5</div><div class="line">样例说明</div><div class="line">　　比5小的数有2个，比5大的数也有2个。</div><div class="line">样例输入</div><div class="line">4</div><div class="line">3 4 6 7</div><div class="line">样例输出</div><div class="line">-1</div><div class="line">样例说明</div><div class="line">　　在序列中的4个数都不满足中间数的定义。</div><div class="line">样例输入</div><div class="line">5</div><div class="line">3 4 6 6 7</div><div class="line">样例输出</div><div class="line">-1</div><div class="line">样例说明</div><div class="line">　　在序列中的5个数都不满足中间数的定义。</div><div class="line">评测用例规模与约定</div><div class="line">　　对于所有评测用例，1 ≤ n ≤ 1000，1 ≤ ai ≤ 1000。</div></pre></td></tr></table></figure>
<p>思路：调用库函数进行排序，然后从中间向两侧进行查找</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;  </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;  </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> a[<span class="number">1002</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/* code */</span></div><div class="line">    <span class="keyword">int</span> n = <span class="number">0</span>;</div><div class="line">    <span class="built_in">cin</span> &gt;&gt; n;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</div><div class="line">        <span class="built_in">cin</span>&gt;&gt;a[i];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    sort(a, a+ n);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> min = n/<span class="number">2</span>;</div><div class="line">    <span class="keyword">int</span> max = n/<span class="number">2</span>;  <span class="comment">// 一开始这里的设置是错的</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n/<span class="number">2</span>; i&lt; n; ++i) &#123;</div><div class="line">        <span class="keyword">if</span>(a[n/<span class="number">2</span>] &lt; a[i]) &#123;</div><div class="line">            max = i;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n/<span class="number">2</span>; i&gt;=<span class="number">0</span>; --i) &#123;</div><div class="line">        <span class="keyword">if</span>(a[n/<span class="number">2</span>] &gt; a[i]) &#123;</div><div class="line">            min = i;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(n<span class="number">-1</span>-max+<span class="number">1</span> == min + <span class="number">1</span> || (max ==n/<span class="number">2</span> &amp;&amp; min ==n/<span class="number">2</span>) ) &#123;</div><div class="line">            <span class="built_in">cout</span> &lt;&lt; a[n/<span class="number">2</span>]&lt;&lt;<span class="string">"\n"</span>;</div><div class="line">    &#125; </div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt; <span class="number">-1</span>&lt;&lt;<span class="string">"\n"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="第二题-工资计算">2016-12第二题 工资计算</h1>
<p>试题编号： 201612-2 试题名称： 工资计算 时间限制： 1.0s 内存限制： 256.0MB</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">问题描述</div><div class="line">　　小明的公司每个月给小明发工资，而小明拿到的工资为交完个人所得税之后的工资。假设他一个月的税前工资（扣除五险一金后、未扣税前的工资）为S元，则他应交的个人所得税按如下公式计算：</div><div class="line">　　1） 个人所得税起征点为3500元，若S不超过3500，则不交税，3500元以上的部分才计算个人所得税，令A=S-3500元；</div><div class="line">　　2） A中不超过1500元的部分，税率3%；</div><div class="line">　　3） A中超过1500元未超过4500元的部分，税率10%；</div><div class="line">　　4） A中超过4500元未超过9000元的部分，税率20%；</div><div class="line">　　5） A中超过9000元未超过35000元的部分，税率25%；</div><div class="line">　　6） A中超过35000元未超过55000元的部分，税率30%；</div><div class="line">　　7） A中超过55000元未超过80000元的部分，税率35%；</div><div class="line">　　8） A中超过80000元的部分，税率45%；</div><div class="line">　　例如，如果小明的税前工资为10000元，则A=10000-3500=6500元，其中不超过1500元部分应缴税1500×3%=45元，超过1500元不超过4500元部分应缴税(4500-1500)×10%=300元，超过4500元部分应缴税(6500-4500)×20%=400元。总共缴税745元，税后所得为9255元。</div><div class="line">　　已知小明这个月税后所得为T元，请问他的税前工资S是多少元。</div><div class="line">输入格式</div><div class="line">　　输入的第一行包含一个整数T，表示小明的税后所得。所有评测数据保证小明的税前工资为一个整百的数。</div><div class="line">输出格式</div><div class="line">　　输出一个整数S，表示小明的税前工资。</div><div class="line">样例输入</div><div class="line">9255</div><div class="line">样例输出</div><div class="line">10000</div><div class="line">评测用例规模与约定</div><div class="line">　　对于所有评测用例，1 ≤ T ≤ 100000。</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> CCF </category>
            
        </categories>
        
        
        <tags>
            
            <tag> CCF </tag>
            
            <tag> 算法 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[IPv6协议转发实验]]></title>
      <url>https://qingfeng14.github.io/2017/03/16/%E7%BD%91%E7%BB%9C/IPv6%E5%8D%8F%E8%AE%AE%E8%BD%AC%E5%8F%91%E5%AE%9E%E9%AA%8C/</url>
      <content type="html"><![CDATA[<style type="text/css"> 
  p{ 
  text-indent: 2em; 
  } 
</style>
<h1 id="实验目的">实验目的</h1>
<p>通过前面的实验，我们已经深入了解了 IPv6 协议的<font color="red">分组接收和发送处理</font>流程。本实验需要将实验模块的角色定位从通信两端的主机转移到作为<font color="red">中间节点的路由器</font>上，在 IPv6 分组收发处理的基础上，实现分组的路由转发功能。</p>
<a id="more"></a>
<p><font color="red">网络层协议</font>最为关注的是如何将 IPv6 分组从源主机通过网络送达目的主机，这个任务就是由<font color="red">路由器</font>中的 IPv6协议模块所承担。路由器根据自身所获得的路由信息，将收到的 IPv6分组转发给正确的下一跳路由器。如此逐跳地对分组进行转发，直至该分组抵达目的主机。 <font color="red">IPv6 分组转发</font>是<font color="blue">路由器最为重要的功能</font>。</p>
<p>本实验设计实现路由器中的 IPv6 协议，可以在原有 IPv6 分组收发实验的基础上，增加 IPv6 分组的转发功能。对网络的观察视角由主机转移到路由器中，了解路由器是如何为分组选择路由，并逐跳地将分组发送到目的端的。 大家在本实验中也会初步接触<font color="red">路由</font>表这一重要的数据结构，认识路由器是如何根据路由表对分组进行转发的。</p>
<h1 id="实验具体任务">实验具体任务</h1>
<p>对于每一个到达本机的 IPv6 分组，根据其<font color="red">目的 IPv6 地址</font>查找本机的路由表，对该分组进行如下的几类操作：</p>
<ul>
<li><font color="blue">丢弃</font>查不到路由的分组；</li>
<li>向<font color="blue">上层协议</font>上交<font color="blue">目的地址为<strong>本机地址</strong>的分组</font>；</li>
<li>根据路由查找结果，向相应接口<font color="blue">转发</font>其余的分组。</li>
</ul>
<h1 id="实验内容">实验内容</h1>
<p>实验内容主要包括：</p>
<ul>
<li>设计路由表数据结构：设计路由表所采用的数据结构。要求能够根据 IPv6 地址来确定分组处理行为（丢弃、 上交或转发），转发情况下需获得下一跳的 IPv6 地址。路由表的<font color="red">数据结构和查找算法</font>会极大的影响路由器的转发性能，有兴趣的同学可以深入思考和探索。</li>
<li>IPv6 分组的接收和发送：对前面实验中所完成的代码进行修改，在路由器协议栈的 IPv6 模块中能够正确完成分组的接收和发送处理。具体要求不做改变，参见IPv6 分组收发实验。</li>
<li>IPv6 分组的转发：对于需要转发的分组进行处理，获得下一跳的 IP 地址，然后调用发送接口函数进一步处理。</li>
</ul>
<h1 id="实验过程">实验过程：</h1>
<h2 id="程序整体设计流程">程序整体设计流程</h2>
<div class="figure">
<img src="https://d2ppvlu71ri8gs.cloudfront.net/items/3h1A0k1R1H3M373D2w33/Image%202017-04-20%20at%203.45.02%20下午.png" alt="程序运行流程">
<p class="caption">程序运行流程</p>
</div>
<p>实验流程如图1所示，在下层接收接口函数<code>stud_ipv6_fwd_deal( )</code>中(图1接口函数1)，实现 分组接收处理。其主要功能是根据分组中目的 IPv6 地址查找路由表，根据路由表查找结果进行后续处理。</p>
<ul>
<li>分组需要上交，则调用接口函数<code>ipv6_fwd_LocalRcv( )</code>(图 5.1 中接口函数2);</li>
<li>需要丢弃，则调用函数 <code>ipv6_fwd_DiscardPkt( )</code>(图 5.1 中函数5);</li>
<li>需要转发，则进行转发操作。转发操作的实现要点包括:
<ul>
<li>Hop Limit 值减 1，然后调用发送接口函数 <code>ipv6_fwd_SendtoLower( )</code>(图 5.1 中接口函数 4)将分组发送出去。</li>
<li>接口函数<code>ipv6_fwd_SendtoLower( )</code>比前面实验增加了一个参数nexthop，要求 在调用时传入下一跳的 IPv6 地址，此地址是通过查找路由表得到的。</li>
</ul></li>
<li>另外，本实验增加了一个路由表配置的接口(图1中函数6)，要求能够根据系统所给信息来设定本机路由表。实验中只需要简单地设置静态路由信息，以作为分组接收和发送处理的判断依据。</li>
</ul>
<h2 id="路由表数据结构设计及路由查找过程">路由表数据结构设计及路由查找过程</h2>
<p>在本实验的实现过程中，我的路由表数据结构是采用链表进行实现的，路由查找时顺序遍历链表比对掩码和目的地址，并记录当前最长匹配结果。路由的掩码匹配做法是先将IPv6地址转换为128bit的位数组，然后比对掩码长度位，具体如下：</p>
<ul>
<li>转换为bitset&lt;128&gt; 位数组</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">bitset</span>&lt;128&gt; trans_bit_addr(ipv6_addr addr) &#123;</div><div class="line">    <span class="built_in">bitset</span>&lt;128&gt; bit_ipv6;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</div><div class="line">        bit_ipv6 = bit_ipv6 | (<span class="built_in">bitset</span>&lt;<span class="number">128</span>&gt; (addr.dwAddr[<span class="number">3</span>-i]) ) &lt;&lt; (<span class="number">32</span> * i);</div><div class="line">        <span class="comment">// 按位或将ipv6_addr的四个long型数据转换为对应的位数组，左移96，64，32，0位</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> bit_ipv6;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>路由查找</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">list</span>&lt;stud_ipv6_route_msg&gt;::iterator router;</div><div class="line"><span class="keyword">bool</span> match = <span class="literal">false</span>;</div><div class="line"><span class="comment">// 是否找到匹配项</span></div><div class="line"><span class="keyword">int</span> MAX_LENGTH = <span class="number">0</span>;</div><div class="line"><span class="comment">// 标记当前最长匹配</span></div><div class="line"></div><div class="line"><span class="comment">// 利用bitset将目的ip地址转换为128位数组</span></div><div class="line"><span class="built_in">bitset</span>&lt;128&gt; dest_ipv6 = trans_bit_addr(*dest_addr);</div><div class="line">ipv6_addr next;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(router = router_tables.begin(); router != router_tables.end(); ++router) &#123;</div><div class="line">    <span class="comment">// 遍历路由表</span></div><div class="line">    <span class="keyword">if</span> (router -&gt; masklen &lt; MAX_LENGTH) &#123;</div><div class="line">        <span class="comment">// 短于当前已匹配路由表</span></div><div class="line">        <span class="keyword">continue</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 将路由表中目的ip地址换算为bit表示的数组</span></div><div class="line">    <span class="built_in">bitset</span>&lt;128&gt; router_dest = trans_bit_addr(router -&gt; dest);</div><div class="line"></div><div class="line">    <span class="keyword">bool</span> local_match = <span class="literal">true</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; router -&gt; masklen; ++i) &#123;</div><div class="line">        <span class="keyword">if</span> (router_dest[i] != dest_ipv6[i]) &#123;</div><div class="line">            local_match = <span class="literal">false</span>;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (local_match) &#123;</div><div class="line">        match = <span class="literal">true</span>;</div><div class="line">        <span class="comment">// 匹配则更新masklen, 更新路由地址</span></div><div class="line">        next = router -&gt; nexthop;</div><div class="line">        MAX_LENGTH = router -&gt; masklen;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="优化措施">优化措施</h3>
<p>这样的设计其实效率是比较低的，可以进一步完成的优化是：在插入新的路由信息至路由链表时，按照掩码从大到小的顺序插入，这样在遍历查找路由信息时，查找到第一个匹配的记录即可停止遍历。</p>
<p>更进一步的优化是采用二叉树的形式进行构建。</p>
<h2 id="下层分组接收函数-stud_ipv6_fwd_deal">下层分组接收函数 stud_ipv6_fwd_deal( )</h2>
<p>本函数是 IPv6 协议接收流程的下层接口函数，实验系统从网络中接收到分组后 会调用本函数。调用该函数之前已完成 IPv6 分组的合法性检查，因此本函数应该考虑实现 如下功能:</p>
<ul>
<li><p>判定是否为发给本机的分组，如果是，则调用 <code>ipv6_fwd_LocalRcv()</code>.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// a. 查找是否是发向本机</span></div><div class="line"><span class="comment">// 先获取目的地址，第192bit起为目的ip，故偏移24Byte</span></div><div class="line">ipv6_addr *dest_addr = (ipv6_addr*) (pBuffer + <span class="number">24</span>);</div><div class="line">ipv6_addr *local_addr = <span class="keyword">new</span> ipv6_addr();</div><div class="line"><span class="comment">// 本地IPv6地址</span></div><div class="line">getIpv6Address(local_addr);</div><div class="line"></div><div class="line"><span class="keyword">bool</span> is_lcoal = <span class="literal">true</span>;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">16</span>; ++i) &#123;</div><div class="line">    <span class="keyword">if</span>(dest_addr-&gt;bAddr[i] != local_addr-&gt;bAddr[i]) &#123;</div><div class="line">        <span class="comment">// 分组不是本地</span></div><div class="line">        is_lcoal = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span>(is_lcoal) &#123;</div><div class="line">    <span class="comment">// 是本机接收分组，直接上交</span></div><div class="line">    ipv6_fwd_LocalRcv(pBuffer, length);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li>
<li><p>按照最长匹配原则查找路由表，获取下一跳 IPv6 地址。查找失败，则调用 <code>ipv6_fwd_DiscardPkt()</code>.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// b. 按照最长匹配查找路由表获取下一跳，查找失败则调用ipv6_fwd_DiscardPkt( )；∂</span></div><div class="line"><span class="built_in">list</span>&lt;stud_ipv6_route_msg&gt;::iterator router;</div><div class="line"><span class="keyword">bool</span> match = <span class="literal">false</span>;</div><div class="line"><span class="comment">// 是否找到匹配项</span></div><div class="line"><span class="keyword">int</span> MAX_LENGTH = <span class="number">0</span>;</div><div class="line"><span class="comment">// 标记当前最长匹配</span></div><div class="line"></div><div class="line"><span class="comment">// 利用bitset将目的ip地址转换为128位数组</span></div><div class="line"><span class="built_in">bitset</span>&lt;128&gt; dest_ipv6 = trans_bit_addr(*dest_addr);</div><div class="line">ipv6_addr next;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(router = router_tables.begin(); router != router_tables.end(); ++router) &#123;</div><div class="line">    <span class="comment">// 遍历路由表</span></div><div class="line">    <span class="keyword">if</span> (router -&gt; masklen &lt; MAX_LENGTH) &#123;</div><div class="line">        <span class="comment">// 短于当前已匹配路由表</span></div><div class="line">        <span class="keyword">continue</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 将路由表中目的ip地址换算为bit表示的数组</span></div><div class="line">    <span class="built_in">bitset</span>&lt;128&gt; router_dest = trans_bit_addr(router -&gt; dest);</div><div class="line"></div><div class="line">    <span class="keyword">bool</span> local_match = <span class="literal">true</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; router -&gt; masklen; ++i) &#123;</div><div class="line">        <span class="keyword">if</span> (router_dest[i] != dest_ipv6[i]) &#123;</div><div class="line">            local_match = <span class="literal">false</span>;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (local_match) &#123;</div><div class="line">        match = <span class="literal">true</span>;</div><div class="line">        <span class="comment">// 匹配则更新masklen, 更新路由地址</span></div><div class="line">        next = router -&gt; nexthop;</div><div class="line">        MAX_LENGTH = router -&gt; masklen;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li>
<li>查找成功，则调用 <code>ipv6_fwd_SendtoLower()</code>，完成分组发送。</li>
<li><p>转发过程中注意对 Hop Limit 的处理。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// c. 需要转发，hop limit - 1 ,调用 ipv6_fwd_SendtoLower( )完成报文发送</span></div><div class="line"><span class="keyword">if</span>(match) &#123;</div><div class="line">    <span class="comment">// 获取hop limit，注意转换为本地字节序</span></div><div class="line">    <span class="keyword">char</span> HopLimit = *(<span class="keyword">char</span> *)(pBuffer + <span class="number">7</span>);</div><div class="line">    HopLimit -= <span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="built_in">memcpy</span>(pBuffer + <span class="number">7</span>, &amp;(HopLimit), <span class="keyword">sizeof</span>(<span class="keyword">char</span>));</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(HopLimit == <span class="number">1</span>) &#123;</div><div class="line">        <span class="comment">// 直接发向目的地址</span></div><div class="line">        ipv6_fwd_SendtoLower(pBuffer, length, dest_addr);</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(HopLimit &gt; <span class="number">1</span>) &#123;</div><div class="line">        ipv6_fwd_SendtoLower(pBuffer, length, &amp;next);</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li>
</ul>
<h1 id="实验结果分析">实验结果分析</h1>
<p>分析传输的报文，处理正确</p>
<div class="figure">
<img src="https://d2ppvlu71ri8gs.cloudfront.net/items/3q0A0e3M44051S1J0f1J/Image%202017-04-20%20at%206.12.39%20下午.png" alt="实验结果">
<p class="caption">实验结果</p>
</div>
<h1 id="遇到的问题及解决">遇到的问题及解决</h1>
<ul>
<li><p>掩码的比对问题，由于IPV6地址是128位长，其实际存储结构为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="keyword">union</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">char</span> bAddr[<span class="number">16</span>]; </div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">short</span> wAddr[<span class="number">8</span>]; </div><div class="line">    <span class="keyword">long</span> dwAddr[<span class="number">4</span>];</div><div class="line">&#125;ipv6_addr;</div></pre></td></tr></table></figure>
<p>其掩码比对无法像IPV4地址那样直接简单地进行移位操作，因此，我想到的一个解决方法是将其转换为长度为128的位数组，进一步依次进行比较。</p></li>
<li><p>处理IPV6数据包时的网络字节序和本机字节序问题，网络字节序是大端模式，而本机字节序一般是小端模式，因此需要注意其字节序的转换，在本实验的实现过程中，IPv6地址的比较是采用按位比对的模式，由于计算机底层硬件bit序并不受解析模式的影响，因此不需要考虑字节序转换问题，而解析hop limit时，由于是直接截取的char类型(8 bit),也不会受字节序的影响，也没有必要进行字节序的转换。</p></li>
</ul>
<h1 id="思考题实验指导书的思考题2">思考题：实验指导书的思考题（2）</h1>
<p>IPv6和IPv4地址长度存在显著差别，考虑路由查找过程中各自采用什么样的数据结构和算法有助于提高查找效率</p>
<p>答： IPV4的地址为32位长，不考虑空间占用的话，实际上最快的一种数据结构应该是二叉树，即根据目的地址的比特串构建二叉树即可，这样搜索时最多需要32步，可以说是可以极大的减小查询时间，当然这样的空间占用会比较高，通常会做出压缩的优化以及其他优化，可以说IPv4的路由查询可以做到非常高效的查询。</p>
<p>而IPv6地址长度为128位，是不可能像IPv4那样建一个二叉比特树的，查阅相关资料，有如下解决方案： 已有IPv6路由表的统计结果和地址分配策略表明，长度大于48比特的前缀比例很低，仅为5%左右，因此可对IPv6地址的高48位采用多分支trie进行查找，剩余的16比特直接采用hash查找。根据IPv6地址前缀的分布特点，构造查找步宽为24-8-8-8-16的五层多分支TrieC树，限制最坏情况下路由查找的访存次数。</p>
<p>通过这样的方式可以极大地加快IPV6的路由查询。</p>
<h1 id="总结">总结</h1>
<p>本次实验实现了IPV6分组的转发，通过本次实验，我更加清晰地认识了网络原理课程中的IPv6数据 包转发的过程，对最长匹配原则也有了一个清晰的理解，对网络字节序和本机字节序有了更深入的理解。感谢助教的热心帮助。</p>
]]></content>
      
        <categories>
            
            <category> 计算机网络 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 网络 </tag>
            
            <tag> IPv6 </tag>
            
            <tag> 清华NetRiver实验 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Linux/Mac 常用命令]]></title>
      <url>https://qingfeng14.github.io/2017/03/15/linux-Mac-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=27836035&amp;auto=0&amp;height=66">
</iframe>
<h1 id="使用pandoc将markdown输出为pdf">使用pandoc将markdown输出为pdf</h1>
<p><a href="http://yijiebuyi.com/blog/17e31502e8a6229a18971a2499f0e72b.html" target="_blank" rel="external">pandoc的安装与配置</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">pandoc hello-world.md -o out.pdf  --latex-engine=xelatex</div><div class="line"></div><div class="line">pandoc -D latex &gt; mytemplate.tex</div><div class="line"></div><div class="line"><span class="comment"># 如果提示pandoc无法找到插件xelatex（支持输出中文），则下载Tex，BasicTex</span></div><div class="line">pandoc hello-world.md -o out.pdf  --latex-engine=/Library/TeX/texbin/xelatex</div><div class="line"><span class="comment"># tips：可以将该路径加入$PATH</span></div><div class="line"></div><div class="line"><span class="comment"># 指定中英文字体</span></div><div class="line">pandoc -N <span class="_">-s</span> --toc --smart --latex-engine=xelatex -V CJKmainfont=<span class="string">'Kai'</span> -V mainfont=<span class="string">'Monaco'</span> -V geometry:margin=1<span class="keyword">in</span> hello-world.md -o output.pdf</div><div class="line"></div><div class="line">pandoc -N <span class="_">-s</span> --toc --smart -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --variable fontsize=26pt  --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span> IPv6协议转发实验.md  -o example14.pdf</div><div class="line"></div><div class="line">pandoc -N <span class="_">-s</span> --toc --smart --template default.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span> 搜索引擎性能评价实验.md  -o 搜索引擎性能评价实验.pdf</div><div class="line"></div><div class="line"><span class="comment"># 有代码高亮</span></div><div class="line">pandoc -N <span class="_">-s</span> --toc --smart --template default.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span> linux-Mac-常用命令.md  -o 搜索引擎性能评价实验.pdf --listings -H code.tex</div><div class="line"></div><div class="line">pandoc -N <span class="_">-s</span> --toc --smart --template default.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span>  --listings -H code.tex linux-Mac-常用命令.md  -o 搜索引擎性能评价实验.pdf</div><div class="line"></div><div class="line">pandoc -N <span class="_">-s</span> --toc --smart --template default.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span>  --listings -H code.tex 机器学习实验-朴素贝叶斯分类器.md -o 朴素贝叶斯.pdf</div><div class="line"></div><div class="line">pandoc <span class="_">-s</span>  --smart --template default.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span>  --listings -H code.tex OS-lec9-exercise.md -o lec9.pdf</div><div class="line"></div><div class="line"></div><div class="line">pandoc <span class="_">-s</span>  --smart --template ../default.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span>  --listings -H ../code.tex 密码学-Exercise1.md -o out.pdf</div><div class="line"></div><div class="line">pandoc <span class="_">-s</span> -N --toc --smart --template ../default.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span>  --listings -H ../code.tex 搜索引擎性能评价实验.md -o 实验报告.docx</div><div class="line"></div><div class="line">pandoc <span class="_">-s</span> -N --toc --smart --template ../default.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span>  --listings -H ../code.tex 感想.md -o 艺术考察报告.pdf</div><div class="line"></div><div class="line">pandoc <span class="_">-s</span> -N --toc --smart --template mytemplate.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span>  --listings -H ../code.tex 感想.md -o 艺术考察报告.pdf</div><div class="line"></div><div class="line">pandoc <span class="_">-s</span> -N --toc --smart  -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span>  --listings -H code.tex 感想.md -o 艺术考察报告.pdf</div><div class="line"></div><div class="line">pandoc -N <span class="_">-s</span> --toc --smart --template ignore_report.tex -V CJKmainfont=<span class="string">'Songti SC'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span>  --listings -H code.tex   ignore_报告书.md -o 关于广告专业需求分析的报告书.docx</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>Mac 下的中文字体集</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">宋体仿宋 STFangsong</div><div class="line">宋体黑体 STHei</div><div class="line">宋体简体 Songti SC</div><div class="line">        PingFang SC</div><div class="line">        LingWai SC</div><div class="line">        LiSong Pro</div><div class="line">        LiHei Pro</div><div class="line">        Libian SC</div><div class="line">        Lantinghei TC</div><div class="line">        Kaiti SC</div></pre></td></tr></table></figure>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">\<span class="name">documentclass</span><span class="string">[$if(fontsize)$$fontsize$,$endif$$if(lang)$$babel-lang$,$endif$$if(papersize)$$papersize$paper,$endif$$for(classoption)$$classoption$$sep$,$endfor$]</span><span class="string">&#123;$documentclass$&#125;</span></span></div></pre></td></tr></table></figure>
<p>PDF with numbered sections and a custom LaTeX header</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pandoc -N --template=mytemplate.tex --variable mainfont=<span class="string">"Palatino"</span> --variable sansfont=<span class="string">"Helvetica"</span> --variable monofont=<span class="string">"Menlo"</span> --variable fontsize=12pt --variable version=1.17.2 MANUAL.txt --latex-engine=xelatex --toc -o example14.pdf</div><div class="line"></div><div class="line">pandoc -N <span class="_">-s</span> --toc --smart -V CJKmainfont=<span class="string">'Kai'</span> -V mainfont=<span class="string">'Monaco'</span> --variable sansfont=<span class="string">"Monaco"</span> --variable monofont=<span class="string">"Monaco"</span> --variable fontsize=26pt  --latex-engine=xelatex -V geometry:margin=1<span class="keyword">in</span> hello-world.md  -o example14.pdf</div></pre></td></tr></table></figure>
<h1 id="unixlinux-系统下修改环境变量">Unix/Linux 系统下修改环境变量</h1>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo vi .bash_profile</div><div class="line"><span class="comment"># 添加需要增加的环境变量</span></div><div class="line">PATH=<span class="variable">$PATH</span>:/Library/TeX/texbin/</div></pre></td></tr></table></figure>
<p>然后重新启动terminal即可</p>
<h1 id="sublime-快捷键插入自定义字符串">sublime 快捷键插入自定义字符串</h1>
<p>Preference-&gt; Key Bingding-&gt; 修改user settings</p>
<p>在其中加入自定义快捷键</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123; "keys": ["alt+r"],</div><div class="line">      "command": "insert_snippet",</div><div class="line">      "args": &#123;</div><div class="line">        "contents": "&lt;font color=red&gt;$&#123;1:&#125;$SELECTION&lt;/font&gt;$&#123;0&#125;"</div><div class="line">      &#125;</div><div class="line">    &#125;,</div></pre></td></tr></table></figure>
<p><font color="red">其中光标所在位置为<code>${1:}$SELECTION</code>所在地</font></p>
<h1 id="树莓派开机自启动脚本">树莓派开机自启动脚本</h1>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"><span class="comment">### BEGIN INIT INFO</span></div><div class="line"><span class="comment"># Provides:          auto_start</span></div><div class="line"><span class="comment"># Required-Start:    $remote_fs</span></div><div class="line"><span class="comment"># Required-Stop:     $remote_fs</span></div><div class="line"><span class="comment"># Default-Start:     2 3 4 5</span></div><div class="line"><span class="comment"># Default-Stop:      0 1 6</span></div><div class="line"><span class="comment"># Short-Description: Start or stop the HTTP Proxy.</span></div><div class="line"><span class="comment">### END INIT INFO</span></div><div class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></div><div class="line">    start)</div><div class="line">        <span class="comment"># svnserve -d -r /home/pi/svn_repository</span></div><div class="line">        python /home/pi/Documents/tips/auto_login.py</div><div class="line">        python /home/pi/Documents/tips/start_note.py</div><div class="line">        python /home/pi/Documents/tips/baidu_weather.py</div><div class="line">        php5 /home/pi/Documents/tips/bind_dns/bind.php pi</div><div class="line">        php5 /home/pi/Documents/tips/bind_dns/bind.php survey</div><div class="line">        ;;</div><div class="line">    stop)</div><div class="line">        killall svnserve</div><div class="line">        ;;</div><div class="line">*)</div><div class="line"><span class="built_in">echo</span> <span class="string">"Usage: <span class="variable">$0</span> (start|stop)"</span></div><div class="line">;;</div><div class="line"><span class="keyword">esac</span></div></pre></td></tr></table></figure>
<p>注：本意是想写一个可以开机自启动的脚本，脚本的目的是登录校园网，然后将本机的IP地址更新到自己的域名中，向linux机器添加开机自启动脚本的方法为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment"># 在/etc/init.d/文件夹下添加新的启动脚本，格式参考上面，注意需要加入BEGIN INIT INFO那一段注释，否则在加入启动项时会出现LSB不存在的error</span></div><div class="line"></div><div class="line">sudo chmod +x 775 name</div><div class="line"><span class="comment"># 给脚本足够运行权限</span></div><div class="line">sudo update-rc.d name defaults 95</div><div class="line"><span class="comment"># 将自启动脚本name添加到自启动表项中，启动顺序为95，注意，需要使用网络的脚本顺序要大于90</span></div><div class="line">sudo update-rc.d <span class="_">-f</span> name remove</div><div class="line"><span class="comment"># 移除自启动项name</span></div></pre></td></tr></table></figure>
<p>这样既可开机自启动该脚本了</p>
<p>但是在实际运行中发现并不能实现自动的登录以及域名解析的更新，分析了之后发现该脚本启动时间太早，机器还没有分到ip地址，无法完成网络请求，于是将该脚本加入到了<code>/etc/rc.local</code>自启动脚本中，linux系统的脚本启动顺序为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/ </div><div class="line"># init.d目录包含许多系统各种服务的启动和停止脚本。</div><div class="line"></div><div class="line">/etc/rc.local</div><div class="line"># 脚本是在系统初始化级别脚本运行之后再执行的，</div><div class="line"># 因此可以安全地在里面添加你想在系统启动之后执行的脚本。</div></pre></td></tr></table></figure>
<p>在rc.local文件中，exit 0之前加入我们的启动脚本</p>
<p>为了保证可以联网，我们在脚本中设置了一个死循环，重复登录直到登录成功</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        f = urllib2.urlopen(url, post_data)</div><div class="line">        <span class="comment"># `这里完成了向登录页面发送登录POST请求的操作，只有这一步成功完成之后才能进行下一步的绑定域名脚本的执行，如果尚未分配到ip则会进入异常处理等待5秒继续尝试登录`</span></div><div class="line">        content = f.read()</div><div class="line">        <span class="comment"># print content</span></div><div class="line">        result=urllib.urlopen(<span class="string">'http://baidu.com'</span>).read()</div><div class="line">        <span class="keyword">print</span> result</div><div class="line">        <span class="keyword">print</span> os.popen(<span class="string">'sh /home/pi/Documents/bind.sh'</span>).read()</div><div class="line">        <span class="comment"># 在python中执行shell脚本的方法，这个函数可以输出脚本的输出信息</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"Network is Ready!"</span></div><div class="line">        <span class="keyword">break</span></div><div class="line">    <span class="keyword">except</span> Exception , e:</div><div class="line">        <span class="keyword">print</span> e</div><div class="line">        <span class="keyword">print</span> <span class="string">"Network is not ready,Sleep 5s..."</span></div><div class="line">        time.sleep(<span class="number">5</span>)</div></pre></td></tr></table></figure>
<h1 id="python-调用命令行">python 调用命令行</h1>
<p>os.popen这种调用方法可以输出脚本的输出信息,推荐使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os</div><div class="line">os.popen(<span class="string">'sh /home/pi/Documents/bind.sh'</span>).read()</div></pre></td></tr></table></figure>
<p>os.system 会输出一些奇怪的东西</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os</div><div class="line">os.system(<span class="string">"echo \"Hello World\""</span>)</div></pre></td></tr></table></figure>
<h1 id="查看应用安装位置">查看应用安装位置</h1>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 查看运行文件所在处</span></div><div class="line"><span class="built_in">which</span> hexo</div><div class="line"></div><div class="line"><span class="comment"># 查看应用安装位置</span></div><div class="line">whereis hexo</div></pre></td></tr></table></figure>
<h1 id="git-相关">git 相关</h1>
<ul>
<li>git status 中文乱码问题: <code>git config --global core.quotepath false</code></li>
<li>git gitignore 不起作用:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git rm -r --cached .</div><div class="line">git add .</div><div class="line">git commit -m <span class="string">'update .gitignore'</span></div><div class="line">git push -u origin master</div></pre></td></tr></table></figure>
<h1 id="mac-下鼠标设置">Mac 下鼠标设置</h1>
<ul>
<li>defaults read -g com.apple.mouse.scaling</li>
<li>defaults write -g com.apple.mouse.scaling 7</li>
</ul>
<h1 id="mac-gcc">mac GCC</h1>
<p>问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ld: symbol(s) not found for architecture i386</div><div class="line">clang: error: linker command failed with exit code 1 (use -v to see invocation)</div></pre></td></tr></table></figure>
<p>使用标准c库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc -o run hw3a.cpp -lstdc++</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Linux、Mac </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 记录 </tag>
            
            <tag> 终端 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[[计算机系统结构]指令系统]]></title>
      <url>https://qingfeng14.github.io/2017/03/15/%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84-%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/</url>
      <content type="html"><![CDATA[<p>指令系统，寻址方式，内存映射，大端小端，哈夫曼编码，单地址指令，两地址指令</p>
<a id="more"></a>
<p><span class="math display">\[\sum_{i=1}^n a_i=0\]</span></p>
<h1 id="计算机系统的性能评价">计算机系统的性能评价</h1>
<h2 id="时钟频率">时钟频率</h2>
<h2 id="指令执行速度">指令执行速度</h2>
<blockquote>
<p>一种经典的表示运算速度的方法</p>
</blockquote>
<p>MIPS(Million Instructions Per Second), GIPS, TIPS</p>
<p><span class="math display">\[MIPS = \frac{指令条数}{执行时间\times 10^6} = \frac{Fz}{CPI} = IPC \times Fz\]</span></p>
<p>其中:</p>
<ul>
<li>Fz为处理机的工作主频</li>
<li>CPI(Cycles Per Instruction)为<font color="red">每条指令所需的平均时钟周期数</font></li>
<li>IPC(Instruction Per Cycle)为每个时钟周期平均执行的指令条数</li>
</ul>
<h2 id="平均速度">平均速度</h2>
<h2 id="核心程序法">核心程序法</h2>
<h2 id="峰值速度">峰值速度</h2>
]]></content>
      
        <categories>
            
            <category> 系统结构 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 课程 </tag>
            
            <tag> 系统结构 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[[密码学]古典密码]]></title>
      <url>https://qingfeng14.github.io/2017/03/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%8F%A4%E5%85%B8%E5%AF%86%E7%A0%81/</url>
      <content type="html"><![CDATA[<p>Description：移位密码，凯撒密码，置换密码</p>
<a id="more"></a>
<h1 id="移位密码">移位密码：</h1>
<p>加密:ci= (pi+K) mod 26 解密:pi= (ci-K) mod 26</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">密钥：整数， 1≤K ≤25 (26个英文字母)</div><div class="line">加密：明文P中的每个字母被它之后的第K个字母替代</div><div class="line">解密：密文C中的每个字母被它之前的第K个字母替代</div></pre></td></tr></table></figure>
<h1 id="凯撒密码">凯撒密码</h1>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">当 K=3时，该密码体制成为凯撒密码(Caesar Cipher) 在古罗马的战争(公元前54年)中使用</div></pre></td></tr></table></figure>
<h1 id="置换密码-lecture-2">置换密码 Lecture 2</h1>
<ul>
<li>置换密码（ Permutation Cipher）：保持明文的所有字母不变，只是利用置换打乱了明 文字母的位置和次序；对明文字符的位置进行重新排列的一种密码。</li>
<li>也称易位密码、换位密码、移位密码</li>
<li>m = n, 把明文每m个分割，然后按照<span class="math inline">\(\pi(x)\)</span>的对应关系，调整明文顺序，形成密文，解密时反向进行即可</li>
</ul>
<h1 id="代换密码-lecture-2">代换密码 Lecture 2</h1>
<p>密钥K是所有的26个数字0,1,2…,25的一个置换， 即 – 加密： <span class="math inline">\(c_i=S(p_i)\)</span> – 解密： <span class="math inline">\(p_i=S^{-1}(c_i)\)</span></p>
<p>安全性分析：暴力搜索所有的密钥不可行 <span class="math display">\[26! = 4*10^{26} = 2^{88.4}\]</span> (公元前一千年内)</p>
<p>元9世界， 阿拉伯科学家al-Kindi发明代换密码频率分析， 分析单个英文字母出现频率，两个连续字母出现的概率</p>
<h2 id="代换密码频率分析步骤">代换密码频率分析步骤</h2>
<ol style="list-style-type: decimal">
<li>统计密文单词频率，与英文字母表中字母频率进行比较</li>
<li></li>
</ol>
<h1 id="维吉尼亚密码">维吉尼亚密码</h1>
<h2 id="加密">加密</h2>
<p>掩盖了加密后的字母统计概率（多表替换）</p>
<p>使用多个移位密码(shift cipher)</p>
<div class="figure">
<img src="https://upload.wikimedia.org/wikipedia/commons/9/9a/Vigenère_square_shading.svg" alt="维吉尼亚密码">
<p class="caption">维吉尼亚密码</p>
</div>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">明文: A T T A C K A T D A W N</div><div class="line">密钥: L E M O N L E M O N L E</div><div class="line">密文: L X F O PV E F R N H R</div></pre></td></tr></table></figure>
<h2 id="解密">解密；</h2>
<h3 id="分析方法">分析方法</h3>
<p>– 密钥空间大小为26m，若m很大，使用计算机穷尽密钥搜索也需要很长时间 – 寻找密钥长度，将问题变成简单的移位密码</p>
<h3 id="如何寻找m">如何寻找m ？</h3>
<p>– 两种方法 • Kasiski测试法， 1863 • 重合指数法分析， 1920</p>
<h2 id="kasiski-test-卡西斯基测试">Kasiski test（ 卡西斯基测试）</h2>
<p>– 基于以下事实 • 两段相同的明文段将被加密成相同的密文段，则他们的<font color="red">位置间距为m的倍数</font> – 算法 • 搜索长度至少为3的相同的密文段 • 记下离起始密码段的距离d1,d2,d3… • 则m整除gcd(d1,d2,d3…)</p>
<h2 id="重合指数法-index-of-coincidence">重合指数法（ Index of coincidence）</h2>
<p>– 定义：设x=x1x2x3…,xn是一条长度为n的串， x的重合指数Ic(x)定义为x中两个随机元素相同的 概率</p>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/2Y1i0a0J0S323417003Q/Image%202017-04-06%20at%2011.22.17%20上午.png" alt="重合指数法">
<p class="caption">重合指数法</p>
</div>
]]></content>
      
        <categories>
            
            <category> 密码学 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 课程 </tag>
            
            <tag> 密码学 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[[搜索引擎]性能评价]]></title>
      <url>https://qingfeng14.github.io/2017/03/14/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E-%E6%80%A7%E8%83%BD%E8%AF%84%E4%BB%B7/</url>
      <content type="html"><![CDATA[<h1 id="搜索引擎性能评价的目的">搜索引擎性能评价的目的</h1>
<ul>
<li>对用户而言： 信息获取渠道</li>
<li>对搜索引擎广告商而言</li>
<li>对搜索技术研究人员而言</li>
</ul>
<a id="more"></a>
<ul>
<li>对搜索引擎服务提供者</li>
<li>从较差查询样例中学习
<ul>
<li>链接锚本重定向问题</li>
<li>清华美院</li>
<li>团、派</li>
</ul></li>
</ul>
<h2 id="搜索引擎性能评价流程">搜索引擎性能评价流程</h2>
<h3 id="搜索引擎性能评价的对象">1.1 搜索引擎性能评价的对象</h3>
<h4 id="网络服务提供商的属性">网络服务提供商的属性</h4>
<p>市场占用率、</p>
<h4 id="网络信息检索工具属性">网络信息检索工具属性</h4>
<p>网络数据环境、用户群体</p>
<p><strong>搜索引擎运行效果</strong> 响应时间 耗费的硬件资源 是否满足用户的信息需求 用户获取信息耗费的时间成本？</p>
<blockquote>
<p>根据用户的需求调整响应时间和查询质量？</p>
</blockquote>
<h3 id="搜索引擎性能评价的cranfield体系">1.2 搜索引擎性能评价的Cranfield体系</h3>
<blockquote>
<p>黑箱评价方式：给定标准输入情况下，看系统输出与标准输出的差异</p>
</blockquote>
<p>输入:语料库，查询样例、相关性标注</p>
<p>优势：复用性（一次标注，多次使用）</p>
<h2 id="语料库采集">语料库采集</h2>
<p>信息检索系统：提供固定的语料库集合，集合规模适当，数据质量可靠</p>
<p>商业搜索引擎：不提供固定的语料库集合，评价数据抓取子系统性能</p>
<h2 id="查询样例集合构建">查询样例集合构建</h2>
<ul>
<li>用户查询规模庞大</li>
<li>核心问题：如何采样：真实性，精确性，全面性</li>
</ul>
<h3 id="查询采样的真实性反映用户实际需求">查询采样的真实性：反映用户实际需求</h3>
<p>来源：用户查询日志行为（日志隐私保护）、公开数据资源</p>
<h3 id="查询采样的精确性减少数据标注困难">查询采样的精确性：减少数据标注困难</h3>
<h3 id="查询采样的全面性综合评价各方面性能">查询采样的全面性：综合评价各方面性能</h3>
<p>少量查询样例代表大多数需求 采样依据：内容类别、热门程度、需求类型</p>
<p>查询信息需求决定了用户使用搜索引擎的满意度，数据环境复杂用户意图难以琢磨</p>
<h4 id="搜索引擎用户信息需求分布">搜索引擎用户信息需求分布：</h4>
<p>导航类：查询某个已知存在的资源，页面 主页，考试资源等等 信息类：查询与某个主题相关的关键信息资源 获取相关信息，没有确定查询目标， 香港股市，，， 事务类：查找与完成某个特定任务相关的资源 垂直搜索引擎服务对象 如：xxx下载，</p>
<p>保证采样全面性：查询热门程度（冷热保证） 查询信息需求（2：5：3）</p>
<h2 id="结果相关性标注">结果相关性标注</h2>
<p>内容相关≠关键资源</p>
<h4 id="相关性结果的共性要求">相关性结果的共性要求：</h4>
<ul>
<li>结果提供的学习时新、真实可靠</li>
<li>结果的标题和摘要应当方便阅读并有效引导用户阅读</li>
</ul>
<p>以信息需求类别为指导</p>
<h4 id="pooling-方法">Pooling 方法</h4>
<p>文本语料=》查询样例集 》 手工相关性标注</p>
<h4 id="准确率召回率">准确率/召回率</h4>
<p>准确率：找到的是否准确 召回率：找到的是否全面</p>
<p>信息检索强调序列的关系</p>
<h2 id="搜索引擎性能指标设计">搜索引擎性能指标设计</h2>
<h3 id="ap平均准确率">AP：平均准确率</h3>
<h4 id="搜索引擎用户行为的特殊性">搜索引擎用户行为的特殊性</h4>
<p>前10个结果（85%）</p>
<h4 id="搜索引擎用户信息需求的差异性">搜索引擎用户信息需求的差异性</h4>
<p>• 导航类信息需求的用户仅关注特定检索目标 • 信息类信息需求的用户关注全面而权威的信息 • 事务类信息需求的用户关注自己的任务是否可以顺利完成。</p>
<table>
<thead>
<tr class="header">
<th><strong>指标</strong></th>
<th><strong>适用</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>RR</td>
<td>导航类</td>
<td>用户在找到搜索目标前需要浏览多少结果</td>
</tr>
<tr class="even">
<td>P@N</td>
<td>信息类</td>
<td>结果列表中多大比例信息能够满足用户需求？</td>
</tr>
<tr class="odd">
<td>MAP</td>
<td></td>
<td>反映系统在全部相关文档上性能的单值指标。系统检索出来的相关文档越靠前(rank 越高)，MAP就应该越高</td>
</tr>
<tr class="even">
<td>前n位成功率</td>
<td>事务类</td>
<td>用户是否能够利用给出的结果完成自己所关注的事务</td>
</tr>
</tbody>
</table>
<h3 id="首位相关结果倒数reciprocal-rank">首位相关结果倒数(Reciprocal Rank)</h3>
<p><span class="math display">\[RR = \frac{1}{Rank(1)}\]</span></p>
<p>适用于导航类型的查询信息需求（ 用户在找到搜索目标前需要浏览多少结果？ ）</p>
<h3 id="前n位准确率precisionn">前N位准确率(Precision@N)</h3>
<p>适用于信息类型的查询信息需求（ 结果列表中多大比例信息能够满足用户需求？ ）</p>
<h3 id="前n位成功率successn">前N位成功率(Success@N)</h3>
<p>适用于事务类型的查询信息需求（ 用户是否能够利用给出的结果完成自己所关注的事务？ ）</p>
<h3 id="其他">其他</h3>
<ul>
<li>NDCG@N: • Normalized Discounted Cumulative Gain • 对结果进行多级相关性标注时适用 • ERR: Expected Reciprocal Rank • Supported by Yahoo! and Google • 可以获取用户行为数据时适用 • B-pref: Binary preference • 相关性标注不完整时适用</li>
</ul>
<p>P@N的计算方法</p>
<p>P@N本身是Precision<span class="citation">@N的简称</span>，指的是对特定的查询，考虑位置因素，检测前N条结果的准确率。例如对单次搜索的结果中前5篇，如果有4篇为相关文档，则P@5 = 4/5 = 0.8 。</p>
<p>测试通常会使用一个查询集合（按照前文所述方法构造），包含若干条不同的查询词，在实际使用P@N进行评估时，通常使用所有查询的P@N数据，计算算术平均值，用来评判该系统的整体搜索结果质量。</p>
<p>N的选取</p>
<p>对用户来说，通常只关注搜索结果最前若干条结果，因此通常搜索引擎的效果评估只关注前5、或者前3结果，所以我们常用的N取值为P@3或P<span class="citation">@5等</span>。</p>
<p>对一些特定类型的查询应用，如寻址类的查询（Navigational Search），由于目标结果极为明确，因此在评估时，会选择N=1（即使用P@1）。举个例子来说，搜索“新浪网”、或“新浪首页”，如果首条结果不是 新浪网（url：www.sina.com.cn），则直接判该次查询精度不满足需求，即P@1=0</p>
<h2 id="mrr-平均倒数排序">MRR 平均倒数排序</h2>
<p>MRR是平均排序倒数（Mean Reciprocal Rank）的简称，MRR方法主要用于寻址类检索（Navigational Search）或问答类检索（Question Answering），这些检索方法只需要一个相关文档，对召回率不敏感，而是更关注搜索引擎检索到的相关文档是否排在结果列表的前面。</p>
<p><font color="red">MRR方法首先计算每一个查询的第一个相关文档位置的倒数，然后将所有倒数值求平均。</font></p>
<p>MRR</p>
<p>上述的P@N方法，易于计算和理解。但细心的读者一定会发现问题，就是在前N结果中，排序第1位和第N位的结果，对准确率的影响是一样的。但实际情况是，搜索引擎的评价是和排序位置极为相关的。即排第一的结果错误，和第10位的结果错误，其严重程度有天壤之别。因此在评价系统中，需要引入位置这个因素。</p>
<p>MRR是平均排序倒数（Mean Reciprocal Rank）的简称，MRR方法主要用于寻址类检索（Navigational Search）或问答类检索（Question Answering），这些检索方法只需要一个相关文档，对召回率不敏感，而是更关注搜索引擎检索到的相关文档是否排在结果列表的前面。MRR方法首先计算每一个查询的第一个相关文档位置的倒数，然后将所有倒数值求平均。例如一个包含三个查询词的测试集，前5结果分别为：</p>
<p>查询一结果：1.AN 2.AR 3.AN 4.AN 5.AR 查询二结果：1.AN 2.AR 3.AR 4.AR 5.AN 查询三结果：1.AR 2.AN 3.AN 4.AN 5.AR 其中AN表示不相关结果，AR表示相关结果。那么第一个查询的排序倒数（Reciprocal Rank）RR1 = 1/2=0.5 ；第二个结果RR2 = 1/2 = 0.5 ； 注意倒数的值不变，即使查询二获得的相关结果更多。同理，RR3= 1/1 = 1。 对于这个测试集合，最终MRR=（RR1+RR2+RR3）/ 3 = 0.67</p>
<p>然而对大部分检索应用来说，只有一条结果无法满足需求，对这种情况，需要更合适的方法来计算效果，其中最常用的是下述MAP方法。</p>
<h2 id="map">MAP</h2>
<p>MAP方法是Mean Average Precison，即平均准确率法的简称。其定义是求每个相关文档检索出后的准确率的平均值（即Average Precision）的算术平均值（Mean）。这里对准确率求了两次平均，因此称为Mean Average Precision。（注：没叫Average Average Precision一是因为难听，二是因为无法区分两次平均的意义）</p>
<p>MAP 是反映系统在全部相关文档上性能的单值指标。系统检索出来的相关文档越靠前(rank 越高)，MAP就应该越高。如果系统没有返回相关文档，则准确率默认为0。</p>
<p>MAP:全称mean average precision(平均准确率)。mAP是为解决P，R，F-measure的单点值局限性的，同时考虑了检索效果的排名情况。 计算如下： 假设有两个主题，主题1有4个相关网页，主题2有5个相关网页。某系统对于主题1检索出4个相关网页，其rank分别为1, 2, 4, 7；对于主题2检索出3个相关网页，其rank分别为1,3,5。对于主题1，平均准确率为(1/1+2/2+3/4+4/7)/4=0.83。对于主题 2，平均准确率为(1/1+2/3+3/5+0+0)/5=0.45。则MAP=(0.83+0.45)/2=0.64。”</p>
]]></content>
      
        <categories>
            
            <category> 搜索引擎 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 搜索引擎 </tag>
            
            <tag> 课程 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hello Hexo]]></title>
      <url>https://qingfeng14.github.io/2017/03/14/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<a id="more"></a>
<h1 id="quick-start">Quick Start</h1>
<h3 id="create-a-new-post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="run-server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="generate-static-files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="deploy-to-remote-sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<h3 id="草稿">草稿</h3>
<p>草稿相当于很多博客都有的“私密文章”功能。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new draft <span class="string">"new draft"</span></div></pre></td></tr></table></figure>
<p>会在<code>source/_drafts</code>目录下生成一个<code>new-draft.md</code>文件。但是这个文件不被显示在页面上，链接也访问不到。也就是说如果你想把某一篇文章移除显示，又不舍得删除，可以把它移动到<code>_drafts</code>目录之中。</p>
<p>如果你希望强行预览草稿，更改配置文件：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">render_drafts:</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>或者，如下方式启动server：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server --drafts</div></pre></td></tr></table></figure>
<p>下面这条命令可以把草稿变成文章，或者页面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo publish [layout] &lt;filename&gt;</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
<h3 id="mathjax">MathJax</h3>
<p><a href="http://blog.csdn.net/ethmery/article/details/50670297" target="_blank" rel="external">MathJax 常用命令</a> <a href="http://catx.me/2014/03/09/hexo-mathjax-plugin/" target="_blank" rel="external">mathjax</a> <a href="http://blog.csdn.net/zoe_su/article/details/52506219" target="_blank" rel="external">常用 推荐</a> <a href="http://detexify.kirelabs.org/classify.html" target="_blank" rel="external">手写识别</a> <a href="http://www.jianshu.com/p/7ab21c7f0674" target="_blank" rel="external">修复公式不正常</a></p>
<p>在blog文件夹中执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo math install</div></pre></td></tr></table></figure>
<p>在<code>_config.yml</code>文件中添加：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attr">plugins:</span></div><div class="line"><span class="bullet">-</span> <span class="string">hexo-math</span></div></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Simple inline $a = b + c$.</div></pre></td></tr></table></figure>
<p>效果：</p>
<p>Simple inline <span class="math inline">\(a = b + c\)</span>.</p>
<p>MathJax Block:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$$\frac&#123;\partial u&#125;&#123;\partial t&#125;</div><div class="line">= h^2 \left( \frac&#123;\partial^2 u&#125;&#123;\partial x^2&#125; +</div><div class="line">\frac&#123;\partial^2 u&#125;&#123;\partial y^2&#125; +</div><div class="line">\frac&#123;\partial^2 u&#125;&#123;\partial z^2&#125;\right)$$</div></pre></td></tr></table></figure>
<p>效果： <span class="math display">\[\frac{\partial u}{\partial t}
= h^2 \left( \frac{\partial^2 u}{\partial x^2} +
\frac{\partial^2 u}{\partial y^2} +
\frac{\partial^2 u}{\partial z^2}\right)\]</span></p>
<h3 id="为hexo-next博客添加关键词功能"><a href="http://blog.csdn.net/vickyway/article/details/49762439" target="_blank" rel="external">为Hexo Next博客添加关键词功能</a></h3>
<p>修改文件：<code>themes\next\layout_partials\head.swig</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;% if page.keywords %&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"&#123;&#123; page.keywords &#125;&#125;"</span> /&gt;</span></div><div class="line">&#123;% elif page.tags and page.tags.length %&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"&#123;% for tag in page.tags %&#125;&#123;&#123; tag.name &#125;&#125;,&#123;% endfor %&#125;"</span> /&gt;</span></div><div class="line">&#123;% elif theme.keywords %&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"&#123;&#123; theme.keywords &#125;&#125;"</span> /&gt;</span></div><div class="line">&#123;% endif %&#125;</div></pre></td></tr></table></figure>
<p>修改内容：35行左右，将原来的设置ketwords的代码覆盖即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;% if page.keywords and page.keywords.length %&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"&#123;% for key in page.keywords %&#125;&#123;&#123; key &#125;&#125;,&#123;% endfor %&#125;"</span> /&gt;</span></div><div class="line">&#123;% elif page.tags and page.tags.length %&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"&#123;% for tag in page.tags %&#125;&#123;&#123; tag.name &#125;&#125;,&#123;% endfor %&#125;"</span> /&gt;</span></div><div class="line">&#123;% elif theme.keywords %&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"&#123;&#123; theme.keywords &#125;&#125;"</span> /&gt;</span></div><div class="line">&#123;% endif %&#125;</div></pre></td></tr></table></figure>
<h1 id="hexo-中设置访问密码">hexo 中设置访问密码</h1>
<p>在<code>themes-&gt;next-&gt;layout-&gt;_partials-&gt;head.swig</code>中的meta标签之后添加js代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;https://cdn.bootcss.com/js-sha1/0.4.1/sha1.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&quot;http://cdn.bootcss.com/blueimp-md5/1.1.0/js/md5.js&quot;&gt;&lt;/script&gt;  </div><div class="line"></div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt; </div><div class="line">loopy() </div><div class="line">function loopy() &#123; </div><div class="line">    if(&apos;&#123;&#123; page.password &#125;&#125;&apos;)&#123;</div><div class="line">        while(true) &#123;</div><div class="line">            var pass = prompt(&quot;输入正确密码才能查看!&quot;);</div><div class="line">            if(pass) &#123;</div><div class="line">                // 点击的确定</div><div class="line">                var ss = sha1(pass)</div><div class="line">                // alert(ss);</div><div class="line">                if(ss == &apos;&#123;&#123; page.password &#125;&#125;&apos;) &#123;</div><div class="line">                    alert(&quot;欢迎进入我的博客！Contact me at zhangshenghao1995@163.com&quot;);</div><div class="line">                    break;</div><div class="line">                &#125;</div><div class="line">                else &#123;</div><div class="line">                    alert(&quot;密码错误！&quot;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            else if(pass == &quot;&quot;) &#123;</div><div class="line">                // 用户没有输入</div><div class="line">            &#125;</div><div class="line">            else &#123;</div><div class="line">                // 点击取消</div><div class="line">                history.back()</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125; </div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Hexo </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 教程 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[现代密码学作业1]]></title>
      <url>https://qingfeng14.github.io/2017/03/14/%E5%AF%86%E7%A0%81%E5%AD%A6/%E5%AF%86%E7%A0%81%E5%AD%A6-Exercise1/</url>
      <content type="html"><![CDATA[<h3 id="使用穷尽密钥搜索方法破译如下利用移位密码加密的密文-beeak-fydjx-uqyhy-jiqry-htyji-qfbqd-uyjii-kfuhc-qd">1.5 使用穷尽密钥搜索方法破译如下利用移位密码加密的密文 BEEAK FYDJX UQYHY JIQRY HTYJI QFBQD UYJII KFUHC QD</h3>
<p>解：移位密码的加解密方法为：</p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">加密：明文P中的每个字母被它之后的第K个字母替代</div><div class="line">解密：密文C中的每个字母被它之前的第K个字母替代</div></pre></td></tr></table></figure>
<p>为了方便使用python编程完成遍历：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line">password = <span class="string">'BEEAK FYDJX UQYHY JIQRY HTYJI QFBQD UYJII KFUHC QD'</span></div><div class="line">password = password.replace(<span class="string">' '</span>, <span class="string">''</span>)</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">26</span>):</div><div class="line">    <span class="keyword">print</span> i, <span class="string">"\t"</span>,</div><div class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> password:</div><div class="line">        sys.stdout.write(chr(((ord(word) - i) - (<span class="number">65</span><span class="number">-26</span>)) % <span class="number">26</span> + <span class="number">97</span>))</div><div class="line">    sys.stdout.write(<span class="string">'\n'</span>)</div></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">0 beeakfydjxuqyhyjiqryhtyjiqfbqduyjiikfuhcqd</div><div class="line">1 addzjexciwtpxgxihpqxgsxihpeapctxihhjetgbpc</div><div class="line">2 zccyidwbhvsowfwhgopwfrwhgodzobswhggidsfaob</div><div class="line">3 ybbxhcvagurnvevgfnoveqvgfncynarvgffhcrezna</div><div class="line">4 xaawgbuzftqmudufemnudpufembxmzqufeegbqdymz</div><div class="line">5 wzzvfatyespltctedlmtcotedlawlypteddfapcxly</div><div class="line">6 vyyuezsxdroksbsdcklsbnsdckzvkxosdccezobwkx</div><div class="line">7 uxxtdyrwcqnjrarcbjkramrcbjyujwnrcbbdynavjw</div><div class="line">8 twwscxqvbpmiqzqbaijqzlqbaixtivmqbaacxmzuiv</div><div class="line">9 svvrbwpuaolhpypazhipykpazhwshulpazzbwlythu</div><div class="line">10 ruuqavotznkgoxozyghoxjozygvrgtkozyyavkxsgt</div><div class="line">11 qttpzunsymjfnwnyxfgnwinyxfuqfsjnyxxzujwrfs</div><div class="line">12 pssoytmrxliemvmxwefmvhmxwetperimxwwytivqer</div><div class="line">13 orrnxslqwkhdlulwvdeluglwvdsodqhlwvvxshupdq</div><div class="line">14 nqqmwrkpvjgcktkvucdktfkvucrncpgkvuuwrgtocp</div><div class="line">15 mpplvqjouifbjsjutbcjsejutbqmbofjuttvqfsnbo</div><div class="line">16 lookupintheairitsabirditsaplaneitssuperman</div><div class="line">17 knnjtohmsgdzhqhsrzahqchsrzokzmdhsrrtodqlzm</div><div class="line">18 jmmisnglrfcygpgrqyzgpbgrqynjylcgrqqsncpkyl</div><div class="line">19 illhrmfkqebxfofqpxyfoafqpxmixkbfqpprmbojxk</div><div class="line">20 hkkgqlejpdawenepowxenzepowlhwjaepooqlaniwj</div><div class="line">21 gjjfpkdioczvdmdonvwdmydonvkgvizdonnpkzmhvi</div><div class="line">22 fiieojchnbyuclcnmuvclxcnmujfuhycnmmojylguh</div><div class="line">23 ehhdnibgmaxtbkbmltubkwbmltietgxbmllnixkftg</div><div class="line">24 dggcmhaflzwsajalkstajvalkshdsfwalkkmhwjesf</div><div class="line">25 cffblgzekyvrzizkjrsziuzkjrgcrevzkjjlgvidre</div></pre></td></tr></table></figure>
<p>查看输出的26条结果，发现<code>lookup in the air its a bird its a plane its superman</code>是其中有意义的语句，相应秘钥为K=16</p>
<h3 id="a-设pi-为集合12cdots8上的置换">1.6 (a) 设<span class="math inline">\(\pi\)</span> 为集合{1,2,<span class="math inline">\(\cdots\)</span>,8}上的置换：</h3>
<table>
<thead>
<tr class="header">
<th><span class="math inline">\(x\)</span></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\pi(x)\)</span></td>
<td>4</td>
<td>1</td>
<td>6</td>
<td>2</td>
<td>7</td>
<td>3</td>
<td>8</td>
<td>5</td>
</tr>
</tbody>
</table>
<p>求出逆置换 <span class="math inline">\(\pi^{-1}\)</span></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>解密下列使用置换密码加密的密文，密钥是<span class="math inline">\((a)\)</span>中的<span class="math inline">\(\pi^{-1}\)</span> <span class="math display">\[ETEGENLMDNTNEOORDAHATECOESAHLRMI\]</span></li>
</ol>
<p>解：</p>
<p>(a). 逆置换<span class="math inline">\(\pi^{-1}\)</span></p>
<table>
<thead>
<tr class="header">
<th><span class="math inline">\(x\)</span></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\pi^{-1}(x)\)</span></td>
<td>2</td>
<td>4</td>
<td>6</td>
<td>1</td>
<td>8</td>
<td>3</td>
<td>5</td>
<td>7</td>
</tr>
</tbody>
</table>
<p>(b). 解密，秘钥是<span class="math inline">\((a)\)</span>中的<span class="math inline">\(\pi^{-1}\)</span>, 则解密时使用置换<span class="math inline">\(\pi\)</span>进行解密，按8个字母分组，<span class="math display">\[ETEGENLM , DNTNEOOR , DAHATECO , ESAHLRMI , \]</span></p>
<p>解密得：<span class="math display">\[GENTLEME\ NDONOTRE\ ADEACHOT\ HERSMAIL\]</span> 明文为：<span class="math display">\[gentlemen\ don&#39;t\ read\ each\ others\ mail.\]</span></p>
<h3 id="以下给出的四段密文第一个由代换密码加密而成第二个由维吉尼亚密码加密而成第三个由仿射密码加密而成最后一个不知其具体的密码体制试从密文确定其明文要求给出清晰的分析过程包括统计分析和进行的计算">1.21 以下给出的四段密文,第一个由代换密码加密而成第二个由维吉尼亚密码加密而成,第三个由仿射密码加密而成,最后一个不知其具体的密码体制,试从密文确定其明文。要求给出清晰的分析过程,包括统计分析和进行的计算。</h3>
<ol style="list-style-type: lower-alpha">
<li>代换密码:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EMGLOSUDCGDNCUSWYSFHNSFCYKDPUMLWG YICOXYSIPJCKQPKUGKMGOLICGINCGACKSNISACYKZSCKXECJCKSHYSXCGOIDPKZCNKSHICGIWYGKKG KGOLDSILKGOIUSIGLEDSPWZUGFZCCNDGY YSFUSZCNXEOJNCGYEOWEUPXEZGACGNFGLKNSACIGOIYCKXCJUCIUZCFZCCNDGYYSFEUEKUZCSOCFZC CNCIACZEJNCSHFZEJZEGMXCYHCJUMGKUCY</div></pre></td></tr></table></figure>
<p>提示:F解密到w</p>
<p>解：</p>
<p>Step1 字母频数统计: (‘C’, 37), (‘G’, 24), (‘S’, 20), (‘K’, 18), (‘I’, 15), (‘Y’, 15), (‘U’, 14), (‘N’, 13), (‘Z’, 13), (‘E’, 12), (‘O’, 10), (‘F’, 9), (‘D’, 8), (‘J’, 7), (‘L’, 7), (‘X’, 7), (‘P’, 6), (‘A’, 5), (‘H’, 5), (‘M’, 5), (‘W’, 5), (‘Q’, 1)</p>
<p>于是猜测：<span class="math inline">\(S(e) = C\)</span></p>
<p>Step2 统计双字出现频率 [(‘CG’, 7), (‘CK’, 5), (‘CN’, 5), (‘CY’, 4), (‘CJ’, 3), (‘CI’, 3), (‘CC’, 3), (‘CF’, 2), (‘CS’, 2), (‘CO’, 1), (‘CZ’, 1), (‘CU’, 1)]</p>
<p>[(‘ZC’, 7), (‘AC’, 5), (‘NC’, 5), (‘CC’, 3), (‘XC’, 3), (‘IC’, 3), (‘UC’, 2), (‘JC’, 2), (‘YC’, 1), (‘OC’, 1), (‘DC’, 1), (‘EC’, 1), (‘FC’, 1), (‘SC’, 1), (‘HC’, 1)]</p>
<p>出现次数最多的双字为CG,和ZC G可能是r,s,n,d,a中的一个，GC没有出现，故G不是r,G出现24次，频率为0.09， 假设S(a)=G Z的出现频率为 0.05， ZC(Ze)出现频率约0.02, 推测S(h)=Z SC（Se）出现1次(0.0039)，没有CS(eS),S出现20次（0.078），猜测S(o)=S</p>
<p>AC出现5次，频率0.019， A出现频率为0.0195，</p>
<p>已知F解密到w，此时该字符串如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EMaLOoUDeaDNeUoWYowHNoweYKDPUMLWaYIeOXYoIPJeKQPKUa KMaOLIeaINeaAeKoNIoAeYKhoeKXEeJeKoHYoXeaOIDPKheNKoHIeaIWYaKKaKaOLDoILKaOIUoI aLEDoPWhUawheeNDaYYowUoheNXEOJNeaYEOWEUPXEhaAeaNwaLKNoAeIaOI YeKXeJUeIUhewheeNDaYYowEUEKUheoOewheeNeIAehEJNeoHwhEJhEaMXeYHeJUMaKUeY</div></pre></td></tr></table></figure>
<p>wheeN出现次数较多，猜测S(l) = N</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EMaLOoUDeaDleUoWYowHloweYKDPUMLWaYIeOXYoIPJeKQPKUaKMaOLI eaIleaAeKolIoAeYKhoeKXEeJeKoHYoXeaOIDPKhelKoHIeaIWYaKKaKaOLDoILKaOIUoIaLEDoPWh UawheelDaYYowUohelXEOJleaYEOWEUPXEhaAealwaLKloAeIaOIYeK XeJUeIUhewheelDaYYowEUEKUheoOewheeleIAehEJleoHwhEJhEaMXeYHeJUMaKUeY</div></pre></td></tr></table></figure>
<p>统计h前后的字母，</p>
<p>[(‘wh’, 4), (‘Kh’, 2), (‘Uh’, 2), (‘Eh’, 1), (‘oh’, 1), (‘Jh’, 1), (‘Wh’, 1), (‘eh’, 1)][(‘he’, 7), (‘hE’, 3), (‘ha’, 1), (‘hU’, 1), (‘ho’, 1)]</p>
<p>Khe出现一次，Uhe出现两次，推测S(t)=U</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EMaLOotDeaDletoWYowHloweYKDPtMLWaYIeOXYoIPJeKQPKtaKMaOLI eaIleaAeKolIoAeYKhoeKXEeJeKoHYoXeaOIDPKhelKoHIeaIWYaKKaKaOLDoILKaOItoIaLEDoPWh tawheelDaYYowtohelXEOJleaYEOWEtPXEhaAealwaLKloAeIaOIYeK XeJteIthewheelDaYYowEtEKtheoOewheeleIAehEJleoHwhEJhEaMXeYHeJtMaKteY</div></pre></td></tr></table></figure>
<p>由wheellDaYYow ，猜测S(b) = D, S(r) = Y 由Hlower，猜测S(f) = H 由Wrow，猜测S(g)= W 由Khoe，猜测S(s) = K 由Master，猜测S(m) = M</p>
<p>此时文本为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EmaLOot be able to grow flowers bPt mLgarIeOXroIPJesQPstasmaOL IeaI leaAes olI oAer shoes XEeJesofroXeaOIbPshels of IeaI grass as aOLboILsaOItoIaLEboPght a wheelbarrow to helXEOJlearEOgEtPXEhaAealwaLs loAe IaOIresXeJteI the wheelbarrow EtEs the oOe wheel eIAehEJleofwhEJhEamXerfeJt master</div></pre></td></tr></table></figure>
<p>由oOe，猜测，S(n) = O 由lwaAes, 猜测S(v) = A ….. 最终结果为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">I may not be able to grow flowers, but my garden produces just as many dead leaves, old overshoes pieces of rope and bushels of dead grass as anybody’s. And today I bought a wheelbarrow to help in clearing it up. I have always loved and respected the wheelbarrow. It is the one wheeled vehicle of which I am perfect master.</div></pre></td></tr></table></figure>
<ol start="2" style="list-style-type: lower-alpha">
<li>维吉尼亚密码:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">KCCPKBGUFDPHQTYAVINRRTMVGRKDNBVFDETDGILTXRGUDDKOTF MBPVGEGLTGCKQRACQCWDNAWCRXIZAKFTLEWRPTYCQKYVXCHKFTPONCQQRHJVAJUWETMCMSPKQDYHJV DAHCTRLSVSKCGCZQQDZXGSFRLSWCWSJTBHAFSIASPRJAH KJRJUMVGKMITZHFPDISPZLVLGWTFPLKKEBDPGCEBSHCTJRWXBAFSPEZQNRWXCVYCGAONWDDKACKAWBBIKFTI OVKCGGHJVLNHIFFSQESVYCLACNVRWBBIREPBBVFEXOSCDYGZWPFDTKFQIYCWHJVLNHIQIBTKHJVNPIST</div></pre></td></tr></table></figure>
<p>重合指数法确定m</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">m= 1 Ic =  0.0408718383496 </div><div class="line">avg:  0.0408718383496</div><div class="line">m= 2 Ic =  0.0384615384615 0.047120045623 </div><div class="line">avg:  0.0427907920423</div><div class="line">m= 3 Ic =  0.0559418457649 0.0481016731017 0.0482625482625 </div><div class="line">avg:  0.050768689043</div><div class="line">m= 4 Ic =  0.0372549019608 0.0427423981641 0.0375788869765 0.0490533562823 </div><div class="line">avg:  0.0416573858459</div><div class="line">m= 5 Ic =  0.0425812115891 0.0430201931519 0.0325644504749 0.0352781546811 0.0429669832655 </div><div class="line">avg:  0.0392821986325</div><div class="line">m= 6 Ic =  0.062656641604 0.0837662337662 0.0493506493506 0.0649350649351 0.0428571428571 0.0733766233766 </div><div class="line">avg:  0.0628237259816</div><div class="line">m= 7 Ic =  0.030612244898 0.0443262411348 0.0434397163121 0.040780141844 0.0443262411348 0.0443262411348 0.040780141844 </div><div class="line">avg:  0.041227281186</div></pre></td></tr></table></figure>
<p>m=6时，重合指数接近0.065, 进而确定m=6</p>
<p>密钥中各字符之间的相对位移的确定。根据确定好了的密钥长度m，分别计算各个字符不同相对位移下的重合指数，并将结果与0.065比较，从而确定各字符之间的相对位移。</p>
<p>密钥为: CRYPTO</p>
<p>明文为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">i learned how to calculate the amount of paper needed for a room when i was at school you multiply the square foot age of the walls by the cubic contents of the floor and ceiling combined and double it you then allow half the total for openings such as windows and doors then you allow the other half for matching the pattern then you double the whole thing again to give a margin of error and then you order the paper</div></pre></td></tr></table></figure>
<ol start="3" style="list-style-type: lower-alpha">
<li>仿射密码:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">KQEREJEBCPPCJCRKIEACUZB KRVPKRBCIBQCARBJCVFCUPKRIOFKPACUZQE PBKRXPEIIEABDKPBCPFCDCCAFIEABDKPBCPFEQPKAZBKRHAIB KAPCCIBURCC DKDCCJCIDFUIXPAFFERBICZDFKABICBBENEFCUPJCVKABPCYDCCDPKBCOCPERKIVKSCP ICBRKIJPKABI</div></pre></td></tr></table></figure>
<p>仿射密码的加密函数是<span class="math inline">\(S(x) = (ax+b) mod(m)\)</span>，其中 • a和m互质。 • m是字母的数目。</p>
<p>此处m=26, 根据字母频率，C出现次数最多，假设S(e) = C， 即4a + b = 2,其中a与26互素， 尝试所有与26互素的数字，判定结果正确的指标采用重合指数的方式，将结果与0.065进行比较，确定正确结果。</p>
<p>明文为：O Canada terre de nos aieux ton front est ceint defleurons glorieux car ton bras sait porter lepee il sait porter la croix ton histoire est une epopee des plus brillants exploits et ta valeur de foi trempee protegera nos foyers et nos droits</p>
<p>(d)未知密码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">BNVSNSIHQCEELSSKKYERIFJKXUMBGYKAMOLJTYAVFBKVT DVBPWWRJY YLAOKYMPIQSCGDLFSRLL PROYGESEBUUALRWXM MASAZLGLEDFJBZAVVPXWICGJXASCBYEHOSNMULKCEAHTQ OKMFLEBKFXLRRFDT7XCTWBJSICBGAWDVYDHAVFJXZLBKC GJINEAHTTOEWTUHKRQVVRGZBXYIREMMASCSPBHLHJMBLR FFJELHWEYILWISTFW WYEJCMHYUYRUFSFMGESI GRL WALSIWM NUHSIMYYITCCQP2SICEHBCCMZFEGVJYOCDEMMPGHVAAUM ELCMOEHVLTIPSUYILVGFLMVWDVYDBTHFRAYISYSGKVSUU HYHGGCKTMBLRX</div></pre></td></tr></table></figure>
<p>不妨尝试一下维吉尼亚密码密码，将其以输入用b的程序进行解密，结果为：</p>
<p>秘钥长度为 6 秘钥为: THEORY 明文为: 秘钥长度为 6 秘钥为: THEORY 明文为:</p>
<p>I grew up among slow talkers men in particular who dropped words a few at a time like beans in a hill and when I got to Minneapolis where people took a lake wobegon comma to mean the end of a story I couldn’t speak a whole sentence in company and was considered not too briaht so I enrolled in a speech couqse taught by orvilles and the founder of reflexive relaxology a self hypnotic technique that enabled a person to speak up to three hundred words per minute</p>
<h3 id="下面给出一种特殊的置换密码设mn为正整数将明文写成一个mn的矩阵依次取各列构成密文例如设m3n4可以将明文cryptography写成">1.26 下面给出一种特殊的置换密码。设m,n为正整数，将明文写成一个m*n的矩阵，依次取各列构成密文。例如，设m=3,n=4，可以将明文cryptography写成</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cryp</div><div class="line">togr</div><div class="line">aphy</div></pre></td></tr></table></figure>
<p>对应的密码是: ctaropyghpry (1) 在已知m和n的情况下，Bob如何解密密文 (2) 现在根据上面的方法，试破解下列密文：MYAMRARUYIQTENCTORAHROYWDSOYEOUARRGDERNOGW</p>
<p>解： （1）已知m和n时，Bob可以以间隔m, 依次取密文中的字符，组合成明文。 （2）遍历m,n的组合，结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">m:  1  n:  42</div><div class="line">myamraruyiqtenctorahroywdsoyeouarrgdernogw</div><div class="line">m:  2  n:  21</div><div class="line">marryqecoarydoeurgengxlzthsmsqgnvrxnzqcqnv</div><div class="line">m:  3  n:  14</div><div class="line">mmrietaodyureoxqtpmngxrdzfqfyywrappummpblu</div><div class="line">m:  6  n:  7</div><div class="line">mreaduextmgrzqywapmpljfqlvolnmkuaccvomrjyr</div><div class="line">m:  7  n:  6</div><div class="line">mucoedxxsxndygmuspjnoaxknpwonkvzcjmblhlsaq</div><div class="line">m:  14  n:  3</div><div class="line">mcexsnymsjoxnwnvcmllanhwqqwznigtdihdscualj</div><div class="line">m:  21  n:  2</div><div class="line">moxxyujanovjlsnxqgzlgqigsfatopepybawiwonxc</div></pre></td></tr></table></figure>
<p>查阅资料，发现key是142536，调整其顺序,得到</p>
<p>mary mary quite contrary how does your garden grow</p>
<h3 id="section">1.29</h3>
<p>下面给出一个由维吉尼亚密码改进的流密码。给定长度为m的密钥字(K,…,K) 通过规则 <span class="math display">\[z_i = K_i(1\le i \le m), z_{i+m} = (z_i + 1)mod26 (i \ge 1)\]</span>来构造密钥流序列,换句话说,每次我们使用的密钥字都使用字母后续者的模26来替代。例如,如果“SUMMER”是密钥字,我们首先用“SUMMER”来加密第一个六字母组,对下一个六字母组,使用“TVNNFS”,等等。</p>
<p>(a)描述一下怎样利用重合指数法来确定首次用来加密的密钥字的长度,然后找到它。</p>
<p>(b)通过分析下列密文来测试你的方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">IYMYSILONRFNCQXQJEDSHBUIBCJUZBOLFQYSCHATPEQGQ JEJNGNXZWHHGWFSUKULJQACZKKJOAAHGKEMTAFGMKVRDO PXNEHEKZNKFSKIFRQVHHOVXINPHMRTJPYWQGJWPUUVKFP OAWPMRKKQZWLQDYAZDRMLPBJKJOBWIWPSEPVVQMBCRYVC RUZAAOUMBCHDAGDIEMSZFZHALIGKEMJJJPCIWKRMLMPIN AYOFIREAOLDTH ITDVRMSE</div></pre></td></tr></table></figure>
<p>解： (a) 分m组取时，每次需要减index 并mod 26，用生成的序列去计算其重合指数 (b) 结果如下;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">m= 1 Ic =  0.0402853824457 </div><div class="line">avg:  0.0402853824457</div><div class="line">m= 2 Ic =  0.0401172864188 0.0355857656937 </div><div class="line">avg:  0.0378515260562</div><div class="line">m= 3 Ic =  0.0361336946703 0.0430593194821 0.0478771454381 </div><div class="line">avg:  0.0423567198635</div><div class="line">m= 4 Ic =  0.0380750925436 0.0407191961925 0.0382513661202 0.0349726775956 </div><div class="line">avg:  0.038004583113</div><div class="line">m= 5 Ic =  0.0710204081633 0.0739795918367 0.0756802721088 0.0960884353741 0.0816326530612 </div><div class="line">avg:  0.0796802721088</div><div class="line">秘钥长度为 5</div><div class="line">秘钥为: PRIME</div><div class="line">明文为:</div><div class="line">the most famous cryptologist in history owesh is fameless to what he did than to what he said and to the sensational way in which he said it and this was most perfectly in character for herbertosborneyardley was perhaps the most engagin garticulateandtechnicoloredpersonalityinthebusiness</div></pre></td></tr></table></figure>
<h3 id="section-1">1.30</h3>
<div class="figure">
<img src="https://d3uepj124s5rcx.cloudfront.net/items/0g3w1i1x1t452H0a0i0a/Image%202017-04-07%20at%209.57.15%20下午.png" alt="1.30">
<p class="caption">1.30</p>
</div>
<p>解：使用python解密，结果如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">0 aqndwbhapnkjhwaxjyhwhanpjdjynaqjohzypzypdjobannykjoyphjdijtp</div><div class="line">1 kjqixtokwqsfoxkzfroxokqwfifrqkjfvoerwerwifvtkqqrsfvrwoficfpw</div><div class="line">2 sfjczpvsxjugvzseglvzvsjxgcgljsfgyvhlxhlxcgypsjjlugylxvgcagwx</div><div class="line">3 ugfaewyuzfmbyeuhbdyeyufzbabdfugbryodzodzabrwuffdmbrdzybakbxz</div><div class="line">4 mbgkhxrmegntrhmotirhrmgetktigmbtlrvieviektlxmggintliertkstze</div><div class="line">5 ntbsozlnhbqplonvpclolnbhpspcbntpdlychychspdznbbcqpdchlpsupeh</div><div class="line">6 qptuvedqotjwdvqywadvdqtowuwatqpwidraoraouwieqttajwiaodwumwho</div><div class="line">7 jwpmyhijvpfxiyjrxkiyijpvxmxkpjwxcilkvlkvmxchjppkfxckvixmnxov</div><div class="line">8 fxwnrocfywgzcrflzscrcfwyznzswfxzacdsydsynzaofwwsgzasycznqzvy</div><div class="line">9 gzxqlvagrxbealgdeualagxreqeuxgzekaiuriurqekvgxxubekuraeqjeyr</div><div class="line">10 bezjdykblzthkdbihmkdkbzlhjhmzbehskcmlcmljhsybzzmthsmlkhjfhrl</div><div class="line">11 thefirstdepositconsistedofonethousandandfourteenpoundsofgold</div><div class="line">12 pohgclupihwvucpavqucuphivgvqhpovmukqikqigvmlphhqwvmqiuvgbvdi</div><div class="line">13 wvobadmwcoxymawkyjmamwocybyjowvynmsjcsjcbyndwoojxynjcmybtyic</div><div class="line">14 xyvtkinxavzrnkxsrfnknxvartrfvxyrqnufaufatrqixvvfzrqfanrtprca</div><div class="line">15 zrypscqzkyelqszulgqsqzyklplgyzrljqmgkmgkpljczyygeljgkqlpwlak</div><div class="line">16 elrwuajesrhdjuemdbjujersdwdbreldfjnbsnbswdfaerrbhdfbsjdwxdks</div><div class="line">17 hdlxmkfhuloifmhnitfmfhluixitlhdigfqtuqtuxigkhlltoigtufixzisu</div><div class="line">18 oidznsgomdvcgnoqcpgngodmczcpdoicbgjpmjpmzcbsoddpvcbpmgczecum</div><div class="line">19 vciequbvniyabqvjawbqbvinaeawivcatbfwnfwneatuviiwyatwnbaehamn</div><div class="line">20 yachjmtyqcrktjyfkxtjtycqkhkxcyakptgxqgxqhkpmyccxrkpxqtkhoknq</div><div class="line">21 rkaofnprjalspfrgszpfprajsoszarkswpbzjbzjoswnraazlswzjpsovsqj</div><div class="line">22 lskvgqwlfkduwglbuewgwlkfuvueklsuxwteftefvuxqlkkeduxefwuvyujf</div><div class="line">23 dusybjxdgsimxbdtmhxbxdsgmymhsdumzxphgphgymzjdsshimzhgxmyrmfg</div><div class="line">24 imurtfzibucnztipnoztziubnrnouimnezwobwobrnefiuuocneobznrlngb</div><div class="line">25 cnmlpgectmaqepcwqvepecmtqlqvmcnqhexvtxvtlqhgcmmvaqhvteqldqbt</div></pre></td></tr></table></figure>
<p>K = 11时为结果，明文为：</p>
<p><code>the first deposit consisted of one thousand and fourteen pounds of gold</code></p>
]]></content>
      
        <categories>
            
            <category> 密码学 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> 作业 </tag>
            
            <tag> 课程 </tag>
            
            <tag> 密码学 </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
